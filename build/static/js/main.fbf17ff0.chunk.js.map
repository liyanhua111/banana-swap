{"version":3,"sources":["assets/img/icon3.png","assets/img/icon1.png","assets/img/icon2.png","assets/img/nav/nav1.png","assets/img/nav/nav2.png","assets/img/nav/logo.png","assets/img/nav/lang.png","assets/img/nav/b1.png","assets/img/nav/b2.png","assets/img/nav/b3.png","assets/img/nav/b4.png","assets/img/nav/b5.png","assets/img/homeSubBg1.png","assets/img/homeImg1.png","assets/img/homeImg2.png","assets/img/homeImg3.png","assets/img/homeIcon2.png","assets/img/dome1.png","assets/img/dome2.png","assets/img/homeImg4.png","assets/img/homeSubBg2.png","components/identicon/index.tsx","components/accountInfo.tsx","components/walletConnect.tsx","components/appBar.tsx","components/numericInput.tsx","components/slippage/index.tsx","components/settings.tsx","components/tokenIcon/index.tsx","models/airdrops.ts","models/marketOverrides.ts","context/market.tsx","components/pool/address.tsx","components/pool/supplyOverview.tsx","components/currencyInput/index.tsx","components/pool/config.tsx","utils/currencyPair.tsx","components/labels.tsx","components/pool/add.tsx","components/pool/remove.tsx","components/charts/historical.tsx","components/pool/card.tsx","components/pool/quickView.tsx","components/migration/index.tsx","components/charts/index.tsx","components/pool/view.tsx","components/trade/index.tsx","components/exchange.tsx","routes.tsx","components/menu/index.tsx","components/main/main.tsx","components/home/index.tsx","App.tsx","serviceWorker.ts","index.tsx","components/explorerLink.tsx","utils/utils.ts","utils/accounts.tsx","assets/img/homeIcon.png","models/pool.ts","utils/eventEmitter.ts","utils/connection.tsx","utils/ids.tsx","wallet-adapters/ledger/core.ts","models/tokenSwap.ts","utils/pools.tsx","models/index.ts","utils/notifications.tsx","assets/img/logo.png","wallet-adapters/types.ts","wallet-adapters/ledger/index.tsx","wallet-adapters/solong/index.tsx","wallet-adapters/phantom/index.tsx","wallet-adapters/math/index.tsx","context/wallet.tsx"],"names":["module","exports","Identicon","props","address","style","ref","useRef","useEffect","current","innerHTML","className","appendChild","Jazzicon","width","parseInt","bs58","decode","toString","slice","AccountInfo","wallet","useWallet","account","useNativeAccount","publicKey","lamports","LAMPORTS_PER_SOL","toFixed","shortenAddress","toBase58","marginLeft","WalletConnect","children","connected","select","connect","disconnect","menu","textAlign","type","padding","Item","key","onClick","color","overlay","trigger","cursor","Button","AppBar","location","useLocation","history","useHistory","mode","selectedKeys","pathname","to","href","target","rel","left","size","push","right","NumericInput","onChange","e","value","test","onBlur","valueTemp","charAt","length","startsWith","replace","this","maxLength","React","Component","Slippage","useSlippageConfig","slippage","setSlippage","slippagePct","useState","setValue","itemStyle","margin","display","flexDirection","alignItems","map","item","val","border","placeholder","fontSize","boxShadow","borderColor","outline","x","cappedSlippage","Math","min","parseFloat","safeCappedSlippage","Number","isNaN","newValue","isFinite","Settings","useConnectionConfig","endpoint","setEndpoint","onSelect","marginRight","ENDPOINTS","name","Option","TokenIcon","tokenMap","failed","setFailed","icon","getTokenIcon","mintAddress","alt","onError","height","src","marginTop","borderRadius","backgroundColor","backgroundClip","alignSelf","PoolIcon","mintA","mintB","POOLS_WITH_AIRDROP","MINT_TO_MARKET","INITAL_LIQUIDITY_DATE","Date","MarketsContext","createContext","marketEmitter","EventEmitter","MarketProvider","pools","useCachedPool","accountsToObserve","useMemo","Map","dailyVolume","setDailyVolume","connection","Connection","marketByMint","Set","p","pubkeys","holdingMints","flat","values","reduce","acc","SERUM_TOKEN","TOKEN_MINTS","find","a","marketAddress","marketName","marketInfo","MARKETS","filter","m","deprecated","set","timer","bonfidaTimer","updateData","refreshAccounts","keys","raiseMarketUpdated","window","setTimeout","bonfidaQuery","fetch","resp","json","data","pool_identifier","reverseSerumMarketCache","forEach","mint","get","allMarkets","getMultipleAccounts","undefined","cache","then","array","index","market","programId","id","add","decoded","Market","getLayout","details","pubkey","info","registerParser","baseMint","MintParser","quoteMint","bids","OrderBookParser","asks","toQuery","initalQuery","clearTimeout","midPriceInUSD","useCallback","getMidPrice","subscribeToMarket","bid","ask","delete","Provider","useEnrichedPools","context","useContext","enriched","setEnriched","marketsByMint","subscriptions","update","poolData","TODAY","mints","sort","getMint","account0","getAccount","holdingAccounts","account1","accountA","accountB","baseMid","baseReserveUSD","convert","quoteReserveUSD","poolMint","supply","eqn","airdropYield","poolWithAirdrop","drop","pool","equals","airdrops","midPrice","amount","calculateAirdropYield","volume","volume24h","volume24hA","fees24h","LIQUIDITY_PROVIDER_FEE","SERUM_FEE","fees","apy","apy24h","feeAccount","ownedPct","toNumber","baseVolume","quoteVolume","daysSinceInception","floor","getTime","apy0","apy1","max","lpMint","getPoolName","link","names","getTokenName","accounts","liquidityA","liquidityAinUsd","liquidityB","liquidityBinUsd","pow","decimals","liquidity","extra","raw","createEnrichedPools","dispose","onMarket","Orderbook","LAYOUT","STABLE_COINS","has","decodedMarket","baseMintDecimals","quoteMintDecimals","bidsBook","accountFlags","slab","asksBook","bestBid","getL2","bestAsk","PublicKey","Address","label","span","code","shape","CopyOutlined","navigator","clipboard","writeText","PoolAddress","AccountsAddress","aName","bName","account2","mint1","mint2","AdressesPopover","placement","title","content","showLabel","InfoCircleOutlined","SupplyOverview","chartDiv","div","instance","echarts","getInstanceByDom","init","tokens","setOption","tooltip","formatter","params","formatUSD","format","tokenAmount","formatNumber","series","top","bottom","animation","show","rich","c","lineHeight","align","r","normal","Select","TokenDisplay","showBalance","tokenMint","tokenAccount","useAccountByMint","balance","hasBalance","justifyContent","CurrencyInput","userAccounts","useUserAccounts","renderPopularTokens","symbol","grouppedUserAccounts","b","gt","isKnownMint","concat","additionalAccounts","findIndex","t","renderAdditionalTokens","list","sorted","userUiBalance","currentAccount","bodyStyle","onInputChange","hideSelect","showSearch","minWidth","onMintChange","filterOption","input","option","toLowerCase","indexOf","PoolCurrencyInput","FeeInput","numerator","denominator","DEFAULT_DENOMINATOR","PriceParameters","setOptions","options","token_b_price","PoolConfigCard","tradeFeeNumerator","tradeFeeDenominator","ownerTradeFeeNumerator","ownerTradeFeeDenominator","ownerWithdrawFeeNumerator","ownerWithdrawFeeDenominator","feesInput","ENABLE_FEES_INPUT","defaultValue","curveType","CurveType","ConstantProduct","ConstantPrice","ConstantProductWithOffset","action","CurrencyPairContext","useCurrencyLeg","config","defaultMint","setAmount","setMintAddress","setMint","convertAmount","sufficientBalance","CurrencyPairProvider","useConnection","lastTypedAccount","setLastTypedAccount","PoolOperation","Add","poolOperation","setPoolOperation","hostFeeNumerator","hostFeeDenominator","base","mintAddressA","setMintAddressA","amountA","setAmountA","quote","mintAddressB","setMintAddressB","amountB","setAmountB","usePoolForBasket","document","search","defaultBase","defaultQuote","nameToToken","pair","URLSearchParams","items","split","isValidAddress","getDefaultTokens","calculateDependent","independent","setDependent","calculateDependentAmount","result","A","B","useCurrencyPairState","INSUFFICIENT_FUNDS_LABEL","tokenName","generateActionLabel","ignoreToBalance","antIcon","LoadingOutlined","spin","AddToLiquidity","pendingTx","setPendingTx","depositType","depositToken","isLatestLayout","programIds","swapLayout","TokenSwapLayout","executeAction","currentDepositToken","getDepositToken","console","log","components","addLiquidity","catch","notify","description","message","token_b_offset","err","hasSufficientBalance","createPoolButton","disabled","indicator","addLiquidityButton","token","generateExactOneLabel","require","dToken","PoolPrice","useMint","ratio","f","formatPriceNumber","YourPosition","baseMintAddress","quoteMintAddress","RemoveLiquidity","removeRatio","withdrawType","withdrawToken","liquidityAmount","onRemove","removeExactOneLiquidity","removeLiquidity","generateRemoveLabel","RemoveLiquidityEntry","inputType","setInputType","setWithdrawType","setWithdrawToken","lastTyped","liquidityPercentage","inputInfo","setInputInfo","poolAmount","tokenA","tokenAAmount","tokenB","tokenBAmount","inputsDescription","setInputsDescription","handleInputChange","inputSource","Text","tipFormatter","Group","handleToggleWithdrawType","getTokenOptions","API_ENDPOINTS","PoolLineChart","memo","apiUrl","api","limit","chartName","echartsRef","loading","setLoading","apiFilter","bonfidaDataChartQuery","finalData","updateChart","textStyle","axisPointer","grid","containLabel","xAxis","inverse","getComputedTime","yAxis","scale","splitLine","getComputedData","tip","Title","level","HistoricalVolume","d","formatShortDate","time","HistoricalLiquidity","groupByTime","groupedData","Object","Typography","PoolCard","displayMode","setDisplayMode","small","userInfo","AlignLeftOutlined","LineChartOutlined","formatPct","PoolItem","poolContribution","contributionInUSD","poolDetails","feesInUSD","isFeeAccount","PoolAccounts","useOwnedPools","legacy","userPools","renderEmpty","image","Empty","PRESENTED_IMAGE_SIMPLE","MigrationModal","visible","setVisable","ack","setAck","executing","setExecuting","completed","setCompleted","activePools","legacyOwned","poolsToMigrate","fromPool","toPool","handleOk","i","queryMint","queryAccount","baseAccount","quoteAccount","ownershipRatio","baseAmount","quoteAmount","toAccounts","reverse","handleCancel","onOk","onCancel","closable","footer","Search","Input","FlashText","activeClass","setActiveClass","text","ChartsView","setSearch","totals","setTotals","usePools","useLocalStorageState","infoDisplayType","setInfoDisplayType","searchRegex","RegExp","breadcrumb","row","path","columns","dataIndex","render","record","sorter","defaultSortOrder","fontFamily","SettingOutlined","onSearch","TableOutlined","OneToOneOutlined","gutter","dataSource","pagination","pageSize","PoolOverview","owned","o","TradeEntry","handleSwap","swap","SwapGivenInput","tempMint","tempAmount","op","SwapGivenProceeds","TradeInfo","amountOut","setAmountOut","priceImpact","setPriceImpact","lpFee","setLpFee","exchangeRate","setExchangeRate","priceAccount","setPriceAccount","minAmountOut","supplyRatio","enrichedA","enrichedB","calculatedRatio","abs","lpFeeStr","SwapOutlined","QuestionCircleOutlined","colorWarning","ExchangeView","tabStyle","tabList","tab","activeTab","headStyle","position","tabProps","tabBarGutter","activeTabKey","onTabChange","handleTabChange","Routes","basename","exact","component","SubMenu","Menu","AppMenu","defaultSelectedKeys","defaultOpenKeys","Main","Home","App","Boolean","hostname","match","ReactDOM","StrictMode","getElementById","serviceWorker","ready","registration","unregister","error","ExplorerLink","defaultState","storedState","localStorage","getItem","JSON","parse","state","setState","setLocalStorageState","newState","removeItem","setItem","stringify","chars","shorten","knownSymbol","substring","logoURI","join","chunks","Array","apply","ceil","_","rate","BN","precision","rem","mod","Intl","NumberFormat","currency","minimumFractionDigits","maximumFractionDigits","DateTimeFormat","day","month","valueCheckpoints","defaultIndex","colorCodes","closest","first","POSITIVE_INFINITY","second","AccountsContext","accountEmitter","pendingMintCalls","mintCache","pendingAccountCalls","accountsCache","pendingCalls","genericCache","getAccountInfo","pubKey","Error","tokenAccountFactory","getMintInfo","Buffer","from","deserializeMint","buffer","keyToAccountParser","query","parser","obj","deserialize","addAccount","deleteAccount","raiseAccountUpdated","addMint","getCachedAccount","predicate","deserializeAccount","wrapNativeAccount","WRAPPED_SOL_MINT","owner","u64","delegate","delegatedAmount","isInitialized","isFrozen","isNative","rentExemptReserve","closeAuthority","PRECACHED_OWNERS","precacheUserTokenAccounts","getTokenAccountsByOwner","AccountsProvider","tokenAccounts","setTokenAccounts","setUserAccounts","nativeAccount","setNativeAccount","onAccountChange","UseNativeAccount","selectUserAccounts","SWAP_HOST_FEE_ADDRESS","response","onAccount","tokenSubID","onProgramAccountChange","accountId","accountInfo","AccountLayout","MintLayout","removeProgramAccountChangeListener","commitment","Promise","all","chunk","getMultipleAccountsCore","rest","args","_buildArgs","_rpcRequest","unsafeRes","allPools","fromBuffer","delegateOption","isNativeOption","closeAuthorityOption","mintInfo","mintAuthorityOption","mintAuthority","freezeAuthorityOption","freezeAuthority","AccountUpdateEvent","MarketUpdateEvent","ids","emitter","Emitter","callback","on","removeListener","emit","chainID","ChainID","MainnetBeta","clusterApiUrl","Testnet","Devnet","DEFAULT","ConnectionContext","sendConnection","env","ConnectionProvider","chain","end","setTokens","setTokenMap","TokenListProvider","resolve","res","filterByChainId","excludeByTag","getList","knownMints","setProgramIds","Account","removeAccountChangeListener","onSlotChange","removeSlotChangeListener","getErrorForTransaction","txid","confirmTransaction","getParsedConfirmedTransaction","tx","errors","meta","logMessages","regex","exec","lastIndex","sendTransaction","instructions","signers","awaitConfirmation","transaction","Transaction","instruction","getRecentBlockhash","recentBlockhash","blockhash","setSigners","s","partialSign","signTransaction","rawTransaction","serialize","skipPreflight","sendRawTransaction","status","SWAP_PROGRAM_ID","SWAP_PROGRAM_LEGACY_IDS","SWAP_PROGRAM_LAYOUT","TOKEN_PROGRAM_ID","SWAP_PROGRAM_OWNER_FEE_ADDRESS","process","REACT_APP_SWAP_HOST_FEE_ADDRESS","debug","PROGRAM_IDS","layout","envName","swap_legacy","ledgerSend","transport","p1","payload","p2","payloadOffset","send","reply","harden","n","getSolanaDerivationPath","change","derivationPath","alloc","offset","writeUInt8","writeUInt32BE","messageBytes","serializeMessage","signBytes","bytes","numPaths","getPublicKey","publicKeyBytes","property","BufferLayout","uint64","FEE_LAYOUT","TokenSwapLayoutLegacyV0","TokenSwapLayoutV1","CURVE_NODE","addVariant","createInitSwapInstruction","tokenSwapAccount","authority","tokenAccountA","tokenAccountB","tokenPool","destinationAccount","tokenProgramId","swapProgramId","nonce","isLatest","isSigner","isWritable","fields","commandDataLayout","encodeLength","encode","TransactionInstruction","depositInstruction","tokenSwap","transferAuthority","sourceA","sourceB","intoA","intoB","poolToken","poolAccount","poolTokenAmount","maximumTokenA","maximumTokenB","dataLayout","Numberu64","toBuffer","depositExactOneInstruction","source","sourceTokenAmount","minimumPoolTokenAmount","withdrawInstruction","sourcePoolAccount","fromA","fromB","userAccountA","userAccountB","minimumTokenA","minimumTokenB","withdrawExactOneInstruction","userAccount","maximumTokenAmount","swapInstruction","userSource","poolSource","poolDestination","userDestination","amountIn","minimumAmountOut","programOwner","minAmount0","minAmount1","cleanupInstructions","getMinimumBalanceForRentExemption","accountRentExempt","findOrCreateAccountByMint","isLatestSwap","approveAmount","program","Token","createCloseAccountInstruction","liquidityMaxAmount","SLIPPAGE","tokenMatchAccount","toAccount","holdingA","holdingB","fromAccount","getWrappedAccount","hostFeeAccount","_addLiquidityExactOneExistingPool","_addLiquidityNewPool","_addLiquidityExistingPool","getHoldings","toPoolInfo","setPools","queryPools","swapId","isLegacy","poolsArray","getProgramAccounts","TokenSwapLayoutV0","holdings","h","leg","subID","updated","filtered","setPool","sortedMints","matchingPool","every","poolQuantities","entries","amount0","bestPool","ownedPools","reserve0","reserve1","amount1","fromKeyA","fromKeyB","reserve","liquidityToken","fromKey","payer","excluded","accountToFind","isWrappedSol","newToAccount","createSplAccount","estimateProceedsFromInput","inputQuantityInPool","proceedsQuantityInPool","inputAmount","estimateInputFromProceeds","proceedsAmount","offsetAmount","offsetCurve","curve","isFirstIndependent","depPrecision","indPrecision","indAdjustedAmount","indBasketQuantity","depBasketQuantity","constantPrice","depAdjustedAmount","some","liquidityTokenMint","SystemProgram","fromPubkey","newAccountPubkey","space","createAccount","findProgramAddress","createInitMintInstruction","mintPublicKey","depositorAccount","createTransferInstruction","tokenProgram","createApproveInstruction","createRevokeInstruction","toCheck","createInitAccountInstruction","notification","opacity","DEFAULT_PUBLIC_KEY","LedgerWalletAdapter","_connecting","_publicKey","_transport","transactions","signed","signature","addSignature","TransportWebUSB","create","close","SolongWalletAdapter","_onProcess","_connected","bind","solong","signAllTransactions","selectAccount","finally","PhantomWalletAdapter","_provider","solana","isPhantom","provider","open","isConnected","autoApprove","MathWalletAdapter","isMathWallet","ASSET_URL","WALLET_PROVIDERS","url","adapter","WalletContext","WalletProvider","autoConnect","setAutoConnect","providerUrl","setProviderUrl","Wallet","setConnected","walletPublicKey","keyToDisplay","isModalVisible","setIsModalVisible","providerName","okText","okButtonProps","marginBottom","setProvider"],"mappings":"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","file":"static/js/main.fbf17ff0.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADLUlEQVRoQ+2YPWgUQRTHf++SgKL5UPwIQQtBQdHElBaS2xMTooWlhYnY2aQTG5uIsbARO5tUgiaFpSAYFS4HKpbRKAoKFpGQ4HdUCF4uI7NewuZud2/3Mru3CU63u2/3vf+bmZ0ff2GND1nj9bP+Bai71NHGTvKksJgWYTFJs+Y5AypLK8Il4AywrVj0d2CUBYbkOLNJEOIqQOVoR/EAaPMocgahR9JM1lpEmQD1nCbmeQ3sqlDcFHnapZsftRRRLmCcQeBKSVFfgXqgqeT+Deq4GYuABj7LEeZKc7kJeAm0OwKHUQzY12IXez6WgsuTLAADYjHsfOQmIF/s9r+4PC1Ly6S4vGq5ZObEormSgF/ApuUgxT7J8F5fqyz7Ed7UaAZ02rdicaCSgBzQ5QiaYJGL9nWK60Cn45n+rer9Ef0QPug6JMOEv4Ac51DcClSR4qxkuBMoNqKg8j2gSJHjPtBbIedj0vSIoCKqLdBn3Q+yJzSyYHf2lMdX7lFPvxzlZ6AsEQb5wpzK0YOiDzis9zDwCsWIZOxTOhFj/dNo3G1Weg+O00YDi0wzK6cp+NWQmBlQT9nBHwYRm363FIv+AoyguCYZZtyEJEJAkX4fAq0e3Z4mxQnpQmPOilFzAeoRzTTYWL67wnL9yAYOlgKd+2/0GVsp0BLL+i/YoHihJJcX/V4WiyH/k3jcpk1NnRqfazH86HdSLDoqCdB8s4L4YlXhT7/zYrGxkoB3wN5Yi3Ym86ff32Kx2V9Alk6bOhV7YhKxHWh05PKj36xYHPMVEFPRy2lUln6E24HyCn2SZjRZAhRCjjGg21eEMEYXJ0t9qZqfA7potQr6TYSApc6rLL2ITb+HbAsBXiCMSBp9SruORAkItA/iQollqtQJI/RUjc+AB1V+QzFKgaumPVWjAgJQpXFP1ZiAEFQ5haJDMmhkWfUwR6PhqDK8pxrCGzVFo6Y91cDeqBkajcZTDeSNmqHRaDzVAN5o9TQahiq1IfYp1A4O6o2G+qgjOBRVGvRUzf1Gg1IlGPVUjQlYLVVWO/NGBXhQpb4dmacaiYBqu1nNe/8FVNM1k++s+Rn4CxMtGUCpCI4FAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAYAAADhu0ooAAADYUlEQVRoQ+2aT2gTURDGv7cxtR5UiiIKxSSz0YN460HxYg9KsZWCWr2IIgiKeBA8CIUKRQ968aigIIK0glg9CLVIPfSkIvQgQiH/ZiNaEfxTtR5Ey44srJCGJrtvmyYbu++YN2/2+803+zb7EoVlMtQy4UQE+r85HTkaOdqkFYhat0mNqyg7cnSh0hDRFgBXAOwFsKbBrv8AMA6gn5lzXlp8O0pEW0XkuVJqnVfSes6LyBel1C5mzla7rg7oQwAH6wmhca1HzHyoVqDfQ9CulVh+MvPqWoFKaSJm9t0NGs74DiUiLT2+xeom9q04YKCungi0vNC6FQxolO9lunoiRyNH3Qos5a5LRHsAnAHwLh6PX8xkMrOLLXzdWrezs3PFxMTEnNdNSETnAFwDEHNjbzDz2aYATSaTuw3DGBKRfsuyhirAxojIAXRAS8coM+8PPSgRHQVwG8BKV+z11tbW81NTU7//iW9vb1/V0tIyDOBAGdCcUqq3UCiMhRrUNM0BEbkEzD9tVEq9jMVifdlsdto0zQ0i8hjAjjKYWdu2DxeLxacLdUAoHi8dHR3xmZmZWwBOVLknPymlLojIAACzLG5aRHosy3pdaX3DQYloLYARAM7OGWS8MQyjO5/Pv6+2uKGgRLQZwCiA7WUivwI47j4yeqoAjBuG0ZfP552X6qqjYaDpdHqbbdvPAGwqU1gAsM89BVDufTsIwCiLu9PW1nZ6cnLyjxekM98wUNM074vIkVKRIvIiHo/3ZrPZz6WfJ5PJLqXUsHta4bxuDTKzs2n5HmECHbFt+1ixWPy1kPpUKpVQSt1TSt0sFAp3fRO6gY0ETYuI8yxMAHC+zVwGMO/lWBcmtJtRLUG8cjXMUS9htZ6PQCtUtG5vL5GjASsQtW4NWnfZHGA/ANAXsNOWelntfpJIJBKpWCz2CsD6pVatmf+biOy0LCtTbZ3vXddJkk6nTdu2rwLoAlD1tw5NsUHCZ5VSY4Zh9OdyOfZKoAXqlSzM8xFomN0Joi1y1KtqRNTtHmNu9Iqt8fw7ETlpWZbz/wXfI7CjRPRhgWMT3xdeZOBbZk7q5GhW0I/MXH42VZV7MaCNat1pAKeY+UldHNW5SBhiAzsaBvE6GiJQnWo1Q2zkaDO4pKMxclSnWs0Q+xeAjq1Kq/rNAQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/logo.b8733998.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAYAAADhu0ooAAAEgElEQVRoQ+2ZX4hVVRTGf+vcZoyYwWqmHiKwoqLGKZj+iuQ990y+NBVWJgplIik+hGOkDxUS0RAEUVARKP0fMyoMSjLmIe+/zErETCKKUtCgiHoqMXVm7oqz752K4d579j73DDfz7NfzrW+tb3/77H3WPsJpMuQ00Ukq9P/mdOpo6ugpOgPp0j1FjWtYdupo6mjCM6AFzkC4E1gGXA9cAPwBHATKKKMSsL/VtG1dulpgHsIrQF8TIQpsQXlAAo6GON1LB0e5G2EdFR6WgGLURFgJ1a/p5DfWU6Esg3waRWrzXPMsxuMtoNMGD+xDeBFlAXAb0AvswicrQjgZTYed0BL3obwBnERYIj7bo4ibPdcy11DhMweR9eh+JsM8WcARm1rshBbYhLCmRjiOsFp8I9x5qCKU+By4wTn4n4BDVBgiQyfK7QhbxOfHZnx2Qku8j7JoGtHzdLFBrmPcpWAtcgvwkUvMNGwF2AtcDJyHspUcy6OWr63QbSiL6xS3H4/7Jcs+28K1yEvAKlt8xIu3kx6GpJ+TUXx2Qos8AzzUgGwC4WUyjMhN/BSVUItmM5sfhbN4/ibKagk4boG1a7w1z614fBhB+CfwGh6bJcuBRlgtmvPxEpviGmKUrRJwrwuHnaPVQ/0HYI4lefgObcdjB5MckICJqTgtmmU+YMlTHyY8JT6PuHBYCQ0JtcRSlLddyGvY4whfoXyP8gtiNqNmHwg2KUYkx2M2wCmMtVAjtshzwLBLghnCrpccz7pwWwnVAg8idANjKPcgRqxVrEsx1lhhmfi8Y423LVaLjALLXYhnFKsMuH7oW7miBVYh5vz7L4wTHGO2DHHCpRhboWcj5hOry4V8hrBlyeG7clsJNRtRgY0II64JEscLG8XnSVdee6HVHnAMGHRNkijeY65k+caV01qocXUX3UyY3S48C9sx9kiOG+MkdhJqxL5LhvNZBzwK9MRJGjtGWCG+OQGch7vQAl1k6EPpQk0XshTwnDO7Bxyml8ttOpV61O5CS9yF8p57nS1GKCsl4PW4LO5CFY8yu9F470qsQsM7iSxBVHPdjNtZqHlPS1yG8gVwTqzC3YKOMcnVcrNp72KPWEJrYgdQc0l2YezsdoHDkuMFO2hjVGyhRuzH9NDB42GnD8xqtZg68aOSY0USvC0JnSpAd3Mu4yxE6a+1cbMTKG6MXhbF3WWn509EqHG3TB8VNoG5YG5tCDvoYInMJ7yeSWS0LFQLXApsQFjZ4oV0VZCymW7Wul6jRs2Gs1BzAf0JVzLJYO3nUGDb10YU8zvC2rhfPokI1TzX4vG0uTCu3uCdFUXs9Fz4AI9h298LTtw1sJWjupM5ZEzjvTAh96qLVMgDT4hPOU7xLjFWQv/eXQtcgccalDuAi1wS/Qt7GGUbGV6N027FzBn/gkvzzCVDjgpX4dGPGuFhN3NmrZjwZ+6vwBGU7/D4kgolCfg2brGtxDk52kqidsemQtvtQNL5U0eTntF286WOttuBpPOnjiY9o+3mSx1ttwNJ508dTXpG2833F36XDkoFBd9VAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAYAAADhu0ooAAAC5klEQVRoQ+2ZTWsTURSGn4OS+r1RFFQEXQsFqRtRJvFjK1osiH8gCrqxwY24qli3VgUXChYX6kY3gghCEltF0NaNf0B0o9kK1qbJlZmYdJKZZGbIJDfT3FmfOfe85z3vOfdDGJJPhgQnBuhaY9owahhNaAZM6SaUuLZhG0YNownNQGDpqnm2ssJN4BywWzPOv8AiMCVpXkeJpSNQlWcDwjvgcBSnfbCtIlwQi+dh1woCehnhblhnfbb7yQ72yUGWw6zbGWiBl8CZMI602AiHxOJLmLWDgM4BRxuOFDdIc0uEqvpKihKnER4A28MsFsGmBGTZwisZo2z/p96yi/UsAHtc8RyTDPNh/EYF6nGs5jhAhRfAaJgFQ9gsUmFcTvCt1VYVaE18/4A62X7DZkZ4CJwPAaSTyRNSZOUIf/yMtAN1wCqEIjlgGlgXEfAKQk4s7nT6byCA1gNUBU4BTyPotkSVCTlO0VOqH9joZlcbUFUkS5VZybDkDjKCbhcQzorF96b/P7OJ3zxCcd/dbPQBrTWHERTjkuFHU7BBulXMAhc9SSqyH+WMtVEUTc1GN1B7/PxCmBDL2UWtdn9btwUmEW67dGuPi0lJezciKs9JhGeNsh9AoDa4MoqrkuGeR2urACp+CXGaWZ5cS0IYREbd2B6juORbklXKnhKv69FvNA0oo26wn/x062HarUffwTl4GvUL01e3jTHUqscEA22rW189JhxoLXx7lKS4xjL2OdI+9oXbKiZAoxF3gG3MDdD/iWlJRKfsdnVM8+xU4uHRteNIRtftHrYpXVO6bavIaNQZfwF3NKYZdd+G6hsNTedRuI7FtAhKvWcnZef6cW9cuHz8dF4vxjk6NBfYV4CZHjLWjesYnyRqj0z2vdBYNxH14N94H5mczvuRbSwxtaafDXvAhDaXgQ/B2iKLeWEDNOaEandnGNVOQcwBGEZjTqh2d4ZR7RTEHIBhNOaEandnGNVOQcwB/AP3Ge9KpCm55AAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/homeSubBg1.ababeb47.png\";","module.exports = __webpack_public_path__ + \"static/media/homeImg1.6a22582f.png\";","module.exports = __webpack_public_path__ + \"static/media/homeImg2.3c17c59e.png\";","module.exports = __webpack_public_path__ + \"static/media/homeImg3.8f6e8b76.png\";","module.exports = __webpack_public_path__ + \"static/media/homeIcon2.bd0a25d6.png\";","module.exports = __webpack_public_path__ + \"static/media/dome1.e9aa7145.png\";","module.exports = __webpack_public_path__ + \"static/media/dome2.7f38aa8b.png\";","module.exports = __webpack_public_path__ + \"static/media/homeImg4.ae6bf354.png\";","module.exports = __webpack_public_path__ + \"static/media/homeSubBg2.530df2a2.png\";","import React, { useEffect, useRef } from \"react\";\r\n\r\nimport Jazzicon from \"jazzicon\";\r\nimport bs58 from \"bs58\";\r\nimport \"./style.less\";\r\n\r\nexport const Identicon = (props: {\r\n  address?: string;\r\n  style?: React.CSSProperties;\r\n  className?: string;\r\n}) => {\r\n  const { address, style } = props;\r\n  const ref = useRef<HTMLDivElement>();\r\n\r\n  useEffect(() => {\r\n    if (address && ref.current) {\r\n      ref.current.innerHTML = \"\";\r\n      ref.current.className = props.className || \"\";\r\n      ref.current.appendChild(\r\n        Jazzicon(\r\n          style?.width || 16,\r\n          parseInt(bs58.decode(address).toString(\"hex\").slice(5, 15), 16)\r\n        )\r\n      );\r\n    }\r\n  }, [address, style, props.className]);\r\n\r\n  return (\r\n    <div className=\"identicon-wrapper\" ref={ref as any} style={props.style} />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useWallet } from \"../context/wallet\";\r\nimport { shortenAddress } from \"./../utils/utils\";\r\nimport { Identicon } from \"./identicon\";\r\nimport { useNativeAccount } from \"./../utils/accounts\";\r\nimport { LAMPORTS_PER_SOL } from \"@solana/web3.js\";\r\n\r\nexport const AccountInfo = (props: {}) => {\r\n  const { wallet } = useWallet();\r\n  const { account } = useNativeAccount();\r\n\r\n  if (!wallet || !wallet.publicKey) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"wallet-wrapper\">\r\n      <span>\r\n        {((account?.lamports || 0) / LAMPORTS_PER_SOL).toFixed(6)} SOL\r\n      </span>\r\n      <div className=\"wallet-key\">\r\n        {shortenAddress(`${wallet.publicKey}`)}\r\n        <Identicon\r\n          address={wallet.publicKey.toBase58()}\r\n          style={{ marginLeft: \"0.5rem\" }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { FunctionComponent } from \"react\";\r\nimport { Dropdown, Menu } from \"antd\";\r\nimport { useWallet } from \"../context/wallet\";\r\nimport { ExplorerLink } from \"./explorerLink\";\r\n\r\nexport const WalletConnect: FunctionComponent = ({ children }) => {\r\n  const { connected, wallet, select, connect, disconnect } = useWallet();\r\n  const publicKey = (connected && wallet?.publicKey?.toBase58()) || \"\";\r\n\r\n  const menu = (\r\n    <Menu style={{ textAlign: \"right\" }}>\r\n      {connected && (\r\n        <ExplorerLink\r\n          type=\"address\"\r\n          address={publicKey}\r\n          style={{ padding: 12 }}\r\n        />\r\n      )}\r\n      <Menu.Item key=\"3\" onClick={select}>\r\n        Change Wallet\r\n      </Menu.Item>\r\n      {connected && (\r\n        <Menu.Item\r\n          key=\"2\"\r\n          style={{ color: \"rgba(255, 0, 0, 0.7)\" }}\r\n          onClick={disconnect}\r\n        >\r\n          Disconnect\r\n        </Menu.Item>\r\n      )}\r\n    </Menu>\r\n  );\r\n\r\n  if (connected) {\r\n    return (\r\n      <Dropdown  overlay={menu} trigger={[\"hover\"]}>\r\n        <div style={{ cursor: \"pointer\" }}>{children}</div>\r\n      </Dropdown>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dropdown.Button onClick={connected ? disconnect : connect} overlay={menu}>\r\n      {connected ? \"Disconnect\" : \"Connect\"}\r\n    </Dropdown.Button>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Button, Menu } from \"antd\";\r\nimport { useWallet } from \"../context/wallet\";\r\nimport { AccountInfo } from \"./accountInfo\";\r\nimport { WalletConnect } from \"./walletConnect\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\n\r\nexport const AppBar = (props: { left?: JSX.Element; right?: JSX.Element }) => {\r\n  const { connected } = useWallet();\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n\r\n  const TopBar = (\r\n    <div className=\"App-Bar\">\r\n      <div className=\"App-Bar-left\">\r\n        <div className=\"App-logo\" />\r\n        <Menu mode=\"horizontal\" selectedKeys={[location.pathname]}>\r\n          <Menu.Item key=\"/\">\r\n            <Link\r\n              to={{\r\n                pathname: \"/\",\r\n              }}\r\n            >\r\n              Swap\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/add\">\r\n            <Link\r\n              to={{\r\n                pathname: \"/add\",\r\n              }}\r\n            >\r\n              Pool\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/info\">\r\n            <Link\r\n              to={{\r\n                pathname: \"/info\",\r\n              }}\r\n            >\r\n              Charts\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"trade\">\r\n            <a\r\n              href={\"https://dex.projectserum.com\"}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              Trade\r\n              <sup>↗</sup>\r\n            </a>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"help\">\r\n            <a\r\n              href={\"https://serum-academy.com/en/serum-swap/\"}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              Help\r\n              <sup>↗</sup>\r\n            </a>\r\n          </Menu.Item>\r\n        </Menu>\r\n        {props.left}\r\n      </div>\r\n      <div className=\"App-Bar-right\">\r\n        <WalletConnect>\r\n          <AccountInfo />\r\n        </WalletConnect>\r\n        {connected && (\r\n          <Button\r\n            type=\"text\"\r\n            size=\"large\"\r\n            onClick={() => history.push({ pathname: \"/pool\" })}\r\n          >\r\n            My Pools\r\n          </Button>\r\n        )}\r\n        {props.right}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return TopBar;\r\n};\r\n","import React from \"react\";\r\nimport { Input } from \"antd\";\r\n\r\nexport class NumericInput extends React.Component<any, any> {\r\n  onChange = (e: any) => {\r\n    const { value } = e.target;\r\n    const reg = /^-?\\d*(\\.\\d*)?$/;\r\n    if (reg.test(value) || value === \"\" || value === \"-\") {\r\n      this.props.onChange(value);\r\n    }\r\n  };\r\n\r\n  // '.' at the end or only '-' in the input box.\r\n  onBlur = () => {\r\n    const { value, onBlur, onChange } = this.props;\r\n    let valueTemp = value;\r\n    if (value.charAt(value.length - 1) === \".\" || value === \"-\") {\r\n      valueTemp = value.slice(0, -1);\r\n    }\r\n    if (value.startsWith(\".\") || value.startsWith(\"-.\")) {\r\n      valueTemp = valueTemp.replace(\".\", \"0.\");\r\n    }\r\n    onChange(valueTemp.replace(/0*(\\d+)/, \"$1\"));\r\n    if (onBlur) {\r\n      onBlur();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Input\r\n        {...this.props}\r\n        onChange={this.onChange}\r\n        onBlur={this.onBlur}\r\n        maxLength={25}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button } from \"antd\";\r\nimport { useSlippageConfig } from \"./../../utils/connection\";\r\nimport { NumericInput } from \"./../numericInput\";\r\n\r\nconst MAX_SLIPPAGE = 25.0\r\nconst DEFAULT_MIN_SLIPPAGE = 0.1\r\n\r\nexport const Slippage = () => {\r\n  const { slippage, setSlippage } = useSlippageConfig();\r\n  const slippagePct = slippage * 100;\r\n  const [value, setValue] = useState(slippagePct.toString());\r\n\r\n  useEffect(() => {\r\n    setValue(slippagePct.toString());\r\n  }, [slippage, slippagePct]);\r\n\r\n  const isSelected = (val: number) => {\r\n    return val === slippagePct ? \"primary\" : \"default\";\r\n  };\r\n\r\n  const itemStyle: React.CSSProperties = {\r\n    margin: 5,\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\" }}\r\n    >\r\n      {[0.1, 0.5, 1.0].map((item) => {\r\n        return (\r\n          <Button\r\n            key={item.toString()}\r\n            style={itemStyle}\r\n            type={isSelected(item)}\r\n            onClick={() => setSlippage(item / 100.0)}\r\n          >\r\n            {item}%\r\n          </Button>\r\n        );\r\n      })}\r\n      <div style={{ padding: \"3px 10px 3px 3px\", border: \"1px solid #434343\" }}>\r\n        <NumericInput\r\n          className=\"slippage-input\"\r\n          size=\"small\"\r\n          placeholder={value}\r\n          value={value}\r\n          style={{\r\n            width: 50,\r\n            fontSize: 14,\r\n            boxShadow: \"none\",\r\n            borderColor: \"transparent\",\r\n            outline: \"transpaernt\",\r\n          }}\r\n          onChange={(x: any) => {\r\n            const cappedSlippage = Math.min(parseFloat(x), MAX_SLIPPAGE);\r\n            const safeCappedSlippage = Number.isNaN(cappedSlippage) ? DEFAULT_MIN_SLIPPAGE.toString() : cappedSlippage.toString();\r\n            setValue(safeCappedSlippage);\r\n            const newValue = parseFloat(safeCappedSlippage) / 100.0;\r\n            if (Number.isFinite(newValue)) {\r\n              setSlippage(newValue);\r\n            }\r\n          }}\r\n        />\r\n        %\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Select } from \"antd\";\r\nimport { ENDPOINTS, useConnectionConfig } from \"../utils/connection\";\r\nimport { Slippage } from \"./slippage\";\r\n\r\nexport const Settings = () => {\r\n  const { endpoint, setEndpoint } = useConnectionConfig();\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        Transactions: Settings:\r\n        <div>\r\n          Slippage:\r\n          <Slippage />\r\n        </div>\r\n      </div>\r\n      <div style={{ display: \"grid\" }}>\r\n        Network:{\" \"}\r\n        <Select\r\n          onSelect={setEndpoint}\r\n          value={endpoint}\r\n          style={{ marginRight: 8 }}\r\n        >\r\n          {ENDPOINTS.map(({ name, endpoint }) => (\r\n            <Select.Option value={endpoint} key={endpoint}>\r\n              {name}\r\n            </Select.Option>\r\n          ))}\r\n        </Select>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import { Identicon } from \"./../identicon\";\r\nimport React, { useState } from \"react\";\r\nimport { getTokenIcon } from \"../../utils/utils\";\r\nimport { useConnectionConfig } from \"../../utils/connection\";\r\n\r\nexport const TokenIcon = (props: {\r\n  mintAddress: string;\r\n  style?: React.CSSProperties;\r\n  className?: string;\r\n}) => {\r\n  const { tokenMap } = useConnectionConfig();\r\n  const [failed, setFailed] = useState(false);\r\n  const icon = getTokenIcon(tokenMap, props.mintAddress);\r\n\r\n  if (icon && !failed) {\r\n    return (\r\n      <img\r\n        alt=\"Token icon\"\r\n        className={props.className}\r\n        key={props.mintAddress}\r\n        onError={() => setFailed(true)}\r\n        width=\"20\"\r\n        height=\"20\"\r\n        src={icon}\r\n        style={{\r\n          marginRight: \"0.5rem\",\r\n          marginTop: \"0.11rem\",\r\n          borderRadius: \"1rem\",\r\n          backgroundColor: \"white\",\r\n          backgroundClip: \"padding-box\",\r\n          ...props.style,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Identicon\r\n      address={props.mintAddress}\r\n      style={{\r\n        marginRight: \"0.5rem\",\r\n        display: \"flex\",\r\n        alignSelf: \"center\",\r\n        width: 20,\r\n        height: 20,\r\n        marginTop: 2,\r\n        ...props.style,\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport const PoolIcon = (props: {\r\n  mintA: string;\r\n  mintB: string;\r\n  style?: React.CSSProperties;\r\n  className?: string;\r\n}) => {\r\n  return (\r\n    <div className={props.className} style={{ display: \"flex\" }}>\r\n      <TokenIcon\r\n        mintAddress={props.mintA}\r\n        style={{ marginRight: \"-0.5rem\", ...props.style }}\r\n      />\r\n      <TokenIcon mintAddress={props.mintB} />\r\n    </div>\r\n  );\r\n};\r\n","import { PublicKey } from \"@solana/web3.js\";\r\n\r\ninterface PoolAirdrop {\r\n  pool: PublicKey;\r\n  airdrops: {\r\n    mint: PublicKey;\r\n    amount: number;\r\n  }[];\r\n}\r\n\r\nexport const POOLS_WITH_AIRDROP: PoolAirdrop[] = [];\r\n","// use to override serum market to use specifc mint\r\nexport const MINT_TO_MARKET: { [key: string]: string } = {};\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport { POOLS_WITH_AIRDROP } from \"./../models/airdrops\";\r\nimport { MINT_TO_MARKET } from \"./../models/marketOverrides\";\r\nimport {\r\n  convert,\r\n  getPoolName,\r\n  getTokenName,\r\n  KnownTokenMap,\r\n  STABLE_COINS,\r\n} from \"./../utils/utils\";\r\nimport { useConnectionConfig } from \"./../utils/connection\";\r\nimport {\r\n  cache,\r\n  getMultipleAccounts,\r\n  MintParser,\r\n  ParsedAccountBase,\r\n  useCachedPool,\r\n} from \"./../utils/accounts\";\r\nimport { Market, MARKETS, Orderbook, TOKEN_MINTS } from \"@project-serum/serum\";\r\nimport { AccountInfo, Connection, PublicKey } from \"@solana/web3.js\";\r\nimport { useMemo } from \"react\";\r\nimport { PoolInfo } from \"../models\";\r\nimport { EventEmitter } from \"./../utils/eventEmitter\";\r\nimport { LIQUIDITY_PROVIDER_FEE, SERUM_FEE } from \"../utils/pools\";\r\n\r\ninterface RecentPoolData {\r\n  pool_identifier: string;\r\n  volume24hA: number;\r\n}\r\n\r\nexport interface MarketsContextState {\r\n  midPriceInUSD: (mint: string) => number;\r\n  marketEmitter: EventEmitter;\r\n  accountsToObserve: Map<string, number>;\r\n  marketByMint: Map<string, SerumMarket>;\r\n\r\n  subscribeToMarket: (mint: string) => () => void;\r\n\r\n  dailyVolume: Map<string, RecentPoolData>;\r\n}\r\n\r\nconst INITAL_LIQUIDITY_DATE = new Date(\"2020-10-27\");\r\nconst REFRESH_INTERVAL = 30_000;\r\n\r\nexport const BONFIDA_POOL_INTERVAL = 30 * 60_000; // 30 min\r\n\r\nconst MarketsContext = React.createContext<MarketsContextState | null>(null);\r\n\r\nconst marketEmitter = new EventEmitter();\r\n\r\nexport function MarketProvider({ children = null as any }) {\r\n  const { endpoint } = useConnectionConfig();\r\n  const { pools } = useCachedPool();\r\n  const accountsToObserve = useMemo(() => new Map<string, number>(), []);\r\n  const [dailyVolume, setDailyVolume] = useState<Map<string, RecentPoolData>>(\r\n    new Map()\r\n  );\r\n\r\n  const connection = useMemo(() => new Connection(endpoint, \"recent\"), [\r\n    endpoint,\r\n  ]);\r\n\r\n  const marketByMint = useMemo(() => {\r\n    return [\r\n      ...new Set(pools.map((p) => p.pubkeys.holdingMints).flat()).values(),\r\n    ].reduce((acc, key) => {\r\n      const mintAddress = key.toBase58();\r\n\r\n      const SERUM_TOKEN = TOKEN_MINTS.find(\r\n        (a) => a.address.toBase58() === mintAddress\r\n      );\r\n\r\n      const marketAddress = MINT_TO_MARKET[mintAddress];\r\n      const marketName = `${SERUM_TOKEN?.name}/USDC`;\r\n      const marketInfo = MARKETS.filter(m => !m.deprecated).find(\r\n        (m) => m.name === marketName || m.address.toBase58() === marketAddress\r\n      );\r\n\r\n      if (marketInfo) {\r\n        acc.set(mintAddress, {\r\n          marketInfo,\r\n        });\r\n      }\r\n\r\n      return acc;\r\n    }, new Map<string, SerumMarket>()) as Map<string, SerumMarket>;\r\n  }, [pools]);\r\n\r\n  useEffect(() => {\r\n    let timer = 0;\r\n    let bonfidaTimer = 0;\r\n\r\n    const updateData = async () => {\r\n      await refreshAccounts(connection, [...accountsToObserve.keys()]);\r\n      marketEmitter.raiseMarketUpdated(new Set([...marketByMint.keys()]));\r\n\r\n      timer = window.setTimeout(() => updateData(), REFRESH_INTERVAL);\r\n    };\r\n\r\n    const bonfidaQuery = async () => {\r\n      try {\r\n        const resp = await window.fetch(\r\n          \"https://serum-api.bonfida.com/pools-recent\"\r\n        );\r\n        const data = await resp.json();\r\n        const map = (data?.data as RecentPoolData[]).reduce((acc, item) => {\r\n          acc.set(item.pool_identifier, item);\r\n          return acc;\r\n        }, new Map<string, RecentPoolData>());\r\n\r\n        setDailyVolume(map);\r\n      } catch {\r\n        // ignore\r\n      }\r\n\r\n      bonfidaTimer = window.setTimeout(\r\n        () => bonfidaQuery(),\r\n        BONFIDA_POOL_INTERVAL\r\n      );\r\n    };\r\n\r\n    const initalQuery = async () => {\r\n      const reverseSerumMarketCache = new Map<string, string>();\r\n      [...marketByMint.keys()].forEach((mint) => {\r\n        const m = marketByMint.get(mint);\r\n        if (m) {\r\n          reverseSerumMarketCache.set(m.marketInfo.address.toBase58(), mint);\r\n        }\r\n      });\r\n\r\n      const allMarkets = [...marketByMint.values()].map((m) => {\r\n        return m.marketInfo.address.toBase58();\r\n      });\r\n\r\n      await getMultipleAccounts(\r\n        connection,\r\n        // only query for markets that are not in cahce\r\n        allMarkets.filter((a) => cache.get(a) === undefined),\r\n        \"single\"\r\n      ).then(({ keys, array }) => {\r\n        allMarkets.forEach(() => {});\r\n\r\n        return array.map((item, index) => {\r\n          const marketAddress = keys[index];\r\n          const mintAddress = reverseSerumMarketCache.get(marketAddress);\r\n          if (mintAddress  && item) {\r\n            const market = marketByMint.get(mintAddress);\r\n\r\n            if (market) {\r\n              const programId = market.marketInfo.programId;\r\n              const id = market.marketInfo.address;\r\n              cache.add(id, item, (id, acc) => {\r\n                const decoded = Market.getLayout(programId).decode(acc.data);\r\n\r\n                const details = {\r\n                  pubkey: id,\r\n                  account: {\r\n                    ...acc,\r\n                  },\r\n                  info: decoded,\r\n                } as ParsedAccountBase;\r\n\r\n                cache.registerParser(details.info.baseMint, MintParser);\r\n                cache.registerParser(details.info.quoteMint, MintParser);\r\n                cache.registerParser(details.info.bids, OrderBookParser);\r\n                cache.registerParser(details.info.asks, OrderBookParser);\r\n\r\n                return details;\r\n              });\r\n            }\r\n          }\r\n\r\n          return item;\r\n        });\r\n      });\r\n\r\n      const toQuery = new Set<string>();\r\n      allMarkets.forEach((m) => {\r\n        const market = cache.get(m);\r\n        if (!market) {\r\n          return;\r\n        }\r\n\r\n        const decoded = market;\r\n\r\n        if (!cache.get(decoded.info.baseMint)) {\r\n          toQuery.add(decoded.info.baseMint.toBase58());\r\n        }\r\n\r\n        if (!cache.get(decoded.info.baseMint)) {\r\n          toQuery.add(decoded.info.quoteMint.toBase58());\r\n        }\r\n\r\n        toQuery.add(decoded.info.bids.toBase58());\r\n        toQuery.add(decoded.info.asks.toBase58());\r\n\r\n        // TODO: only update when someone listnes to it\r\n      });\r\n\r\n      await refreshAccounts(connection, [...toQuery.keys()]);\r\n\r\n      marketEmitter.raiseMarketUpdated(new Set([...marketByMint.keys()]));\r\n\r\n      // start update loop\r\n      updateData();\r\n      bonfidaQuery();\r\n    };\r\n\r\n    initalQuery();\r\n\r\n    return () => {\r\n      window.clearTimeout(bonfidaTimer);\r\n      window.clearTimeout(timer);\r\n    };\r\n  }, [pools, marketByMint, accountsToObserve, connection]);\r\n\r\n  const midPriceInUSD = useCallback(\r\n    (mintAddress: string) => {\r\n      return getMidPrice(\r\n        marketByMint.get(mintAddress)?.marketInfo.address.toBase58(),\r\n        mintAddress\r\n      );\r\n    },\r\n    [marketByMint]\r\n  );\r\n\r\n  const subscribeToMarket = useCallback(\r\n    (mintAddress: string) => {\r\n      const info = marketByMint.get(mintAddress);\r\n      const market = cache.get(info?.marketInfo.address.toBase58() || \"\");\r\n      if (!market) {\r\n        return () => {};\r\n      }\r\n\r\n      // TODO: get recent volume\r\n\r\n      const bid = market.info.bids.toBase58();\r\n      const ask = market.info.asks.toBase58();\r\n      accountsToObserve.set(bid, (accountsToObserve.get(bid) || 0) + 1);\r\n      accountsToObserve.set(ask, (accountsToObserve.get(ask) || 0) + 1);\r\n\r\n      // TODO: add event queue to query for last trade\r\n\r\n      return () => {\r\n        accountsToObserve.set(bid, (accountsToObserve.get(bid) || 0) - 1);\r\n        accountsToObserve.set(ask, (accountsToObserve.get(ask) || 0) - 1);\r\n\r\n        // cleanup\r\n        [...accountsToObserve.keys()].forEach((key) => {\r\n          if ((accountsToObserve.get(key) || 0) <= 0) {\r\n            accountsToObserve.delete(key);\r\n          }\r\n        });\r\n      };\r\n    },\r\n    [marketByMint, accountsToObserve]\r\n  );\r\n\r\n  return (\r\n    <MarketsContext.Provider\r\n      value={{\r\n        midPriceInUSD,\r\n        marketEmitter,\r\n        accountsToObserve,\r\n        marketByMint,\r\n        subscribeToMarket,\r\n        dailyVolume: dailyVolume,\r\n      }}\r\n    >\r\n      {children}\r\n    </MarketsContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useMarkets = () => {\r\n  const context = useContext(MarketsContext);\r\n  return context as MarketsContextState;\r\n};\r\n\r\nexport const useMidPriceInUSD = (mint: string) => {\r\n  const { midPriceInUSD, subscribeToMarket, marketEmitter } = useContext(\r\n    MarketsContext\r\n  ) as MarketsContextState;\r\n  const [price, setPrice] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    let subscription = subscribeToMarket(mint);\r\n    const update = () => {\r\n      if (midPriceInUSD) {\r\n        setPrice(midPriceInUSD(mint));\r\n      }\r\n    };\r\n\r\n    update();\r\n    const dispose = marketEmitter.onMarket(update);\r\n\r\n    return () => {\r\n      subscription();\r\n      dispose();\r\n    };\r\n  }, [midPriceInUSD, mint, marketEmitter, subscribeToMarket]);\r\n\r\n  return { price, isBase: price === 1.0 };\r\n};\r\n\r\nexport const useEnrichedPools = (pools: PoolInfo[]) => {\r\n  const context = useContext(MarketsContext);\r\n  const { tokenMap } = useConnectionConfig();\r\n  const [enriched, setEnriched] = useState<any[]>([]);\r\n  const subscribeToMarket = context?.subscribeToMarket;\r\n  const marketEmitter = context?.marketEmitter;\r\n  const marketsByMint = context?.marketByMint;\r\n  const dailyVolume = context?.dailyVolume;\r\n\r\n  useEffect(() => {\r\n    if (!marketEmitter || !subscribeToMarket || !marketsByMint) {\r\n      return;\r\n    }\r\n\r\n    const mints = [...new Set([...marketsByMint?.keys()]).keys()];\r\n\r\n    const subscriptions = mints.map((m) => subscribeToMarket(m));\r\n\r\n    const update = () => {\r\n      setEnriched(\r\n        createEnrichedPools(pools, marketsByMint, dailyVolume, tokenMap)\r\n      );\r\n    };\r\n\r\n    const dispose = marketEmitter.onMarket(update);\r\n\r\n    update();\r\n\r\n    return () => {\r\n      dispose && dispose();\r\n      subscriptions.forEach((dispose) => dispose && dispose());\r\n    };\r\n  }, [\r\n    tokenMap,\r\n    pools,\r\n    dailyVolume,\r\n    subscribeToMarket,\r\n    marketEmitter,\r\n    marketsByMint,\r\n  ]);\r\n\r\n  return enriched;\r\n};\r\n\r\n// TODO:\r\n// 1. useEnrichedPools\r\n//      combines market and pools and user info\r\n// 2. ADD useMidPrice with event to refresh price\r\n// that could subscribe to multiple markets and trigger refresh of those markets only when there is active subscription\r\n\r\nfunction createEnrichedPools(\r\n  pools: PoolInfo[],\r\n  marketByMint: Map<string, SerumMarket> | undefined,\r\n  poolData: Map<string, RecentPoolData> | undefined,\r\n  tokenMap: KnownTokenMap\r\n) {\r\n  const TODAY = new Date();\r\n\r\n  if (!marketByMint) {\r\n    return [];\r\n  }\r\n\r\n  const result = pools\r\n    .filter((p) => p.pubkeys.holdingMints && p.pubkeys.holdingMints.length > 1)\r\n    .map((p, index) => {\r\n      const mints = (p.pubkeys.holdingMints || [])\r\n        .map((a) => a.toBase58())\r\n        .sort();\r\n      const mintA = cache.getMint(mints[0]);\r\n      const mintB = cache.getMint(mints[1]);\r\n\r\n      const account0 = cache.getAccount(p.pubkeys.holdingAccounts[0]);\r\n      const account1 = cache.getAccount(p.pubkeys.holdingAccounts[1]);\r\n      \r\n      const accountA =\r\n        account0?.info.mint.toBase58() === mints[0] ? account0 : account1;\r\n      const accountB =\r\n        account1?.info.mint.toBase58() === mints[1] ? account1 : account0;\r\n\r\n      const baseMid = getMidPrice(\r\n        marketByMint.get(mints[0])?.marketInfo.address.toBase58() || \"\",\r\n        mints[0]\r\n      );\r\n      const baseReserveUSD = baseMid * convert(accountA, mintA);\r\n\r\n      const quote = getMidPrice(\r\n        marketByMint.get(mints[1])?.marketInfo.address.toBase58() || \"\",\r\n        mints[1]\r\n      );\r\n      const quoteReserveUSD = quote * convert(accountB, mintB);\r\n\r\n      const poolMint = cache.getMint(p.pubkeys.mint);\r\n      if (poolMint?.supply.eqn(0)) {\r\n        return undefined;\r\n      }\r\n\r\n      let airdropYield = calculateAirdropYield(\r\n        p,\r\n        marketByMint,\r\n        baseReserveUSD,\r\n        quoteReserveUSD\r\n      );\r\n\r\n      let volume = 0;\r\n      let volume24h =\r\n        baseMid * (poolData?.get(p.pubkeys.mint.toBase58())?.volume24hA || 0);\r\n      let fees24h = volume24h * (LIQUIDITY_PROVIDER_FEE - SERUM_FEE);\r\n      let fees = 0;\r\n      let apy = airdropYield;\r\n      let apy24h = airdropYield;\r\n      if (p.pubkeys.feeAccount) {\r\n        const feeAccount = cache.getAccount(p.pubkeys.feeAccount);\r\n\r\n        if (\r\n          poolMint &&\r\n          feeAccount &&\r\n          feeAccount.info.mint.toBase58() === p.pubkeys.mint.toBase58()\r\n        ) {\r\n          const feeBalance = feeAccount?.info.amount.toNumber();\r\n          const supply = poolMint?.supply.toNumber();\r\n\r\n          const ownedPct = feeBalance / supply;\r\n\r\n          const poolOwnerFees =\r\n            ownedPct * baseReserveUSD + ownedPct * quoteReserveUSD;\r\n          volume = poolOwnerFees / 0.0004;\r\n          fees = volume * LIQUIDITY_PROVIDER_FEE;\r\n\r\n          if (fees !== 0) {\r\n            const baseVolume = (ownedPct * baseReserveUSD) / 0.0004;\r\n            const quoteVolume = (ownedPct * quoteReserveUSD) / 0.0004;\r\n\r\n            // Aproximation not true for all pools we need to fine a better way\r\n            const daysSinceInception = Math.floor(\r\n              (TODAY.getTime() - INITAL_LIQUIDITY_DATE.getTime()) /\r\n                (24 * 3600 * 1000)\r\n            );\r\n            const apy0 =\r\n              parseFloat(\r\n                ((baseVolume / daysSinceInception) *\r\n                  LIQUIDITY_PROVIDER_FEE *\r\n                  356) as any\r\n              ) / baseReserveUSD;\r\n            const apy1 =\r\n              parseFloat(\r\n                ((quoteVolume / daysSinceInception) *\r\n                  LIQUIDITY_PROVIDER_FEE *\r\n                  356) as any\r\n              ) / quoteReserveUSD;\r\n\r\n            apy = apy + Math.max(apy0, apy1);\r\n\r\n            const apy24h0 =\r\n              parseFloat((volume24h * LIQUIDITY_PROVIDER_FEE * 356) as any) /\r\n              baseReserveUSD;\r\n            apy24h = apy24h + apy24h0;\r\n          }\r\n        }\r\n      }\r\n\r\n      const lpMint = cache.getMint(p.pubkeys.mint);\r\n\r\n      const name = getPoolName(tokenMap, p);\r\n      const link = `#/?pair=${getPoolName(tokenMap, p, false).replace(\r\n        \"/\",\r\n        \"-\"\r\n      )}`;\r\n\r\n      return {\r\n        key: p.pubkeys.account.toBase58(),\r\n        id: index,\r\n        name,\r\n        names: mints.map((m) => getTokenName(tokenMap, m)),\r\n        accounts: [accountA?.pubkey, accountB?.pubkey],\r\n        address: p.pubkeys.mint.toBase58(),\r\n        link,\r\n        mints,\r\n        liquidityA: convert(accountA, mintA),\r\n        liquidityAinUsd: baseReserveUSD,\r\n        liquidityB: convert(accountB, mintB),\r\n        liquidityBinUsd: quoteReserveUSD,\r\n        supply:\r\n          lpMint &&\r\n          (\r\n            lpMint?.supply.toNumber() / Math.pow(10, lpMint?.decimals || 0)\r\n          ).toFixed(9),\r\n        fees,\r\n        fees24h,\r\n        liquidity: baseReserveUSD + quoteReserveUSD,\r\n        volume,\r\n        volume24h,\r\n        apy: Number.isFinite(apy) ? apy : 0,\r\n        apy24h: Number.isFinite(apy24h) ? apy24h : 0,\r\n        map: poolData,\r\n        extra: poolData?.get(p.pubkeys.account.toBase58()),\r\n        raw: p,\r\n      };\r\n    })\r\n    .filter((p) => p !== undefined);\r\n  return result;\r\n}\r\n\r\nfunction calculateAirdropYield(\r\n  p: PoolInfo,\r\n  marketByMint: Map<string, SerumMarket>,\r\n  baseReserveUSD: number,\r\n  quoteReserveUSD: number\r\n) {\r\n  let airdropYield = 0;\r\n  let poolWithAirdrop = POOLS_WITH_AIRDROP.find((drop) =>\r\n    drop.pool.equals(p.pubkeys.mint)\r\n  );\r\n  if (poolWithAirdrop) {\r\n    airdropYield = poolWithAirdrop.airdrops.reduce((acc, item) => {\r\n      const market = marketByMint.get(item.mint.toBase58())?.marketInfo.address;\r\n      if (market) {\r\n        const midPrice = getMidPrice(market?.toBase58(), item.mint.toBase58());\r\n\r\n        acc =\r\n          acc +\r\n          // airdrop yield\r\n          ((item.amount * midPrice) / (baseReserveUSD + quoteReserveUSD)) *\r\n            (365 / 30);\r\n      }\r\n\r\n      return acc;\r\n    }, 0);\r\n  }\r\n  return airdropYield;\r\n}\r\n\r\nconst OrderBookParser = (id: PublicKey, acc: AccountInfo<Buffer>) => {\r\n  const decoded = Orderbook.LAYOUT.decode(acc.data);\r\n\r\n  const details = {\r\n    pubkey: id,\r\n    account: {\r\n      ...acc,\r\n    },\r\n    info: decoded,\r\n  } as ParsedAccountBase;\r\n\r\n  return details;\r\n};\r\n\r\nconst getMidPrice = (marketAddress?: string, mintAddress?: string) => {\r\n  const SERUM_TOKEN = TOKEN_MINTS.find(\r\n    (a) => a.address.toBase58() === mintAddress\r\n  );\r\n\r\n  if (STABLE_COINS.has(SERUM_TOKEN?.name || \"\")) {\r\n    return 1.0;\r\n  }\r\n\r\n  if (!marketAddress) {\r\n    return 0.0;\r\n  }\r\n\r\n  const marketInfo = cache.get(marketAddress);\r\n  if (!marketInfo) {\r\n    return 0.0;\r\n  }\r\n\r\n  const decodedMarket = marketInfo.info;\r\n\r\n  const baseMintDecimals =\r\n    cache.get(decodedMarket.baseMint)?.info.decimals || 0;\r\n  const quoteMintDecimals =\r\n    cache.get(decodedMarket.quoteMint)?.info.decimals || 0;\r\n\r\n  const market = new Market(\r\n    decodedMarket,\r\n    baseMintDecimals,\r\n    quoteMintDecimals,\r\n    undefined,\r\n    decodedMarket.programId\r\n  );\r\n\r\n  const bids = cache.get(decodedMarket.bids)?.info;\r\n  const asks = cache.get(decodedMarket.asks)?.info;\r\n\r\n  if (bids && asks) {\r\n    const bidsBook = new Orderbook(market, bids.accountFlags, bids.slab);\r\n    const asksBook = new Orderbook(market, asks.accountFlags, asks.slab);\r\n\r\n    const bestBid = bidsBook.getL2(1);\r\n    const bestAsk = asksBook.getL2(1);\r\n\r\n    if (bestBid.length > 0 && bestAsk.length > 0) {\r\n      return (bestBid[0][0] + bestAsk[0][0]) / 2.0;\r\n    }\r\n  }\r\n\r\n  return 0;\r\n};\r\n\r\nconst refreshAccounts = async (connection: Connection, keys: string[]) => {\r\n  if (keys.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  return getMultipleAccounts(connection, keys, \"single\").then(\r\n    ({ keys, array }) => {\r\n      return array.map((item, index) => {\r\n        if (!item) {\r\n          return undefined;\r\n        }\r\n\r\n        const address = keys[index];\r\n        return cache.add(new PublicKey(address), item);\r\n      }).filter(a => !!a);\r\n    }\r\n  );\r\n};\r\n\r\ninterface SerumMarket {\r\n  marketInfo: {\r\n    address: PublicKey;\r\n    name: string;\r\n    programId: PublicKey;\r\n    deprecated: boolean;\r\n  };\r\n\r\n  // 1st query\r\n  marketAccount?: AccountInfo<Buffer>;\r\n\r\n  // 2nd query\r\n  mintBase?: AccountInfo<Buffer>;\r\n  mintQuote?: AccountInfo<Buffer>;\r\n  bidAccount?: AccountInfo<Buffer>;\r\n  askAccount?: AccountInfo<Buffer>;\r\n  eventQueue?: AccountInfo<Buffer>;\r\n\r\n  swap?: {\r\n    dailyVolume: number;\r\n  };\r\n\r\n  midPrice?: (mint?: PublicKey) => number;\r\n}\r\n","import React from \"react\";\r\nimport { Button, Col, Popover, Row } from \"antd\";\r\nimport { PoolInfo } from \"../../models\";\r\nimport { CopyOutlined, InfoCircleOutlined } from \"@ant-design/icons\";\r\nimport { ExplorerLink } from \"./../explorerLink\";\r\nimport { useConnectionConfig } from \"../../utils/connection\";\r\nimport { getTokenName } from \"../../utils/utils\";\r\n\r\nconst Address = (props: {\r\n  address: string;\r\n  style?: React.CSSProperties;\r\n  label?: string;\r\n}) => {\r\n  return (\r\n    <Row style={{ width: \"100%\", ...props.style }}>\r\n      {props.label && <Col span={4}>{props.label}:</Col>}\r\n      <Col span={17}>\r\n        <ExplorerLink address={props.address} code={true} type=\"address\" />\r\n      </Col>\r\n      <Col span={3} style={{ display: \"flex\" }}>\r\n        <Button\r\n          shape=\"round\"\r\n          icon={<CopyOutlined />}\r\n          size={\"small\"}\r\n          style={{ marginLeft: \"auto\", marginRight: 0 }}\r\n          onClick={() => navigator.clipboard.writeText(props.address)}\r\n        />\r\n      </Col>\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport const PoolAddress = (props: {\r\n  pool?: PoolInfo;\r\n  style?: React.CSSProperties;\r\n  showLabel?: boolean;\r\n  label?: string;\r\n}) => {\r\n  const { pool } = props;\r\n  const label = props.label || \"Address\";\r\n\r\n  if (!pool?.pubkeys.account) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Address\r\n      address={pool.pubkeys.account.toBase58()}\r\n      style={props.style}\r\n      label={label}\r\n    />\r\n  );\r\n};\r\n\r\nexport const AccountsAddress = (props: {\r\n  pool?: PoolInfo;\r\n  style?: React.CSSProperties;\r\n}) => {\r\n  const { tokenMap } = useConnectionConfig();\r\n  const { pool } = props;\r\n\r\n  if (!pool) {\r\n    return null;\r\n  }\r\n\r\n  const account1 = pool?.pubkeys.holdingAccounts[0];\r\n  const account2 = pool?.pubkeys.holdingAccounts[1];\r\n  const mint1 = pool?.pubkeys.holdingMints[0];\r\n  const mint2 = pool?.pubkeys.holdingMints[1];\r\n  let aName, bName;\r\n  if (mint1) {\r\n    aName = getTokenName(tokenMap, mint1.toBase58());\r\n  }\r\n  if (mint2) {\r\n    bName = getTokenName(tokenMap, mint2.toBase58());\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {account1 && (\r\n        <Address\r\n          address={account1.toBase58()}\r\n          style={props.style}\r\n          label={aName}\r\n        />\r\n      )}\r\n      {account2 && (\r\n        <Address\r\n          address={account2.toBase58()}\r\n          style={props.style}\r\n          label={bName}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport const AdressesPopover = (props: { pool?: PoolInfo }) => {\r\n  const { pool } = props;\r\n\r\n  if (!pool) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Popover\r\n      placement=\"topRight\"\r\n      title={\"Addresses\"}\r\n      trigger=\"hover\"\r\n      content={\r\n        <>\r\n          <PoolAddress pool={pool} showLabel={true} label={\"Pool\"} />\r\n          <AccountsAddress pool={pool} />\r\n        </>\r\n      }\r\n    >\r\n      <Button\r\n        style={{color:'#FFC000'}}\r\n        shape=\"circle\"\r\n        size=\"large\"\r\n        type=\"text\"\r\n        icon={<InfoCircleOutlined />}\r\n      />\r\n    </Popover>\r\n  );\r\n};\r\n","import React, { useEffect, useMemo, useRef } from \"react\";\r\nimport { PoolInfo } from \"../../models\";\r\nimport { useEnrichedPools } from \"./../../context/market\";\r\nimport echarts from \"echarts\";\r\nimport { formatNumber, formatUSD } from \"../../utils/utils\";\r\n\r\nexport const SupplyOverview = (props: { pool?: PoolInfo }) => {\r\n  const { pool } = props;\r\n  const pools = useMemo(() => (pool ? [pool] : []), [pool]);\r\n  const enriched = useEnrichedPools(pools);\r\n  const chartDiv = useRef<HTMLDivElement>(null);\r\n\r\n  // dispose chart\r\n  useEffect(() => {\r\n    const div = chartDiv.current;\r\n    return () => {\r\n      let instance = div && echarts.getInstanceByDom(div);\r\n      instance && instance.dispose();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!chartDiv.current || enriched.length === 0) {\r\n      return;\r\n    }\r\n\r\n    let instance = echarts.getInstanceByDom(chartDiv.current);\r\n    if (!instance) {\r\n      instance = echarts.init(chartDiv.current as any);\r\n    }\r\n\r\n    const data = [\r\n      {\r\n        name: enriched[0].names[0],\r\n        value: enriched[0].liquidityAinUsd,\r\n        tokens: enriched[0].liquidityA,\r\n      },\r\n      {\r\n        name: enriched[0].names[1],\r\n        value: enriched[0].liquidityBinUsd,\r\n        tokens: enriched[0].liquidityB,\r\n      },\r\n    ];\r\n\r\n    instance.setOption({\r\n      tooltip: {\r\n        trigger: \"item\",\r\n        formatter: function (params: any) {\r\n          var val = formatUSD.format(params.value);\r\n          var tokenAmount = formatNumber.format(params.data.tokens);\r\n          return `${params.name}: \\n${val}\\n(${tokenAmount})`;\r\n        },\r\n      },\r\n      series: [\r\n        {\r\n          name: \"Liquidity\",\r\n          type: \"pie\",\r\n          top: 0,\r\n          bottom: 0,\r\n          left: 0,\r\n          right: 0,\r\n          animation: false,\r\n          label: {\r\n            fontSize: 14,\r\n            show: true,\r\n            formatter: function (params: any) {\r\n              var val = formatUSD.format(params.value);\r\n              var tokenAmount = formatNumber.format(params.data.tokens);\r\n              return `{c|${params.name}}\\n{r|${tokenAmount}}\\n{r|${val}}`;\r\n            },\r\n            rich: {\r\n              c: {\r\n                color: \"#999\",\r\n                lineHeight: 22,\r\n                align: \"center\",\r\n              },\r\n              r: {\r\n                color: \"#999\",\r\n                align: \"right\",\r\n              },\r\n            },\r\n            color: \"rgba(255, 255, 255, 0.5)\",\r\n          },\r\n          itemStyle: {\r\n            normal: {\r\n              borderColor: \"#000\",\r\n            },\r\n          },\r\n          data,\r\n        },\r\n      ],\r\n    });\r\n  }, [enriched]);\r\n\r\n  if (enriched.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return <div ref={chartDiv} style={{ height: 150, width: \"100%\" }} />;\r\n};\r\n","import React from \"react\";\r\nimport { Card, Select } from \"antd\";\r\nimport { NumericInput } from \"../numericInput\";\r\nimport { convert, getPoolName, getTokenName, isKnownMint } from \"../../utils/utils\";\r\nimport {\r\n  useUserAccounts,\r\n  useCachedPool,\r\n  useAccountByMint,\r\n  cache,\r\n} from \"../../utils/accounts\";\r\nimport \"./styles.less\";\r\nimport { useConnectionConfig } from \"../../utils/connection\";\r\nimport { PoolIcon, TokenIcon } from \"../tokenIcon\";\r\nimport { PublicKey } from \"@solana/web3.js\";\r\nimport { PoolInfo, TokenAccount } from \"../../models\";\r\n\r\nconst { Option } = Select;\r\n\r\nexport const TokenDisplay = (props: {\r\n  name: string;\r\n  mintAddress: string;\r\n  icon?: JSX.Element;\r\n  showBalance?: boolean;\r\n}) => {\r\n  const { showBalance, mintAddress, name, icon } = props;\r\n  const tokenMint = cache.getMint(mintAddress);\r\n  const tokenAccount = useAccountByMint(mintAddress);\r\n\r\n  let balance: number = 0;\r\n  let hasBalance: boolean = false;\r\n  if (showBalance) {\r\n    if (tokenAccount && tokenMint) {\r\n      balance = convert(tokenAccount, tokenMint);\r\n      hasBalance = balance > 0;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        title={mintAddress}\r\n        key={mintAddress}\r\n        style={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"space-between\",\r\n        }}\r\n      >\r\n        <div style={{ display: \"flex\", alignItems: \"center\"}}>\r\n          <div>\r\n            {icon || <TokenIcon mintAddress={mintAddress} />}\r\n            {name}\r\n          </div>\r\n        </div>\r\n        {showBalance ? (\r\n          <span\r\n            title={balance.toString()}\r\n            key={mintAddress}\r\n            className=\"token-balance\"\r\n          >\r\n            &nbsp;{\" \"}\r\n            {hasBalance\r\n              ? balance < 0.001\r\n                ? \"<0.001\"\r\n                : balance.toFixed(3)\r\n              : \"-\"}\r\n          </span>\r\n        ) : null}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const CurrencyInput = (props: {\r\n  mint?: string;\r\n  amount?: string;\r\n  title?: string;\r\n  hideSelect?: boolean;\r\n  onInputChange?: (val: number) => void;\r\n  onMintChange?: (account: string) => void;\r\n}) => {\r\n  const { userAccounts } = useUserAccounts();\r\n  const { pools } = useCachedPool();\r\n  const mint = cache.getMint(props.mint);\r\n\r\n  const { tokens, tokenMap } = useConnectionConfig();\r\n\r\n  const renderPopularTokens = tokens.map((item) => {\r\n    return (\r\n      <Option\r\n        key={item.address}\r\n        value={item.address}\r\n        name={item.symbol}\r\n        title={item.address}\r\n      >\r\n        <TokenDisplay\r\n          key={item.address}\r\n          name={item.symbol}\r\n          mintAddress={item.address}\r\n          showBalance={true}\r\n        />\r\n      </Option>\r\n    );\r\n  });\r\n\r\n  // TODO: expand nested pool names ...?\r\n\r\n  // group accounts by mint and use one with biggest balance\r\n  const grouppedUserAccounts = userAccounts\r\n    .sort((a, b) => {\r\n      return b.info.amount.gt(a.info.amount) ? 1 : -1;\r\n    })\r\n    .reduce((map, acc) => {\r\n      const mint = acc.info.mint.toBase58();\r\n      if (isKnownMint(tokenMap, mint)) {\r\n        return map;\r\n      }\r\n\r\n      const pool = pools.find((p) => p && p.pubkeys.mint.toBase58() === mint);\r\n\r\n      map.set(mint, (map.get(mint) || []).concat([{ account: acc, pool }]));\r\n\r\n      return map;\r\n    }, new Map<string, { account: TokenAccount; pool: PoolInfo | undefined }[]>());\r\n\r\n  const additionalAccounts = [...grouppedUserAccounts.keys()];\r\n  if (\r\n    tokens.findIndex((t) => t.address === props.mint) < 0 &&\r\n    props.mint &&\r\n    !grouppedUserAccounts.has(props?.mint)\r\n  ) {\r\n    additionalAccounts.push(props.mint);\r\n  }\r\n\r\n  const renderAdditionalTokens = additionalAccounts.map((mint) => {\r\n    let pool: PoolInfo | undefined;\r\n    const list = grouppedUserAccounts.get(mint);\r\n    if (list && list.length > 0) {\r\n      // TODO: group multple accounts of same time and select one with max amount\r\n      const account = list[0];\r\n      pool = account.pool;\r\n    }\r\n\r\n    let name: string;\r\n    let icon: JSX.Element;\r\n    if (pool) {\r\n      name = getPoolName(tokenMap, pool);\r\n      const sorted = pool.pubkeys.holdingMints\r\n        .map((a: PublicKey) => a.toBase58())\r\n        .sort();\r\n      icon = <PoolIcon mintA={sorted[0]} mintB={sorted[1]} />;\r\n    } else {\r\n      name = getTokenName(tokenMap, mint, true, 3);\r\n      icon = <TokenIcon mintAddress={mint} />;\r\n    }\r\n\r\n    return (\r\n      <Option key={mint} value={mint} name={name}>\r\n        <TokenDisplay\r\n          key={mint}\r\n          mintAddress={mint}\r\n          name={name}\r\n          icon={icon}\r\n          showBalance={!pool}\r\n        />\r\n      </Option>\r\n    );\r\n  });\r\n\r\n  const userUiBalance = () => {\r\n    const currentAccount = userAccounts?.find(\r\n      (a) => a.info.mint.toBase58() === props.mint\r\n    );\r\n    if (currentAccount && mint) {\r\n      return convert(currentAccount, mint);\r\n    }\r\n\r\n    return 0;\r\n  };\r\n\r\n  return (\r\n    <Card\r\n      className=\"ccy-input\"\r\n      style={{ borderRadius: 8 }}\r\n      bodyStyle={{ padding: 0 }}\r\n    >\r\n      <div className=\"ccy-input-header\">\r\n        <div className=\"ccy-input-header-left\">{props.title}</div>\r\n\r\n        <div\r\n          className=\"ccy-input-header-right\"\r\n          onClick={(e) =>\r\n            props.onInputChange && props.onInputChange(userUiBalance())\r\n          }\r\n        >\r\n          Balance: {userUiBalance().toFixed(6)}\r\n        </div>\r\n      </div>\r\n      <div className=\"ccy-input-header\" style={{ padding: \"0px 10px 5px 7px\" }}>\r\n        <NumericInput\r\n          value={props.amount}\r\n          onChange={(val: any) => {\r\n            if (props.onInputChange) {\r\n              props.onInputChange(val);\r\n            }\r\n          }}\r\n          style={{\r\n            fontSize: 20,\r\n            boxShadow: \"none\",\r\n            borderColor: \"transparent\",\r\n            outline: \"transpaernt\",\r\n            color:\"#FFA624\"\r\n          }}\r\n          placeholder=\"0.00\"\r\n        />\r\n        <div className=\"ccy-input-header-right\" style={{ display: \"felx\" }}>\r\n          {!props.hideSelect ? (\r\n            <Select\r\n              size=\"large\"\r\n              showSearch\r\n              style={{ minWidth: 130 }}\r\n              placeholder=\"CCY\"\r\n              value={props.mint}\r\n              onChange={(item) => {\r\n                if (props.onMintChange) {\r\n                  props.onMintChange(item);\r\n                }\r\n              }}\r\n              filterOption={(input, option) =>\r\n                option?.name?.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n              }\r\n            >\r\n              {[...renderPopularTokens, ...renderAdditionalTokens]}\r\n            </Select>\r\n          ) : (\r\n            props.mint && (\r\n              <TokenDisplay\r\n                key={props.mint}\r\n                name={getTokenName(tokenMap, props.mint)}\r\n                mintAddress={props.mint}\r\n                showBalance={true}\r\n              />\r\n            )\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport const PoolCurrencyInput = (props: {\r\n  mint: string;\r\n  amount?: string;\r\n  title?: string;\r\n  pool?: PoolInfo;\r\n  onInputChange?: (val: number) => void;\r\n  onMintChange?: (account: string) => void;\r\n  balance?: number;\r\n}) => {\r\n  const { balance, pool, mint } = props;\r\n  const { tokenMap } = useConnectionConfig();\r\n\r\n  let name: string;\r\n  let icon: JSX.Element;\r\n  if (pool) {\r\n    name = getPoolName(tokenMap, pool);\r\n    const sorted = pool.pubkeys.holdingMints\r\n      .map((a: PublicKey) => a.toBase58())\r\n      .sort();\r\n    icon = <PoolIcon mintA={sorted[0]} mintB={sorted[1]} />;\r\n  } else {\r\n    name = getTokenName(tokenMap, mint, true, 3);\r\n    icon = <TokenIcon mintAddress={mint} />;\r\n  }\r\n  return (\r\n    <Card\r\n      className=\"ccy-input\"\r\n      style={{ borderRadius: 8 }}\r\n      bodyStyle={{ padding: 0 }}\r\n    >\r\n      <div className=\"ccy-input-header\">\r\n        <div className=\"ccy-input-header-left\">{props.title}</div>\r\n        {balance && (\r\n          <div\r\n            className=\"ccy-input-header-right\"\r\n            onClick={(e) => props.onInputChange && props.onInputChange(balance)}\r\n          >\r\n            Balance: {balance.toFixed(6)}\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"ccy-input-header\" style={{ padding: \"0px 10px 5px 7px\" }}>\r\n        <NumericInput\r\n          value={props.amount}\r\n          onChange={(val: any) => {\r\n            if (props.onInputChange) {\r\n              props.onInputChange(val);\r\n            }\r\n          }}\r\n          style={{\r\n            fontSize: 20,\r\n            boxShadow: \"none\",\r\n            borderColor: \"transparent\",\r\n            outline: \"transpaernt\",\r\n          }}\r\n          placeholder=\"0.00\"\r\n        />\r\n\r\n        <div className=\"ccy-input-header-right\" style={{ display: \"felx\" }}>\r\n          <TokenDisplay key={mint} mintAddress={mint} name={name} icon={icon} />\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Card, Select } from \"antd\";\r\nimport { NumericInput } from \"../numericInput\";\r\nimport \"./add.less\";\r\nimport { CurveType, DEFAULT_DENOMINATOR, PoolConfig } from \"../../models\";\r\nimport { ENABLE_FEES_INPUT } from \"./../../utils/ids\";\r\n\r\nconst Option = Select.Option;\r\n\r\nconst FeeInput = (props: {\r\n  numerator: number;\r\n  denominator: number;\r\n  set: (numerator: number, denominator: number) => void;\r\n}) => {\r\n  const [value, setValue] = useState(\r\n    ((props.numerator / props.denominator) * 100).toString()\r\n  );\r\n\r\n  return (\r\n    <div style={{ padding: \"3px 10px 3px 3px\", border: \"1px solid #434343\" }}>\r\n      <NumericInput\r\n        className=\"slippage-input\"\r\n        size=\"small\"\r\n        value={value}\r\n        style={{\r\n          width: 50,\r\n          fontSize: 14,\r\n          boxShadow: \"none\",\r\n          borderColor: \"transparent\",\r\n          outline: \"transpaernt\",\r\n        }}\r\n        onChange={(x: any) => {\r\n          setValue(x);\r\n\r\n          const val = parseFloat(x);\r\n          if (Number.isFinite(val)) {\r\n            const numerator = (val * DEFAULT_DENOMINATOR) / 100;\r\n            props.set(numerator, DEFAULT_DENOMINATOR);\r\n          }\r\n        }}\r\n      />\r\n      %\r\n    </div>\r\n  );\r\n};\r\n\r\nconst PriceParameters = (props: {\r\n  options: PoolConfig;\r\n  setOptions: (config: PoolConfig) => void;\r\n}) => {\r\n  const [value, setValue] = useState(\"0\");\r\n  return (\r\n    <>\r\n      <>\r\n        <span>Token B constant price:</span>\r\n        <div\r\n          style={{ padding: \"3px 10px 3px 3px\", border: \"1px solid #434343\" }}\r\n        >\r\n          <NumericInput\r\n            className=\"slippage-input\"\r\n            size=\"small\"\r\n            value={value}\r\n            style={{\r\n              width: 50,\r\n              fontSize: 14,\r\n              boxShadow: \"none\",\r\n              borderColor: \"transparent\",\r\n              outline: \"transpaernt\",\r\n            }}\r\n            onChange={(x: any) => {\r\n              setValue(x);\r\n\r\n              props.setOptions({\r\n                ...props.options,\r\n                token_b_price: parseInt(x),\r\n              });\r\n            }}\r\n          />\r\n        </div>\r\n      </>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const PoolConfigCard = (props: {\r\n  options: PoolConfig;\r\n  setOptions: (config: PoolConfig) => void;\r\n  action?: JSX.Element;\r\n}) => {\r\n  const {\r\n    tradeFeeNumerator,\r\n    tradeFeeDenominator,\r\n    ownerTradeFeeNumerator,\r\n    ownerTradeFeeDenominator,\r\n    ownerWithdrawFeeNumerator,\r\n    ownerWithdrawFeeDenominator,\r\n  } = props.options.fees;\r\n\r\n  const feesInput = (\r\n    <>\r\n      <>\r\n        <span>LPs Trading Fee:</span>\r\n        <FeeInput\r\n          numerator={tradeFeeNumerator}\r\n          denominator={tradeFeeDenominator}\r\n          set={(numerator, denominator) =>\r\n            props.setOptions({\r\n              ...props.options,\r\n              fees: {\r\n                ...props.options.fees,\r\n                tradeFeeNumerator: numerator,\r\n                tradeFeeDenominator: denominator,\r\n              },\r\n            })\r\n          }\r\n        />\r\n      </>\r\n      <>\r\n        <span>Owner Trading Fee:</span>\r\n        <FeeInput\r\n          numerator={ownerTradeFeeNumerator}\r\n          denominator={ownerTradeFeeDenominator}\r\n          set={(numerator, denominator) =>\r\n            props.setOptions({\r\n              ...props.options,\r\n              fees: {\r\n                ...props.options.fees,\r\n                ownerTradeFeeNumerator: numerator,\r\n                ownerTradeFeeDenominator: denominator,\r\n              },\r\n            })\r\n          }\r\n        />\r\n      </>\r\n      <>\r\n        <span>Withdraw Fee:</span>\r\n        <FeeInput\r\n          numerator={ownerWithdrawFeeNumerator}\r\n          denominator={ownerWithdrawFeeDenominator}\r\n          set={(numerator, denominator) =>\r\n            props.setOptions({\r\n              ...props.options,\r\n              fees: {\r\n                ...props.options.fees,\r\n                ownerWithdrawFeeNumerator: numerator,\r\n                ownerWithdrawFeeDenominator: denominator,\r\n              },\r\n            })\r\n          }\r\n        />\r\n      </>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <Card title=\"Pool configuration\">\r\n      <div className=\"pool-settings-grid\">\r\n        {ENABLE_FEES_INPUT && feesInput}\r\n        <>\r\n          <span>Curve Type:</span>\r\n          <Select\r\n            defaultValue=\"0\"\r\n            style={{ width: 200 }}\r\n            onChange={(val) =>\r\n              props.setOptions({\r\n                ...props.options,\r\n                curveType: parseInt(val),\r\n              })\r\n            }\r\n          >\r\n            <Option value={CurveType.ConstantProduct.toString()}>\r\n              Constant Product\r\n            </Option>\r\n            <Option value={CurveType.ConstantPrice.toString()}>\r\n              Constant Price\r\n            </Option>\r\n            <Option value={CurveType.ConstantProductWithOffset.toString()}>\r\n              Offset Constant Product\r\n            </Option>\r\n          </Select>\r\n        </>\r\n        {props.options.curveType === CurveType.ConstantPrice && (\r\n          <PriceParameters {...props} />\r\n        )}\r\n      </div>\r\n      {props.action}\r\n    </Card>\r\n  );\r\n};\r\n","import React, {\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n} from \"react\";\r\nimport {\r\n  calculateDependentAmount,\r\n  usePoolForBasket,\r\n  PoolOperation,\r\n} from \"./pools\";\r\nimport { cache, useAccountByMint } from \"./accounts\";\r\nimport { MintInfo } from \"@solana/spl-token\";\r\nimport { useConnection, useConnectionConfig } from \"./connection\";\r\nimport {\r\n  CurveType,\r\n  PoolConfig,\r\n  TokenAccount,\r\n  DEFAULT_DENOMINATOR,\r\n} from \"../models\";\r\nimport { convert, getTokenIcon, getTokenName } from \"./utils\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport bs58 from \"bs58\";\r\nimport { TokenInfo } from \"@solana/spl-token-registry\";\r\n\r\nexport interface CurrencyContextState {\r\n  mintAddress: string;\r\n  account?: TokenAccount;\r\n  mint?: MintInfo;\r\n  amount: string;\r\n  name: string;\r\n  icon?: string;\r\n  setAmount: (val: string) => void;\r\n  setMint: (mintAddress: string) => void;\r\n  convertAmount: () => number;\r\n  sufficientBalance: () => boolean;\r\n}\r\n\r\nexport interface CurrencyPairContextState {\r\n  A: CurrencyContextState;\r\n  B: CurrencyContextState;\r\n  lastTypedAccount: string;\r\n  setLastTypedAccount: (mintAddress: string) => void;\r\n  setPoolOperation: (swapDirection: PoolOperation) => void;\r\n  options: PoolConfig;\r\n  setOptions: (config: PoolConfig) => void;\r\n}\r\n\r\nconst CurrencyPairContext = React.createContext<CurrencyPairContextState | null>(\r\n  null\r\n);\r\n\r\nconst convertAmount = (amount: string, mint?: MintInfo) => {\r\n  return parseFloat(amount) * Math.pow(10, mint?.decimals || 0);\r\n};\r\n\r\nexport const useCurrencyLeg = (config: PoolConfig, defaultMint?: string) => {\r\n  const { tokenMap } = useConnectionConfig();\r\n  const [amount, setAmount] = useState(\"\");\r\n  const [mintAddress, setMintAddress] = useState(defaultMint || \"\");\r\n  const account = useAccountByMint(mintAddress);\r\n  const mint = cache.getMint(mintAddress);\r\n\r\n  return useMemo(\r\n    () => ({\r\n      mintAddress: mintAddress,\r\n      account: account,\r\n      mint: mint,\r\n      amount: amount,\r\n      name: getTokenName(tokenMap, mintAddress),\r\n      icon: getTokenIcon(tokenMap, mintAddress),\r\n      setAmount: setAmount,\r\n      setMint: setMintAddress,\r\n      convertAmount: () => convertAmount(amount, mint),\r\n      sufficientBalance: () =>\r\n        account !== undefined &&\r\n        (convert(account, mint) >= parseFloat(amount) ||\r\n          config.curveType === CurveType.ConstantProductWithOffset),\r\n    }),\r\n    [\r\n      mintAddress,\r\n      account,\r\n      mint,\r\n      amount,\r\n      tokenMap,\r\n      setAmount,\r\n      setMintAddress,\r\n      config,\r\n    ]\r\n  );\r\n};\r\n\r\nexport function CurrencyPairProvider({ children = null as any }) {\r\n  const connection = useConnection();\r\n  const { tokens } = useConnectionConfig();\r\n\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [lastTypedAccount, setLastTypedAccount] = useState(\"\");\r\n  const [poolOperation, setPoolOperation] = useState<PoolOperation>(\r\n    PoolOperation.Add\r\n  );\r\n\r\n  const [options, setOptions] = useState<PoolConfig>({\r\n    curveType: CurveType.ConstantProduct,\r\n    fees: {\r\n      tradeFeeNumerator: 25,\r\n      tradeFeeDenominator: DEFAULT_DENOMINATOR,\r\n      ownerTradeFeeNumerator: 5,\r\n      ownerTradeFeeDenominator: DEFAULT_DENOMINATOR,\r\n      ownerWithdrawFeeNumerator: 0,\r\n      ownerWithdrawFeeDenominator: 0,\r\n      hostFeeNumerator: 20,\r\n      hostFeeDenominator: 100,\r\n    },\r\n  });\r\n\r\n  const base = useCurrencyLeg(options);\r\n  const mintAddressA = base.mintAddress;\r\n  const setMintAddressA = base.setMint;\r\n  const amountA = base.amount;\r\n  const setAmountA = base.setAmount;\r\n\r\n  const quote = useCurrencyLeg(options);\r\n  const mintAddressB = quote.mintAddress;\r\n  const setMintAddressB = quote.setMint;\r\n  const amountB = quote.amount;\r\n  const setAmountB = quote.setAmount;\r\n\r\n  const pool = usePoolForBasket([base.mintAddress, quote.mintAddress]);\r\n\r\n  useEffect(() => {\r\n    const base =\r\n      tokens.find((t) => t.address === mintAddressA)?.symbol || mintAddressA;\r\n    const quote =\r\n      tokens.find((t) => t.address === mintAddressB)?.symbol || mintAddressB;\r\n\r\n    document.title = `Swap | Serum (${base}/${quote})`;\r\n  }, [mintAddressA, mintAddressB, tokens, location]);\r\n\r\n  // updates browser history on token changes\r\n  useEffect(() => {\r\n    // set history\r\n    const base =\r\n      tokens.find((t) => t.address === mintAddressA)?.symbol || mintAddressA;\r\n    const quote =\r\n      tokens.find((t) => t.address === mintAddressB)?.symbol || mintAddressB;\r\n\r\n    if (base && quote && location.pathname.indexOf(\"info\") < 0) {\r\n      history.push({\r\n        search: `?pair=${base}-${quote}`,\r\n      });\r\n    } else {\r\n      if (mintAddressA && mintAddressB) {\r\n        history.push({\r\n          search: ``,\r\n        });\r\n      } else {\r\n        return;\r\n      }\r\n    }\r\n  }, [mintAddressA, mintAddressB, tokens, history, location.pathname]);\r\n\r\n  // Updates tokens on location change\r\n  useEffect(() => {\r\n    if (!location.search && mintAddressA && mintAddressB) {\r\n      return;\r\n    }\r\n\r\n    let { defaultBase, defaultQuote } = getDefaultTokens(\r\n      tokens,\r\n      location.search\r\n    );\r\n    if (!defaultBase || !defaultQuote) {\r\n      return;\r\n    }\r\n\r\n    setMintAddressA(\r\n      tokens.find((t) => t.symbol === defaultBase)?.address ||\r\n        (isValidAddress(defaultBase) ? defaultBase : \"\") ||\r\n        \"\"\r\n    );\r\n    setMintAddressB(\r\n      tokens.find((t) => t.symbol === defaultQuote)?.address ||\r\n        (isValidAddress(defaultQuote) ? defaultQuote : \"\") ||\r\n        \"\"\r\n    );\r\n    // mintAddressA and mintAddressB are not included here to prevent infinite loop\r\n    // eslint-disable-next-line\r\n  }, [location, location.search, setMintAddressA, setMintAddressB, tokens]);\r\n\r\n  const calculateDependent = useCallback(async () => {\r\n    if (pool && mintAddressA && mintAddressB) {\r\n      let setDependent;\r\n      let amount;\r\n      let independent;\r\n      if (lastTypedAccount === mintAddressA) {\r\n        independent = mintAddressA;\r\n        setDependent = setAmountB;\r\n        amount = parseFloat(amountA);\r\n      } else {\r\n        independent = mintAddressB;\r\n        setDependent = setAmountA;\r\n        amount = parseFloat(amountB);\r\n      }\r\n\r\n      const result = await calculateDependentAmount(\r\n        connection,\r\n        independent,\r\n        amount,\r\n        pool,\r\n        poolOperation\r\n      );\r\n      if (typeof result === \"string\") {\r\n        setDependent(result);\r\n      } else if (result !== undefined && Number.isFinite(result)) {\r\n        setDependent(result.toFixed(6));\r\n      } else {\r\n        setDependent(\"\");\r\n      }\r\n    }\r\n  }, [\r\n    pool,\r\n    mintAddressA,\r\n    mintAddressB,\r\n    setAmountA,\r\n    setAmountB,\r\n    amountA,\r\n    amountB,\r\n    connection,\r\n    lastTypedAccount,\r\n    poolOperation,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    calculateDependent();\r\n  }, [amountB, amountA, lastTypedAccount, calculateDependent]);\r\n\r\n  return (\r\n    <CurrencyPairContext.Provider\r\n      value={{\r\n        A: base,\r\n        B: quote,\r\n        lastTypedAccount,\r\n        setLastTypedAccount,\r\n        setPoolOperation,\r\n        options,\r\n        setOptions,\r\n      }}\r\n    >\r\n      {children}\r\n    </CurrencyPairContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useCurrencyPairState = () => {\r\n  const context = useContext(CurrencyPairContext);\r\n  return context as CurrencyPairContextState;\r\n};\r\n\r\nconst isValidAddress = (address: string) => {\r\n  try {\r\n    const decoded = bs58.decode(address);\r\n    return decoded.length === 32;\r\n  } catch {\r\n    return false;\r\n  }\r\n};\r\n\r\nfunction getDefaultTokens(tokens: TokenInfo[], search: string) {\r\n  let defaultBase = \"SOL\";\r\n  let defaultQuote = \"USDC\";\r\n\r\n  const nameToToken = tokens.reduce((map, item) => {\r\n    map.set(item.symbol, item);\r\n    return map;\r\n  }, new Map<string, any>());\r\n\r\n  if (search) {\r\n    const urlParams = new URLSearchParams(search);\r\n    const pair = urlParams.get(\"pair\");\r\n    if (pair) {\r\n      let items = pair.split(\"-\");\r\n\r\n      if (items.length > 1) {\r\n        if (nameToToken.has(items[0]) || isValidAddress(items[0])) {\r\n          defaultBase = items[0];\r\n        }\r\n\r\n        if (nameToToken.has(items[1]) || isValidAddress(items[1])) {\r\n          defaultQuote = items[1];\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return {\r\n    defaultBase,\r\n    defaultQuote,\r\n  };\r\n}\r\n","import { CurrencyContextState } from \"../utils/currencyPair\";\r\nimport { getTokenName, KnownTokenMap, getPoolName } from \"../utils/utils\";\r\nimport { PoolInfo } from \"../models\";\r\n\r\nexport const CREATE_POOL_LABEL = \"Create Liquidity Pool\";\r\nexport const INSUFFICIENT_FUNDS_LABEL = (tokenName: string) =>\r\n  `Insufficient ${tokenName} funds`;\r\nexport const POOL_NOT_AVAILABLE = (tokenA: string, tokenB: string) =>\r\n  `Pool ${tokenA}/${tokenB} doesn't exsist`;\r\nexport const ADD_LIQUIDITY_LABEL = \"Provide Liquidity\";\r\nexport const SWAP_LABEL = \"Swap\";\r\nexport const CONNECT_LABEL = \"Connect Wallet\";\r\nexport const SELECT_TOKEN_LABEL = \"Select a token\";\r\nexport const ENTER_AMOUNT_LABEL = \"Enter an amount\";\r\nexport const REMOVE_LIQUIDITY_LABEL = \"Remove Liquidity\";\r\n\r\nexport const generateActionLabel = (\r\n  action: string,\r\n  connected: boolean,\r\n  tokenMap: KnownTokenMap,\r\n  A: CurrencyContextState,\r\n  B: CurrencyContextState,\r\n  ignoreToBalance: boolean = false\r\n) => {\r\n  return !connected\r\n    ? CONNECT_LABEL\r\n    : !A.mintAddress\r\n    ? SELECT_TOKEN_LABEL\r\n    : !A.amount\r\n    ? ENTER_AMOUNT_LABEL\r\n    : !B.mintAddress\r\n    ? SELECT_TOKEN_LABEL\r\n    : !B.amount\r\n    ? ENTER_AMOUNT_LABEL\r\n    : !A.sufficientBalance()\r\n    ? INSUFFICIENT_FUNDS_LABEL(getTokenName(tokenMap, A.mintAddress))\r\n    : ignoreToBalance || B.sufficientBalance()\r\n    ? action\r\n    : INSUFFICIENT_FUNDS_LABEL(getTokenName(tokenMap, B.mintAddress));\r\n};\r\n\r\nexport const generateRemoveLabel = (\r\n  connected: boolean,\r\n  amount: number,\r\n  pool: PoolInfo,\r\n  tokenMap: KnownTokenMap,\r\n  hasSufficientBalance: boolean,\r\n  ignoreToBalance: boolean = false\r\n) => {\r\n  return !connected\r\n    ? CONNECT_LABEL\r\n    : !amount\r\n    ? ENTER_AMOUNT_LABEL\r\n    : !hasSufficientBalance\r\n    ? INSUFFICIENT_FUNDS_LABEL(getPoolName(tokenMap, pool))\r\n    : REMOVE_LIQUIDITY_LABEL;\r\n};\r\n\r\nexport const generateExactOneLabel = (\r\n  connected: boolean,\r\n  tokenMap: KnownTokenMap,\r\n  token?: CurrencyContextState\r\n) => {\r\n  return !connected\r\n    ? CONNECT_LABEL\r\n    : !token\r\n    ? SELECT_TOKEN_LABEL\r\n    : !parseFloat(token.amount || \"\")\r\n    ? ENTER_AMOUNT_LABEL\r\n    : !token.sufficientBalance()\r\n    ? INSUFFICIENT_FUNDS_LABEL(getTokenName(tokenMap, token.mintAddress))\r\n    : ADD_LIQUIDITY_LABEL;\r\n};\r\n","import React, { useMemo, useState } from \"react\";\r\nimport {\r\n  addLiquidity,\r\n  usePoolForBasket,\r\n  PoolOperation,\r\n} from \"../../utils/pools\";\r\nimport { Button, Card, Col, Dropdown, Popover, Radio, Row } from \"antd\";\r\nimport { useWallet } from \"../../context/wallet\";\r\nimport {\r\n  useConnection,\r\n  useConnectionConfig,\r\n  useSlippageConfig,\r\n} from \"../../utils/connection\";\r\nimport { Spin } from \"antd\";\r\nimport { LoadingOutlined, SettingOutlined } from \"@ant-design/icons\";\r\nimport { notify } from \"../../utils/notifications\";\r\nimport { SupplyOverview } from \"./supplyOverview\";\r\nimport { CurrencyInput } from \"../currencyInput\";\r\nimport { PoolConfigCard } from \"./config\";\r\nimport \"./add.less\";\r\nimport { CurveType, PoolInfo, TokenSwapLayout } from \"../../models\";\r\nimport { useCurrencyPairState } from \"../../utils/currencyPair\";\r\nimport {\r\n  CREATE_POOL_LABEL,\r\n  ADD_LIQUIDITY_LABEL,\r\n  generateActionLabel,\r\n  generateExactOneLabel,\r\n} from \"../labels\";\r\nimport { AdressesPopover } from \"./address\";\r\nimport { formatPriceNumber, getPoolName } from \"../../utils/utils\";\r\nimport { useMint, useUserAccounts } from \"../../utils/accounts\";\r\nimport { useEnrichedPools } from \"../../context/market\";\r\nimport { PoolIcon } from \"../tokenIcon\";\r\nimport { AppBar } from \"../appBar\";\r\nimport { Settings } from \"../settings\";\r\nimport { programIds } from \"../../utils/ids\";\r\n\r\nconst antIcon = <LoadingOutlined style={{ fontSize: 24 }} spin />;\r\n\r\nexport const AddToLiquidity = () => {\r\n  const { wallet, connect, connected } = useWallet();\r\n  const connection = useConnection();\r\n  const [pendingTx, setPendingTx] = useState(false);\r\n  const [depositType, setDepositType] = useState(\"both\");\r\n  const {\r\n    A,\r\n    B,\r\n    setLastTypedAccount,\r\n    setPoolOperation,\r\n    options,\r\n    setOptions,\r\n  } = useCurrencyPairState();\r\n  const [depositToken, setDepositToken] = useState<string>(A.mintAddress);\r\n  const pool = usePoolForBasket([A?.mintAddress, B?.mintAddress]);\r\n  const { slippage } = useSlippageConfig();\r\n  const { tokenMap } = useConnectionConfig();\r\n  const isLatestLayout = programIds().swapLayout === TokenSwapLayout;\r\n\r\n  const executeAction = !connected\r\n    ? connect\r\n    : async (instance?: PoolInfo) => {\r\n      const currentDepositToken = getDepositToken();\r\n      console.log(\"step\", 1);\r\n      if (\r\n        isLatestLayout &&\r\n        depositType === \"one\" &&\r\n        currentDepositToken?.account &&\r\n        currentDepositToken.mint\r\n      ) {\r\n\r\n        setPendingTx(true);\r\n        const components = [\r\n          {\r\n            account: currentDepositToken.account,\r\n            mintAddress: currentDepositToken.mintAddress,\r\n            amount: currentDepositToken.convertAmount(),\r\n          },\r\n        ];\r\n        addLiquidity(\r\n          connection,\r\n          wallet,\r\n          components,\r\n          slippage,\r\n          instance,\r\n          options,\r\n          depositType\r\n        )\r\n          .then(() => {\r\n            setPendingTx(false);\r\n          })\r\n          .catch((e) => {\r\n            console.log(\"Transaction failed\", e);\r\n            notify({\r\n              description:\r\n                \"Please try again and approve transactions from your wallet\",\r\n              message: \"Adding liquidity cancelled.\",\r\n              type: \"error\",\r\n            });\r\n            setPendingTx(false);\r\n          });\r\n      } else if (A.account && B.account && A.mint && B.mint) {\r\n        console.log(\"step\", 2);\r\n        setPendingTx(true);\r\n        const components = [\r\n          {\r\n            account: A.account,\r\n            mintAddress: A.mintAddress,\r\n            amount: A.convertAmount(),\r\n          },\r\n          {\r\n            account: B.account,\r\n            mintAddress: B.mintAddress,\r\n            amount: B.convertAmount(),\r\n          },\r\n        ];\r\n\r\n        // use input from B as offset during pool init for curve with offset\r\n        if (\r\n          options.curveType === CurveType.ConstantProductWithOffset &&\r\n          !instance\r\n        ) {\r\n          options.token_b_offset = components[1].amount;\r\n          components[1].amount = 0;\r\n        }\r\n        try {\r\n          addLiquidity(\r\n            connection,\r\n            wallet,\r\n            components,\r\n            slippage,\r\n            instance,\r\n            options\r\n          )\r\n            .then(() => {\r\n              setPendingTx(false);\r\n            })\r\n            .catch((e) => {\r\n              console.log(\"Transaction failed\", e);\r\n              notify({\r\n                description:\r\n                  \"Please try again and approve transactions from your wallet\",\r\n                message: \"Adding liquidity cancelled.\",\r\n                type: \"error\",\r\n              });\r\n              setPendingTx(false);\r\n            });\r\n        } catch (err) {\r\n\r\n        }\r\n\r\n      }\r\n    };\r\n\r\n  const hasSufficientBalance = A.sufficientBalance() && B.sufficientBalance();\r\n  const getDepositToken = () => {\r\n    if (!depositToken) {\r\n      return undefined;\r\n    }\r\n    return depositToken === A.mintAddress ? A : B;\r\n  };\r\n  const handleToggleDepositType = (item: any) => {\r\n    if (item === pool?.pubkeys.mint.toBase58()) {\r\n      setDepositType(\"both\");\r\n    } else if (item === A.mintAddress) {\r\n      if (depositType !== \"one\") {\r\n        setDepositType(\"one\");\r\n      }\r\n      setDepositToken(A.mintAddress);\r\n    } else if (item === B.mintAddress) {\r\n      if (depositType !== \"one\") {\r\n        setDepositType(\"one\");\r\n      }\r\n      setDepositToken(B.mintAddress);\r\n    }\r\n  };\r\n  const createPoolButton = pool && (\r\n    <Button\r\n      className=\"add-button\"\r\n      type=\"primary\"\r\n      size=\"large\"\r\n      onClick={() => executeAction()}\r\n      disabled={\r\n        connected &&\r\n        (pendingTx ||\r\n          !A.account ||\r\n          !B.account ||\r\n          A.account === B.account ||\r\n          !hasSufficientBalance)\r\n      }\r\n    >\r\n      {generateActionLabel(CREATE_POOL_LABEL, connected, tokenMap, A, B)}\r\n      {pendingTx && <Spin indicator={antIcon} className=\"add-spinner\" />}\r\n    </Button>\r\n  );\r\n\r\n  const addLiquidityButton = (\r\n    <Dropdown.Button\r\n      className=\"add-button\"\r\n      onClick={() => executeAction(pool)}\r\n      trigger={[\"click\"]}\r\n      disabled={\r\n        connected &&\r\n        (depositType === \"both\"\r\n          ? pendingTx ||\r\n          !A.account ||\r\n          !B.account ||\r\n          A.account === B.account ||\r\n          !hasSufficientBalance\r\n          : !getDepositToken()?.account ||\r\n          !getDepositToken()?.sufficientBalance())\r\n      }\r\n      type=\"primary\"\r\n      size=\"large\"\r\n      overlay={\r\n        <PoolConfigCard\r\n          options={options}\r\n          setOptions={setOptions}\r\n          action={createPoolButton}\r\n        />\r\n      }\r\n    >\r\n      {depositType === \"both\"\r\n        ? generateActionLabel(\r\n          pool ? ADD_LIQUIDITY_LABEL : CREATE_POOL_LABEL,\r\n          connected,\r\n          tokenMap,\r\n          A,\r\n          B\r\n        )\r\n        : generateExactOneLabel(connected, tokenMap, getDepositToken())}\r\n      {pendingTx && <Spin indicator={antIcon} className=\"add-spinner\" />}\r\n    </Dropdown.Button>\r\n  );\r\n\r\n  const getTokenOptions = () => {\r\n    let name: string = \"\";\r\n    let mint: string = \"\";\r\n    if (pool) {\r\n      name = getPoolName(tokenMap, pool);\r\n      mint = pool.pubkeys.mint.toBase58();\r\n    }\r\n    return (\r\n      <>\r\n        {pool && (\r\n          <Radio key={mint} value={mint} name={name}>\r\n            Add {name}\r\n          </Radio>\r\n        )}\r\n        {[A, B].map((item) => {\r\n          return (\r\n            <Radio\r\n              key={item.mintAddress}\r\n              value={item.mintAddress}\r\n              name={item.name}\r\n            >\r\n              Add {item.name}\r\n            </Radio>\r\n          );\r\n        })}\r\n      </>\r\n    );\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"input-card\">\r\n        <div className=\"desBox\">\r\n          <div className=\"desL\"></div>\r\n          <div className=\"desC font1\">增加流动性</div>\r\n          <div className=\"desR\">\r\n            <Popover\r\n              trigger=\"hover\"\r\n              content={\r\n                <div style={{ width: 300 }}>\r\n                  Liquidity providers earn a fixed percentage fee on all trades\r\n                  proportional to their share of the pool. Fees are added to the\r\n                  pool, accrue in real time and can be claimed by withdrawing your\r\n                  liquidity.\r\n                </div>\r\n              }\r\n            >\r\n              <img src={require('../../assets/img/icon3.png')} alt=\"\" style={{ marginRight: 0 }} />\r\n            </Popover>\r\n            <AdressesPopover pool={pool} />\r\n          </div>\r\n        </div>\r\n        {/* {isLatestLayout && pool && (\r\n          <div className=\"flex-row-center\">\r\n            <Radio.Group\r\n              style={{ margin: \"10px 0\" }}\r\n              onChange={(item) => handleToggleDepositType(item.target.value)}\r\n              value={\r\n                depositType === \"both\"\r\n                  ? pool?.pubkeys.mint.toBase58()\r\n                  : getDepositToken()?.mintAddress\r\n              }\r\n            >\r\n              {getTokenOptions()}\r\n            </Radio.Group>\r\n          </div>\r\n        )} */}\r\n        {depositType === \"both\" && (\r\n          <>\r\n            <CurrencyInput\r\n              title=\"Input\"\r\n              onInputChange={(val: any) => {\r\n                setPoolOperation(PoolOperation.Add);\r\n                if (A.amount !== val) {\r\n                  setLastTypedAccount(A.mintAddress);\r\n                }\r\n                A.setAmount(val);\r\n              }}\r\n              amount={A.amount}\r\n              mint={A.mintAddress}\r\n              onMintChange={(item) => {\r\n                A.setMint(item);\r\n              }}\r\n            />\r\n            <div style={{ fontSize: \"30px\" }}>+</div>\r\n            <CurrencyInput\r\n              title={\r\n                options.curveType === CurveType.ConstantProductWithOffset\r\n                  ? \"Offset\"\r\n                  : \"Input\"\r\n              }\r\n              onInputChange={(val: any) => {\r\n                setPoolOperation(PoolOperation.Add);\r\n                if (B.amount !== val) {\r\n                  setLastTypedAccount(B.mintAddress);\r\n                }\r\n                B.setAmount(val);\r\n              }}\r\n              amount={B.amount}\r\n              mint={B.mintAddress}\r\n              onMintChange={(item) => {\r\n                B.setMint(item);\r\n              }}\r\n            />\r\n          </>\r\n        )}\r\n        {depositType === \"one\" && depositToken && (\r\n          <CurrencyInput\r\n            title=\"Input\"\r\n            onInputChange={(val: any) => {\r\n              setPoolOperation(PoolOperation.Add);\r\n              const dToken = getDepositToken();\r\n              if (dToken && dToken.amount !== val) {\r\n                setLastTypedAccount(dToken.mintAddress);\r\n              }\r\n              getDepositToken()?.setAmount(val);\r\n            }}\r\n            amount={getDepositToken()?.amount}\r\n            mint={getDepositToken()?.mintAddress}\r\n            hideSelect={true}\r\n          />\r\n        )}\r\n        {addLiquidityButton}\r\n        {pool && <PoolPrice pool={pool} />}\r\n        <SupplyOverview pool={pool} />\r\n      </div>\r\n\r\n      <YourPosition pool={pool} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport const PoolPrice = (props: { pool: PoolInfo }) => {\r\n  const pool = props.pool;\r\n  const pools = useMemo(() => [props.pool].filter((p) => p) as PoolInfo[], [\r\n    props.pool,\r\n  ]);\r\n  const enriched = useEnrichedPools(pools)[0];\r\n\r\n  const { userAccounts } = useUserAccounts();\r\n  const lpMint = useMint(pool.pubkeys.mint);\r\n\r\n  const ratio =\r\n    userAccounts\r\n      .filter((f) => pool.pubkeys.mint.equals(f.info.mint))\r\n      .reduce((acc, item) => item.info.amount.toNumber() + acc, 0) /\r\n    (lpMint?.supply.toNumber() || 0);\r\n\r\n  if (!enriched) {\r\n    return null;\r\n  }\r\n  return (\r\n    <Card\r\n      className=\"ccy-input\"\r\n      style={{ borderRadius: 20, width: \"100%\" }}\r\n      bodyStyle={{ padding: \"7px\" }}\r\n      size=\"small\"\r\n      title=\"Prices and pool share\"\r\n    >\r\n      <Row style={{ width: \"100%\" }}>\r\n        <Col span={8}>\r\n          {formatPriceNumber.format(\r\n            parseFloat(enriched.liquidityA) / parseFloat(enriched.liquidityB)\r\n          )}\r\n        </Col>\r\n        <Col span={8}>\r\n          {formatPriceNumber.format(\r\n            parseFloat(enriched.liquidityB) / parseFloat(enriched.liquidityA)\r\n          )}\r\n        </Col>\r\n        <Col span={8}>\r\n          {ratio * 100 < 0.001 && ratio > 0 ? \"<\" : \"\"}\r\n          &nbsp;{formatPriceNumber.format(ratio * 100)}%\r\n        </Col>\r\n      </Row>\r\n      <Row style={{ width: \"100%\" }}>\r\n        <Col span={8}>\r\n          {enriched.names[0]} per {enriched.names[1]}\r\n        </Col>\r\n        <Col span={8}>\r\n          {enriched.names[1]} per {enriched.names[0]}\r\n        </Col>\r\n        <Col span={8}>Share of pool</Col>\r\n      </Row>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport const YourPosition = (props: { pool?: PoolInfo }) => {\r\n  const { pool } = props;\r\n  const pools = useMemo(() => [props.pool].filter((p) => p) as PoolInfo[], [\r\n    props.pool,\r\n  ]);\r\n  const enriched = useEnrichedPools(pools)[0];\r\n  const { userAccounts } = useUserAccounts();\r\n  const lpMint = useMint(pool?.pubkeys.mint);\r\n\r\n  if (!pool || !enriched) {\r\n    return null;\r\n  }\r\n  const baseMintAddress = pool.pubkeys.holdingMints[0].toBase58();\r\n  const quoteMintAddress = pool.pubkeys.holdingMints[1].toBase58();\r\n\r\n  const ratio =\r\n    userAccounts\r\n      .filter((f) => pool.pubkeys.mint.equals(f.info.mint))\r\n      .reduce((acc, item) => item.info.amount.toNumber() + acc, 0) /\r\n    (lpMint?.supply.toNumber() || 0);\r\n\r\n  return (\r\n    <Card\r\n      className=\"ccy-input\"\r\n      style={{ borderRadius: 20, width: \"100%\" }}\r\n      bodyStyle={{ padding: \"7px\" }}\r\n      size=\"small\"\r\n      title=\"Your Position\"\r\n    >\r\n      <div className=\"pool-card\" style={{ width: \"initial\" }}>\r\n        <div className=\"pool-card-row\">\r\n          <div className=\"pool-card-cell\">\r\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n              <PoolIcon mintA={baseMintAddress} mintB={quoteMintAddress} />\r\n              <h3 style={{ margin: 0 }}>{enriched?.name}</h3>\r\n            </div>\r\n          </div>\r\n          <div className=\"pool-card-cell\">\r\n            <h3 style={{ margin: 0 }}>\r\n              {formatPriceNumber.format(ratio * enriched.supply)}\r\n            </h3>\r\n          </div>\r\n        </div>\r\n        <div className=\"pool-card-row\" style={{ margin: 0 }}>\r\n          <div className=\"pool-card-cell\">Your Share:</div>\r\n          <div className=\"pool-card-cell\">\r\n            {ratio * 100 < 0.001 && ratio > 0 ? \"<\" : \"\"}\r\n            {formatPriceNumber.format(ratio * 100)}%\r\n          </div>\r\n        </div>\r\n        <div className=\"pool-card-row\" style={{ margin: 0 }}>\r\n          <div className=\"pool-card-cell\">{enriched.names[0]}:</div>\r\n          <div className=\"pool-card-cell\">\r\n            {formatPriceNumber.format(ratio * enriched.liquidityA)}\r\n          </div>\r\n        </div>\r\n        <div className=\"pool-card-row\" style={{ margin: 0 }}>\r\n          <div className=\"pool-card-cell\">{enriched.names[1]}:</div>\r\n          <div className=\"pool-card-cell\">\r\n            {formatPriceNumber.format(ratio * enriched.liquidityB)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport const AddToLiquidityView = () => {\r\n  return (\r\n    <>\r\n      <AppBar\r\n        right={\r\n          <Popover\r\n            placement=\"topRight\"\r\n            title=\"Settings\"\r\n            content={<Settings />}\r\n            trigger=\"click\"\r\n          >\r\n            <Button\r\n              shape=\"circle\"\r\n              size=\"large\"\r\n              type=\"text\"\r\n              icon={<SettingOutlined />}\r\n            />\r\n          </Popover>\r\n        }\r\n      />\r\n      <Card\r\n        className=\"exchange-card\"\r\n        headStyle={{ padding: 0 }}\r\n        bodyStyle={{ position: \"relative\" }}\r\n      >\r\n        <AddToLiquidity />\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Card, Col, Radio, Row, Slider, Spin, Typography } from \"antd\";\r\n\r\nimport { removeLiquidity, removeExactOneLiquidity } from \"../../utils/pools\";\r\nimport { useWallet } from \"../../context/wallet\";\r\nimport { useConnection, useConnectionConfig } from \"../../utils/connection\";\r\nimport { PoolInfo, TokenAccount, TokenSwapLayout } from \"../../models\";\r\nimport { notify } from \"../../utils/notifications\";\r\nimport { TokenIcon } from \"../tokenIcon\";\r\nimport { YourPosition } from \"./add\";\r\nimport { useMint } from \"../../utils/accounts\";\r\nimport {\r\n  formatPriceNumber,\r\n  getPoolName,\r\n  getTokenName,\r\n} from \"../../utils/utils\";\r\nimport { PoolCurrencyInput } from \"../currencyInput\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport { generateRemoveLabel } from \"../labels\";\r\nimport { programIds } from \"../../utils/ids\";\r\n\r\nexport const RemoveLiquidity = (props: {\r\n  instance: { account: TokenAccount; pool: PoolInfo };\r\n  removeRatio: number;\r\n  withdrawType: string;\r\n  amount: number;\r\n  withdrawToken: string;\r\n}) => {\r\n  const { account, pool } = props.instance;\r\n  const { removeRatio, withdrawType, amount, withdrawToken } = props;\r\n  const [pendingTx, setPendingTx] = useState(false);\r\n  const { wallet, connected } = useWallet();\r\n  const connection = useConnection();\r\n  const { tokenMap } = useConnectionConfig();\r\n  const mint = useMint(withdrawToken);\r\n\r\n  const isLatestLayout = programIds().swapLayout === TokenSwapLayout;\r\n\r\n  let liquidityAmount: number = removeRatio * account.info.amount.toNumber();\r\n  const hasSufficientBalance =\r\n    liquidityAmount <= account.info.amount.toNumber();\r\n\r\n  const onRemove = async () => {\r\n    try {\r\n      setPendingTx(true);\r\n      if (withdrawType === \"one\" && isLatestLayout) {\r\n        const tokenAmount = amount * Math.pow(10, mint?.decimals || 0);\r\n        await removeExactOneLiquidity(\r\n          connection,\r\n          wallet,\r\n          account,\r\n          liquidityAmount,\r\n          tokenAmount,\r\n          withdrawToken,\r\n          pool\r\n        );\r\n      } else {\r\n        await removeLiquidity(\r\n          connection,\r\n          wallet,\r\n          liquidityAmount,\r\n          account,\r\n          pool\r\n        );\r\n      }\r\n    } catch {\r\n      notify({\r\n        description:\r\n          \"Please try again and approve transactions from your wallet\",\r\n        message: \"Removing liquidity cancelled.\",\r\n        type: \"error\",\r\n      });\r\n    } finally {\r\n      setPendingTx(false);\r\n      // TODO: force refresh of pool accounts?\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      className=\"add-button\"\r\n      type=\"primary\"\r\n      size=\"large\"\r\n      onClick={onRemove}\r\n      disabled={\r\n        connected &&\r\n        (pendingTx || !hasSufficientBalance || !account || !liquidityAmount)\r\n      }\r\n    >\r\n      {generateRemoveLabel(\r\n        connected,\r\n        liquidityAmount,\r\n        pool,\r\n        tokenMap,\r\n        hasSufficientBalance\r\n      )}\r\n      {pendingTx && (\r\n        <Spin\r\n          indicator={<LoadingOutlined style={{ fontSize: 24 }} spin />}\r\n          className=\"add-spinner\"\r\n        />\r\n      )}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport const RemoveLiquidityEntry = (props: {\r\n  instance: { account?: TokenAccount; pool: PoolInfo };\r\n  enriched: any;\r\n}) => {\r\n  const { account, pool } = props.instance;\r\n  const { enriched } = props;\r\n  const [inputType, setInputType] = useState(\"slider\");\r\n  const { tokenMap } = useConnectionConfig();\r\n  const isLatestLayout = programIds().swapLayout === TokenSwapLayout;\r\n  const lpMint = useMint(pool?.pubkeys.mint);\r\n\r\n  const [withdrawType, setWithdrawType] = useState(\"both\");\r\n  const [withdrawToken, setWithdrawToken] = useState<string>(\r\n    pool?.pubkeys.mint.toBase58()\r\n  );\r\n\r\n  const ratio =\r\n    (account?.info.amount.toNumber() || 0) / (lpMint?.supply.toNumber() || 1);\r\n\r\n  const baseMintAddress = enriched.mints[0];\r\n  const quoteMintAddress = enriched.mints[1];\r\n\r\n  const [inputInfo, setInputInfo] = useState({\r\n    amount: \"initial\",\r\n    lastTyped: \"pool\",\r\n    liquidityPercentage: 100,\r\n  });\r\n\r\n  const [inputsDescription, setInputsDescription] = useState({\r\n    pool: \"Input\",\r\n    poolAmount: formatPriceNumber.format(\r\n      ratio * (enriched?.supply || 0) * (inputInfo.liquidityPercentage / 100)\r\n    ),\r\n    tokenA: \"Output (estimated)\",\r\n    tokenAAmount: formatPriceNumber.format(\r\n      ratio *\r\n        (enriched?.liquidityA || 0) *\r\n        (inputInfo.liquidityPercentage / 100)\r\n    ),\r\n    tokenB: \"Output (estimated)\",\r\n    tokenBAmount: formatPriceNumber.format(\r\n      ratio *\r\n        (enriched?.liquidityB || 0) *\r\n        (inputInfo.liquidityPercentage / 100)\r\n    ),\r\n  });\r\n\r\n  useEffect(() => {\r\n    switch (inputInfo.lastTyped) {\r\n      case \"pool\": {\r\n        setInputsDescription({\r\n          pool: withdrawType === \"both\" ? \"Input\" : \"Output (Estimated)\",\r\n          poolAmount:\r\n            inputInfo.amount !== \"initial\"\r\n              ? inputInfo.amount\r\n              : formatPriceNumber.format(\r\n                  ratio *\r\n                    (enriched?.supply || 0) *\r\n                    (inputInfo.liquidityPercentage / 100)\r\n                ),\r\n          tokenA: withdrawType === \"one\" ? \"Input\" : \"Output (Estimated)\",\r\n          tokenAAmount: formatPriceNumber.format(\r\n            ratio *\r\n              (enriched?.liquidityA || 0) *\r\n              (inputInfo.liquidityPercentage / 100)\r\n          ),\r\n          tokenB: withdrawType === \"one\" ? \"Input\" : \"Output (Estimated)\",\r\n          tokenBAmount: formatPriceNumber.format(\r\n            ratio *\r\n              (enriched?.liquidityB || 0) *\r\n              (inputInfo.liquidityPercentage / 100)\r\n          ),\r\n        });\r\n        break;\r\n      }\r\n      case \"tokenA\": {\r\n        setInputsDescription({\r\n          pool: withdrawType === \"both\" ? \"Input\" : \"Output (Estimated)\",\r\n          poolAmount: formatPriceNumber.format(\r\n            ratio *\r\n              (enriched?.supply || 0) *\r\n              (inputInfo.liquidityPercentage / 100)\r\n          ),\r\n          tokenA: withdrawType === \"one\" ? \"Input\" : \"Output (Estimated)\",\r\n          tokenAAmount: inputInfo.amount,\r\n          tokenB: withdrawType === \"one\" ? \"Input\" : \"Output (Estimated)\",\r\n          tokenBAmount: formatPriceNumber.format(\r\n            ratio *\r\n              (enriched?.liquidityB || 0) *\r\n              (inputInfo.liquidityPercentage / 100)\r\n          ),\r\n        });\r\n        break;\r\n      }\r\n      case \"tokenB\": {\r\n        setInputsDescription({\r\n          pool: withdrawType === \"both\" ? \"Input\" : \"Output (Estimated)\",\r\n          poolAmount: formatPriceNumber.format(\r\n            ratio *\r\n              (enriched?.supply || 0) *\r\n              (inputInfo.liquidityPercentage / 100)\r\n          ),\r\n          tokenA: withdrawType === \"one\" ? \"Input\" : \"Output (Estimated)\",\r\n          tokenAAmount: formatPriceNumber.format(\r\n            ratio *\r\n              (enriched?.liquidityA || 0) *\r\n              (inputInfo.liquidityPercentage / 100)\r\n          ),\r\n          tokenB: withdrawType === \"one\" ? \"Input\" : \"Output (Estimated)\",\r\n          tokenBAmount: inputInfo.amount,\r\n        });\r\n        break;\r\n      }\r\n      case \"slider\": {\r\n        setInputsDescription({\r\n          pool: withdrawType === \"both\" ? \"Input\" : \"Output (Estimated)\",\r\n          poolAmount: formatPriceNumber.format(\r\n            ratio *\r\n              (enriched?.supply || 0) *\r\n              (inputInfo.liquidityPercentage / 100)\r\n          ),\r\n          tokenA: withdrawType === \"one\" ? \"Input\" : \"Output (Estimated)\",\r\n          tokenAAmount: formatPriceNumber.format(\r\n            ratio *\r\n              (enriched?.liquidityA || 0) *\r\n              (inputInfo.liquidityPercentage / 100)\r\n          ),\r\n          tokenB: withdrawType === \"one\" ? \"Input\" : \"Output (Estimated)\",\r\n          tokenBAmount: formatPriceNumber.format(\r\n            ratio *\r\n              (enriched?.liquidityB || 0) *\r\n              (inputInfo.liquidityPercentage / 100)\r\n          ),\r\n        });\r\n        break;\r\n      }\r\n    }\r\n  }, [inputInfo, enriched, ratio, inputInfo.liquidityPercentage, withdrawType]);\r\n\r\n  useEffect(() => {\r\n    if (withdrawType === \"one\") {\r\n      if (\r\n        withdrawToken === baseMintAddress &&\r\n        inputInfo.amount !== inputsDescription.tokenAAmount\r\n      ) {\r\n        setInputInfo({\r\n          ...inputInfo,\r\n          lastTyped: \"tokenA\",\r\n          amount: inputsDescription.tokenAAmount,\r\n        });\r\n      } else if (\r\n        withdrawToken === quoteMintAddress &&\r\n        inputInfo.amount !== inputsDescription.tokenBAmount\r\n      ) {\r\n        setInputInfo({\r\n          ...inputInfo,\r\n          lastTyped: \"tokenB\",\r\n          amount: inputsDescription.tokenBAmount,\r\n        });\r\n      }\r\n    }\r\n    // Only needed to change with specific states\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [withdrawToken, withdrawType, baseMintAddress, quoteMintAddress]);\r\n\r\n  if (!pool || !enriched) {\r\n    return null;\r\n  }\r\n\r\n  const handleInputChange = (val: any, inputSource: string) => {\r\n    switch (inputSource) {\r\n      case \"pool\": {\r\n        setInputInfo({\r\n          liquidityPercentage: (val * 100) / (enriched.supply * ratio),\r\n          amount: val,\r\n          lastTyped: \"pool\",\r\n        });\r\n        break;\r\n      }\r\n      case \"tokenA\": {\r\n        setInputInfo({\r\n          liquidityPercentage: (val * 100) / (enriched.liquidityA * ratio),\r\n          amount: val,\r\n          lastTyped: \"tokenA\",\r\n        });\r\n        break;\r\n      }\r\n      case \"tokenB\": {\r\n        setInputInfo({\r\n          liquidityPercentage: (val * 100) / (enriched.liquidityB * ratio),\r\n          amount: val,\r\n          lastTyped: \"tokenB\",\r\n        });\r\n        break;\r\n      }\r\n      case \"slider\": {\r\n        setInputInfo({\r\n          ...inputInfo,\r\n          liquidityPercentage: val,\r\n          lastTyped: \"slider\",\r\n        });\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\n  const getTokenOptions = () => {\r\n    if (pool) {\r\n      const name = getPoolName(tokenMap, pool);\r\n      const mint = pool.pubkeys.mint.toBase58();\r\n      return (\r\n        <>\r\n          <Radio key={mint} value={mint} name={name}>\r\n            {name}\r\n          </Radio>\r\n          {pool.pubkeys.holdingMints.map((mint) => {\r\n            const mintAddress = mint.toBase58();\r\n            const tokenName = getTokenName(tokenMap, mintAddress);\r\n            return (\r\n              <Radio key={mintAddress} value={mintAddress} name={tokenName}>\r\n                {tokenName}\r\n              </Radio>\r\n            );\r\n          })}\r\n        </>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const handleToggleWithdrawType = (item: any) => {\r\n    if (item === pool?.pubkeys.mint.toBase58()) {\r\n      setWithdrawType(\"both\");\r\n      setWithdrawToken(pool?.pubkeys.mint.toBase58());\r\n    } else if (item === enriched.mints[0]) {\r\n      if (withdrawType !== \"one\") {\r\n        setWithdrawType(\"one\");\r\n      }\r\n      setWithdrawToken(enriched.mints[0]);\r\n    } else if (item === enriched.mints[1]) {\r\n      if (withdrawType !== \"one\") {\r\n        setWithdrawType(\"one\");\r\n      }\r\n      setWithdrawToken(enriched.mints[1]);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      {inputType === \"slider\" && (\r\n        <div className=\"input-card\">\r\n          Remove Liquidity\r\n          <Card\r\n            className=\"ccy-input\"\r\n            style={{ borderRadius: 20, width: \"100%\" }}\r\n            size=\"small\"\r\n          >\r\n            <div className=\"pool-card\" style={{ width: \"initial\" }}>\r\n              <div className=\"pool-card-row\">\r\n                <div className=\"pool-card-cell\">Amount</div>\r\n                <div className=\"pool-card-cell\">\r\n                  <Button onClick={() => setInputType(\"input\")}>\r\n                    Detailed\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              <div className=\"pool-card-row\">\r\n                <div className=\"pool-card-cell\">\r\n                  <Typography.Text style={{ fontSize: \"42px\" }}>\r\n                    {formatPriceNumber.format(inputInfo.liquidityPercentage)}%\r\n                  </Typography.Text>\r\n                </div>\r\n              </div>\r\n              <div className=\"pool-card-row\">\r\n                <Slider\r\n                  style={{ width: \"100%\" }}\r\n                  value={inputInfo.liquidityPercentage}\r\n                  tipFormatter={(amount?: number) => `${amount}%`}\r\n                  min={0}\r\n                  max={100}\r\n                  onChange={(amount: number) =>\r\n                    setInputInfo({\r\n                      ...inputInfo,\r\n                      liquidityPercentage: amount,\r\n                      lastTyped: \"slider\",\r\n                    })\r\n                  }\r\n                />\r\n              </div>\r\n              <Row>\r\n                <Col span={6}>\r\n                  <Button\r\n                    onClick={() =>\r\n                      setInputInfo({\r\n                        ...inputInfo,\r\n                        liquidityPercentage: 25,\r\n                        lastTyped: \"slider\",\r\n                      })\r\n                    }\r\n                  >\r\n                    25%\r\n                  </Button>\r\n                </Col>\r\n                <Col span={6}>\r\n                  <Button\r\n                    onClick={() =>\r\n                      setInputInfo({\r\n                        ...inputInfo,\r\n                        liquidityPercentage: 50,\r\n                        lastTyped: \"slider\",\r\n                      })\r\n                    }\r\n                  >\r\n                    50%\r\n                  </Button>\r\n                </Col>\r\n                <Col span={6}>\r\n                  <Button\r\n                    onClick={() =>\r\n                      setInputInfo({\r\n                        ...inputInfo,\r\n                        liquidityPercentage: 75,\r\n                        lastTyped: \"slider\",\r\n                      })\r\n                    }\r\n                  >\r\n                    75%\r\n                  </Button>\r\n                </Col>\r\n                <Col span={6}>\r\n                  <Button\r\n                    onClick={() =>\r\n                      setInputInfo({\r\n                        ...inputInfo,\r\n                        liquidityPercentage: 100,\r\n                        lastTyped: \"slider\",\r\n                      })\r\n                    }\r\n                  >\r\n                    100%\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n            </div>\r\n          </Card>\r\n          ↓\r\n          <Card\r\n            className=\"ccy-input\"\r\n            style={{ borderRadius: 20, width: \"100%\" }}\r\n            size=\"small\"\r\n          >\r\n            <div className=\"pool-card\" style={{ width: \"initial\" }}>\r\n              <div className=\"pool-card-row\">\r\n                <div className=\"pool-card-cell\">\r\n                  {formatPriceNumber.format(\r\n                    ratio *\r\n                      enriched.liquidityA *\r\n                      (inputInfo.liquidityPercentage / 100)\r\n                  )}\r\n                </div>\r\n                <div className=\"pool-card-cell\">\r\n                  <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n                    <TokenIcon mintAddress={baseMintAddress} />\r\n                    <h3 style={{ margin: 0 }}>{enriched?.names[0]}</h3>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"pool-card-row\">\r\n                <div className=\"pool-card-cell\">\r\n                  {formatPriceNumber.format(\r\n                    ratio *\r\n                      enriched.liquidityB *\r\n                      (inputInfo.liquidityPercentage / 100)\r\n                  )}\r\n                </div>\r\n                <div className=\"pool-card-cell\">\r\n                  <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n                    <TokenIcon mintAddress={quoteMintAddress} />\r\n                    <h3 style={{ margin: 0 }}>{enriched.names[1]}</h3>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      )}\r\n      {inputType === \"input\" && (\r\n        <div className=\"input-card\">\r\n          Remove Liquidity\r\n          {isLatestLayout && pool && (\r\n            <div className=\"flex-row-center\">\r\n              <Radio.Group\r\n                style={{ margin: \"10px 0\" }}\r\n                onChange={(item) => handleToggleWithdrawType(item.target.value)}\r\n                value={\r\n                  withdrawType === \"both\"\r\n                    ? pool?.pubkeys.mint.toBase58()\r\n                    : withdrawToken\r\n                }\r\n              >\r\n                {getTokenOptions()}\r\n              </Radio.Group>\r\n            </div>\r\n          )}\r\n          <Card\r\n            className=\"ccy-input\"\r\n            style={{ borderRadius: 20, width: \"100%\" }}\r\n            size=\"small\"\r\n          >\r\n            <div className=\"pool-card\" style={{ width: \"initial\" }}>\r\n              <div className=\"pool-card-row\">\r\n                <div className=\"pool-card-cell\">Amount Estimated</div>\r\n                <div className=\"pool-card-cell\">\r\n                  <Button onClick={() => setInputType(\"slider\")}>Simple</Button>\r\n                </div>\r\n              </div>\r\n              <div className=\"pool-card-row\">\r\n                <div className=\"pool-card-cell\">\r\n                  <Typography.Text style={{ fontSize: \"42px\" }}>\r\n                    {formatPriceNumber.format(inputInfo.liquidityPercentage)}%\r\n                  </Typography.Text>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"pool-card-row\">\r\n              <Slider\r\n                style={{ width: \"100%\" }}\r\n                value={inputInfo.liquidityPercentage}\r\n                tipFormatter={(amount?: number) => `${amount}%`}\r\n                min={0}\r\n                max={100}\r\n                onChange={(amount: number) =>\r\n                  handleInputChange(amount, \"slider\")\r\n                }\r\n              />\r\n            </div>\r\n            <Row>\r\n              <Col span={6}>\r\n                <Button onClick={() => handleInputChange(25, \"slider\")}>\r\n                  25%\r\n                </Button>\r\n              </Col>\r\n              <Col span={6}>\r\n                <Button onClick={() => handleInputChange(50, \"slider\")}>\r\n                  50%\r\n                </Button>\r\n              </Col>\r\n              <Col span={6}>\r\n                <Button onClick={() => handleInputChange(75, \"slider\")}>\r\n                  75%\r\n                </Button>\r\n              </Col>\r\n              <Col span={6}>\r\n                <Button onClick={() => handleInputChange(100, \"slider\")}>\r\n                  100%\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n          <PoolCurrencyInput\r\n            mint={pool.pubkeys.mint.toBase58()}\r\n            pool={pool}\r\n            title={inputsDescription.pool}\r\n            amount={inputsDescription.poolAmount}\r\n            onInputChange={(val: any) => {\r\n              handleInputChange(val, \"pool\");\r\n            }}\r\n          />\r\n          ↓\r\n          {(withdrawType === \"both\" || withdrawToken === baseMintAddress) && (\r\n            <PoolCurrencyInput\r\n              mint={baseMintAddress}\r\n              title={inputsDescription.tokenA}\r\n              amount={inputsDescription.tokenAAmount}\r\n              onInputChange={(val: any) => {\r\n                handleInputChange(val, \"tokenA\");\r\n              }}\r\n            />\r\n          )}\r\n          {withdrawType === \"both\" && \"+\"}\r\n          {(withdrawType === \"both\" || withdrawToken === quoteMintAddress) && (\r\n            <PoolCurrencyInput\r\n              mint={quoteMintAddress}\r\n              title={inputsDescription.tokenB}\r\n              amount={inputsDescription.tokenBAmount}\r\n              onInputChange={(val: any) => {\r\n                handleInputChange(val, \"tokenB\");\r\n              }}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n      {account && (\r\n        <RemoveLiquidity\r\n          instance={{ pool: pool, account: account }}\r\n          removeRatio={inputInfo.liquidityPercentage / 100}\r\n          withdrawType={withdrawType}\r\n          amount={\r\n            withdrawToken === baseMintAddress\r\n              ? parseFloat(inputsDescription.tokenAAmount)\r\n              : parseFloat(inputsDescription.tokenBAmount)\r\n          }\r\n          withdrawToken={withdrawToken}\r\n        />\r\n      )}\r\n      <YourPosition pool={pool} />\r\n    </>\r\n  );\r\n};\r\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { Card, Spin, Typography } from \"antd\";\r\nimport \"./styles.less\";\r\nimport echarts from \"echarts\";\r\nimport { PoolInfo } from \"../../models\";\r\nimport { PoolIcon } from \"../tokenIcon\";\r\nimport { formatShortDate, getPoolName } from \"../../utils/utils\";\r\nimport { useConnectionConfig } from \"../../utils/connection\";\r\nimport { BONFIDA_POOL_INTERVAL } from \"../../context/market\";\r\n\r\nexport const VOLUME_API = \"https://serum-api.bonfida.com/pools/volumes\";\r\nexport const LIQUIDITY_API = \"https://serum-api.bonfida.com/pools/liquidity\";\r\n\r\nconst API_ENDPOINTS: EndpointOptions = {\r\n  volume: VOLUME_API,\r\n  liquidity: LIQUIDITY_API,\r\n};\r\ntype EndpointOptions = {\r\n  [key: string]: string;\r\n};\r\ninterface VolumeData {\r\n  volume: number;\r\n  time: number;\r\n}\r\n\r\ninterface LiquidityData {\r\n  liquidityAinUsd: number;\r\n  liquidityBinUsd: number;\r\n  time: number;\r\n}\r\n\r\nexport const PoolLineChart = React.memo(\r\n  (props: {\r\n    pool?: PoolInfo;\r\n    limit?: number;\r\n    api: string;\r\n    chartName: string;\r\n    current?: string;\r\n    type?: string;\r\n    getComputedData: (item: any) => Array<number>;\r\n    getComputedTime: (item: any) => Array<string>;\r\n  }) => {\r\n    const { pool, api, limit, chartName, current } = props;\r\n    const chartDiv = useRef<HTMLDivElement>(null);\r\n    const echartsRef = useRef<any>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n\r\n    let apiFilter: string = \"\";\r\n    let apiUrl: string = \"\";\r\n    const bonfidaTimer = useRef<number>(0);\r\n    if (pool) {\r\n      const baseMintAddress = pool.pubkeys.holdingMints[0].toBase58();\r\n      const quoteMintAddress = pool.pubkeys.holdingMints[1].toBase58();\r\n      apiFilter = `?mintA=${baseMintAddress}&mintB=${quoteMintAddress}`;\r\n    }\r\n    apiUrl = API_ENDPOINTS[api];\r\n\r\n    const bonfidaDataChartQuery = useCallback(async () => {\r\n      try {\r\n        const resp = await window.fetch(`${apiUrl}${apiFilter}`);\r\n        const data = await resp.json();\r\n        let finalData = data?.data || [];\r\n        if (limit && finalData) {\r\n          finalData = finalData.slice(0, limit);\r\n        }\r\n        updateChart(finalData);\r\n      } catch {\r\n        // ignore\r\n      }\r\n      bonfidaTimer.current = window.setTimeout(\r\n        () => bonfidaDataChartQuery(),\r\n        BONFIDA_POOL_INTERVAL\r\n      );\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []); // needs to only be called on mount an unmount\r\n\r\n    const updateChart = (data: any) => {\r\n      setLoading(false);\r\n      if (echartsRef.current) {\r\n        echartsRef.current.setOption({\r\n          textStyle: {\r\n            color: \"#fff\",\r\n          },\r\n          tooltip: {\r\n            trigger: \"axis\",\r\n            axisPointer: {\r\n              type: \"shadow\",\r\n            },\r\n          },\r\n          grid: {\r\n            containLabel: true,\r\n            left: 0,\r\n            right: 0,\r\n          },\r\n          xAxis: [\r\n            {\r\n              inverse: true,\r\n              type: \"category\",\r\n              data: props.getComputedTime(data),\r\n            },\r\n          ],\r\n          yAxis: [\r\n            {\r\n              type: \"value\",\r\n              scale: true,\r\n              splitLine: false,\r\n            },\r\n          ],\r\n          series: [\r\n            {\r\n              type: `${props.type || \"line\"}`,\r\n              data: props.getComputedData(data),\r\n            },\r\n          ],\r\n        });\r\n      }\r\n    };\r\n    useEffect(() => {\r\n      if (chartDiv.current) {\r\n        echartsRef.current = echarts.init(chartDiv.current);\r\n      }\r\n      bonfidaDataChartQuery();\r\n      return () => {\r\n        echartsRef.current.dispose();\r\n        window.clearTimeout(bonfidaTimer.current);\r\n      };\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []); // needs to only be called on mount an unmount\r\n    return (\r\n      <>\r\n        {loading && <Spin tip=\"Loading...\" />}\r\n        {!loading && (\r\n          <Typography.Title level={4}>\r\n            {chartName} {current || \"\"}\r\n          </Typography.Title>\r\n        )}\r\n        <div ref={chartDiv} style={{ height: \"250px\", width: \"100%\" }} />\r\n      </>\r\n    );\r\n  }\r\n);\r\n\r\nexport const HistoricalVolume = React.memo(\r\n  (props: { pool?: PoolInfo; current?: string }) => {\r\n    const getComputedData = (data: VolumeData[]) => {\r\n      return data.map((d) => d.volume);\r\n    };\r\n    const getComputedTime = (data: VolumeData[]) => {\r\n      return data.map((d: any) => formatShortDate.format(new Date(d.time)));\r\n    };\r\n    let name: string = \"Volume\";\r\n    if (props.current) {\r\n      name = \"Volume (24H)\";\r\n    }\r\n    return (\r\n      <PoolLineChart\r\n        pool={props.pool}\r\n        limit={props.pool ? 7 : 0}\r\n        api=\"volume\"\r\n        type=\"bar\"\r\n        chartName={name}\r\n        current={props.current}\r\n        getComputedData={getComputedData}\r\n        getComputedTime={getComputedTime}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\ntype GrupedData = {\r\n  [key: number]: number;\r\n};\r\n\r\nexport const HistoricalLiquidity = React.memo(\r\n  (props: { pool?: PoolInfo; current?: string }) => {\r\n    const groupByTime = (data: LiquidityData[]) => {\r\n      const groupedData: GrupedData = {};\r\n      for (const d of data) {\r\n        if (!groupedData[d.time]) {\r\n          groupedData[d.time] = 0;\r\n        }\r\n        groupedData[d.time] =\r\n          groupedData[d.time] + d.liquidityAinUsd + d.liquidityBinUsd;\r\n      }\r\n      return groupedData;\r\n    };\r\n    const getComputedData = (data: LiquidityData[]) => {\r\n      const groupedData = groupByTime(data);\r\n      return Object.values(groupedData);\r\n    };\r\n    const getComputedTime = (data: LiquidityData[]) => {\r\n      const groupedData = groupByTime(data);\r\n      return Object.keys(groupedData).map((key) =>\r\n        formatShortDate.format(new Date(parseInt(key)))\r\n      );\r\n    };\r\n    let name: string = \"Liquidity\";\r\n    if (props.current) {\r\n      name = \"Total Liquidity\";\r\n    }\r\n    return (\r\n      <PoolLineChart\r\n        pool={props.pool}\r\n        limit={props.pool ? 7 : 0}\r\n        api=\"liquidity\"\r\n        type=\"line\"\r\n        chartName={name}\r\n        current={props.current}\r\n        getComputedData={getComputedData}\r\n        getComputedTime={getComputedTime}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nexport const HistoricalPoolData = React.memo((props: { pool: PoolInfo }) => {\r\n  const { tokenMap } = useConnectionConfig();\r\n  const pool = props.pool;\r\n  const baseMintAddress = pool.pubkeys.holdingMints[0].toBase58();\r\n  const quoteMintAddress = pool.pubkeys.holdingMints[1].toBase58();\r\n  const name = getPoolName(tokenMap, pool);\r\n  return (\r\n    <Card\r\n      className=\"pool-card\"\r\n      title={\r\n        <>\r\n          <PoolIcon\r\n            mintA={baseMintAddress}\r\n            mintB={quoteMintAddress}\r\n            className=\"left-icon\"\r\n          />\r\n          {name}\r\n        </>\r\n      }\r\n    >\r\n      <HistoricalLiquidity pool={pool} />\r\n      <HistoricalVolume pool={pool} />\r\n    </Card>\r\n  );\r\n});\r\n","import React, { useMemo, useState } from \"react\";\r\nimport { Button, Card, Popover, Typography } from \"antd\";\r\nimport { RemoveLiquidityEntry } from \"./remove\";\r\nimport { useMint, useUserAccounts } from \"../../utils/accounts\";\r\nimport { PoolIcon } from \"../tokenIcon\";\r\nimport { PoolInfo, TokenAccount } from \"../../models\";\r\nimport \"./view.less\";\r\nimport { useEnrichedPools } from \"../../context/market\";\r\nimport { formatNumber, formatPct, formatUSD } from \"../../utils/utils\";\r\nimport { ExplorerLink } from \"../explorerLink\";\r\nimport { SupplyOverview } from \"./supplyOverview\";\r\nimport { HistoricalLiquidity, HistoricalVolume } from \"../charts/historical\";\r\nimport { LineChartOutlined, AlignLeftOutlined } from \"@ant-design/icons\";\r\n\r\nconst { Text } = Typography;\r\n\r\nexport const PoolCard = (props: { pool: PoolInfo; account?: TokenAccount }) => {\r\n  const pools = useMemo(() => [props.pool].filter((p) => p) as PoolInfo[], [\r\n    props.pool,\r\n  ]);\r\n\r\n  const [displayMode, setDisplayMode] = useState(\"card\");\r\n\r\n  const enriched = useEnrichedPools(pools)[0];\r\n  const { userAccounts } = useUserAccounts();\r\n\r\n  const pool = props.pool;\r\n  const account = props.account;\r\n\r\n  const baseMintAddress = pool.pubkeys.holdingMints[0].toBase58();\r\n  const quoteMintAddress = pool.pubkeys.holdingMints[1].toBase58();\r\n  const lpMint = useMint(pool.pubkeys.mint);\r\n\r\n  const ratio =\r\n    (account?.info.amount.toNumber() || 0) / (lpMint?.supply.toNumber() || 0);\r\n\r\n  if (!enriched) {\r\n    return null;\r\n  }\r\n\r\n  const handleSwitchChartMode = () => {\r\n    if (displayMode === \"card\") {\r\n      setDisplayMode(\"chart\");\r\n    } else {\r\n      setDisplayMode(\"card\");\r\n    }\r\n  };\r\n  const handleSwitchViewMode = () => {\r\n    if (displayMode === \"card\") {\r\n      setDisplayMode(\"remove\");\r\n    } else {\r\n      setDisplayMode(\"card\");\r\n    }\r\n  };\r\n  const small: React.CSSProperties = { fontSize: 11 };\r\n\r\n  const userInfo = userAccounts.length > 0 && (\r\n    <>\r\n      <div className=\"pool-card-row\">\r\n        <Text type=\"secondary\" className=\"pool-card-cell \">\r\n          Your liquidity:\r\n        </Text>\r\n        <div className=\"pool-card-cell \">\r\n          <div className=\"left\">\r\n            <div>{formatUSD.format(ratio * enriched.liquidity)}</div>\r\n            <div>\r\n              <Text type=\"secondary\" style={small}>\r\n                {formatNumber.format(ratio * enriched.liquidityA)}{\" \"}\r\n                {enriched.names[0]}\r\n              </Text>\r\n            </div>\r\n            <div>\r\n              <Text type=\"secondary\" style={small}>\r\n                {formatNumber.format(ratio * enriched.liquidityB)}{\" \"}\r\n                {enriched.names[1]}\r\n              </Text>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"pool-card-row\">\r\n        <Text type=\"secondary\" className=\"pool-card-cell \">\r\n          Your quantity:\r\n        </Text>\r\n        <div className=\"pool-card-cell \">{ratio * enriched.supply}</div>\r\n      </div>\r\n      <div className=\"pool-card-row\">\r\n        <Text type=\"secondary\" className=\"pool-card-cell \">\r\n          Your fees (24h):\r\n        </Text>\r\n        <div className=\"pool-card-cell \" title={`${enriched.fees24h * ratio}`}>\r\n          {enriched.fees24h * ratio < 0.005 ? \"< \" : \"\"}\r\n          {formatUSD.format(enriched.fees24h * ratio)}\r\n        </div>\r\n      </div>\r\n\r\n      <hr />\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <Card\r\n      className=\"pool-card\"\r\n      title={\r\n        <>\r\n          <PoolIcon\r\n            mintA={baseMintAddress}\r\n            mintB={quoteMintAddress}\r\n            className=\"left-icon\"\r\n          />\r\n          {enriched?.name}\r\n          <Popover\r\n            placement=\"topRight\"\r\n            trigger=\"hover\"\r\n            className=\"right-icon\"\r\n            content={`Show ${\r\n              displayMode === \"card\" ? \"historical\" : \"current\"\r\n            } data`}\r\n          >\r\n            {displayMode === \"remove\" ? (\r\n              <Button\r\n                shape=\"circle\"\r\n                size=\"middle\"\r\n                type=\"text\"\r\n                icon={<AlignLeftOutlined />}\r\n                onClick={() => setDisplayMode(\"card\")}\r\n              />\r\n            ) : (\r\n              <Button\r\n                shape=\"circle\"\r\n                size=\"middle\"\r\n                type=\"text\"\r\n                icon={\r\n                  displayMode === \"card\" ? (\r\n                    <LineChartOutlined />\r\n                  ) : (\r\n                    <AlignLeftOutlined />\r\n                  )\r\n                }\r\n                onClick={handleSwitchChartMode}\r\n              />\r\n            )}\r\n          </Popover>\r\n        </>\r\n      }\r\n    >\r\n      {displayMode === \"card\" && (\r\n        <>\r\n          {userInfo}\r\n          <div className=\"pool-card-row\">\r\n            <Text type=\"secondary\" className=\"pool-card-cell \">\r\n              Pool Liquidity:\r\n            </Text>\r\n            <div className=\"pool-card-cell \">\r\n              <div className=\"left\">\r\n                <div>{formatUSD.format(enriched.liquidity)}</div>\r\n                <div>\r\n                  <Text type=\"secondary\" style={small}>\r\n                    {formatNumber.format(enriched.liquidityA)}{\" \"}\r\n                    {enriched.names[0]}\r\n                  </Text>\r\n                </div>\r\n                <div>\r\n                  <Text type=\"secondary\" style={small}>\r\n                    {formatNumber.format(enriched.liquidityB)}{\" \"}\r\n                    {enriched.names[1]}\r\n                  </Text>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"pool-card-row\">\r\n            <Text type=\"secondary\" className=\"pool-card-cell \">\r\n              LP Supply:\r\n            </Text>\r\n            <div className=\"pool-card-cell \" title={enriched.supply}>\r\n              {formatNumber.format(enriched.supply)}\r\n            </div>\r\n          </div>\r\n          <div className=\"pool-card-row\">\r\n            <Text type=\"secondary\" className=\"pool-card-cell \">\r\n              Value per token:\r\n            </Text>\r\n            <div className=\"pool-card-cell \">\r\n              {formatUSD.format(enriched.liquidity / enriched.supply)}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"pool-card-row\">\r\n            <Text type=\"secondary\" className=\"pool-card-cell \">\r\n              Volume (24h):\r\n            </Text>\r\n            <div className=\"pool-card-cell \">\r\n              {formatUSD.format(enriched.volume24h)}\r\n            </div>\r\n          </div>\r\n          <div className=\"pool-card-row\">\r\n            <Text type=\"secondary\" className=\"pool-card-cell \">\r\n              Fees (24h):\r\n            </Text>\r\n            <div className=\"pool-card-cell \">\r\n              {formatUSD.format(enriched.fees24h)}\r\n            </div>\r\n          </div>\r\n          <div className=\"pool-card-row\">\r\n            <Text type=\"secondary\" className=\"pool-card-cell \">\r\n              Approx. APY (24h):\r\n            </Text>\r\n            <div className=\"pool-card-cell \">\r\n              {formatPct.format(enriched.apy24h)}\r\n            </div>\r\n          </div>\r\n          <div className=\"pool-card-row\">\r\n            <Text type=\"secondary\" className=\"pool-card-cell \">\r\n              Address:\r\n            </Text>\r\n            <div className=\"pool-card-cell \">\r\n              <div className=\"left\">\r\n                <div>\r\n                  <ExplorerLink\r\n                    address={enriched.address}\r\n                    type=\"account\"\r\n                    length={4}\r\n                  />\r\n                </div>\r\n                <div className=\"small\">\r\n                  <ExplorerLink\r\n                    address={enriched.accounts[0]}\r\n                    type=\"account\"\r\n                    style={small}\r\n                    length={4}\r\n                  />\r\n                  <Text type=\"secondary\" style={small}>\r\n                    {\" \"}\r\n                    {enriched.names[0]}\r\n                  </Text>\r\n                </div>\r\n                <div className=\"small\">\r\n                  <ExplorerLink\r\n                    address={enriched.accounts[1]}\r\n                    type=\"account\"\r\n                    style={small}\r\n                    length={4}\r\n                  />\r\n                  <Text type=\"secondary\" style={small}>\r\n                    {\" \"}\r\n                    {enriched.names[1]}\r\n                  </Text>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <SupplyOverview pool={pool} />\r\n          <div className=\"pool-card-row\">\r\n            {/* {item && <Button type=\"default\" onClick={setPair}>Add</Button>} */}\r\n            {props.account && (\r\n              <Button onClick={handleSwitchViewMode}>Remove</Button>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n      {displayMode === \"chart\" && (\r\n        <>\r\n          <HistoricalLiquidity\r\n            pool={pool}\r\n            current={formatUSD.format(enriched.liquidity)}\r\n          />\r\n          <HistoricalVolume\r\n            pool={pool}\r\n            current={formatUSD.format(enriched.volume24h)}\r\n          />\r\n        </>\r\n      )}\r\n      {displayMode === \"remove\" && account && (\r\n        <RemoveLiquidityEntry\r\n          instance={{ pool: pool, account: account }}\r\n          enriched={enriched}\r\n        />\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport { ConfigProvider, Empty } from \"antd\";\r\nimport { useOwnedPools } from \"../../utils/pools\";\r\nimport { cache } from \"../../utils/accounts\";\r\nimport { PoolIcon } from \"../tokenIcon\";\r\nimport { PoolInfo, TokenAccount } from \"../../models\";\r\nimport \"./quickView.less\";\r\nimport { useEnrichedPools } from \"../../context/market\";\r\nimport { formatUSD } from \"../../utils/utils\";\r\n\r\nconst PoolItem = (props: {\r\n  item: { pool: PoolInfo; isFeeAccount: boolean; account: TokenAccount };\r\n  poolDetails: any;\r\n}) => {\r\n  const item = props.item;\r\n  const mint = cache.getMint(item.account.info.mint.toBase58());\r\n  const amount =\r\n    item.account.info.amount.toNumber() / Math.pow(10, mint?.decimals || 0);\r\n\r\n  const supply = mint?.supply.toNumber() || 0;\r\n  const poolContribution = item.account.info.amount.toNumber() / supply;\r\n  const contributionInUSD = poolContribution * props.poolDetails?.liquidity;\r\n  const feesInUSD = poolContribution * props.poolDetails?.fees;\r\n\r\n  // amount / supply * liquidity\r\n\r\n  if (!amount) {\r\n    return null;\r\n  }\r\n\r\n  const sorted = item.pool.pubkeys.holdingMints.map((a) => a.toBase58()).sort();\r\n\r\n  if (item) {\r\n    return (\r\n      <div\r\n        className=\"pool-item-row\"\r\n        title={`LP Token: ${props.item.pool.pubkeys.mint.toBase58()}, account: ${props.item.account.pubkey.toBase58()}`}\r\n      >\r\n        <PoolIcon\r\n          mintA={sorted[0]}\r\n          mintB={sorted[1]}\r\n          style={{ marginLeft: \"0.5rem\" }}\r\n        />\r\n        <div className=\"pool-item-name\">{props.poolDetails?.name}</div>\r\n        <div className=\"pool-item-amount\">\r\n          {formatUSD.format(contributionInUSD)}\r\n        </div>\r\n        <div className=\"pool-item-amount\">{formatUSD.format(feesInUSD)}</div>\r\n        <div className=\"pool-item-type\" title=\"Fee account\">\r\n          {item.isFeeAccount ? \" (F) \" : \" \"}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const PoolAccounts = (props: { legacy: boolean }) => {\r\n  const pools = useOwnedPools(props.legacy);\r\n  const userPools = useMemo(() => {\r\n    return pools.map((p) => p.pool);\r\n  }, [pools]);\r\n\r\n  const enriched = useEnrichedPools(userPools);\r\n\r\n  return (\r\n    <>\r\n      <div>Your Liquidity</div>\r\n      <ConfigProvider\r\n        renderEmpty={() => (\r\n          <Empty\r\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\r\n            description=\"No liquidity found.\"\r\n          />\r\n        )}\r\n      >\r\n        <div className=\"pools-grid\">\r\n          <div className=\"pool-item-header\">\r\n            <div style={{ width: 48 }} />\r\n            <div className=\"pool-item-name\">Pool</div>\r\n            <div className=\"pool-item-amount\">Liquidity</div>\r\n            <div className=\"pool-item-amount\">Fees</div>\r\n            <div className=\"pool-item-type\" />\r\n            <div />\r\n          </div>\r\n          {pools.map((p) => (\r\n            <PoolItem\r\n              key={p?.account.pubkey.toBase58()}\r\n              item={p as any}\r\n              poolDetails={enriched.find((e) => e.raw === p.pool)}\r\n            />\r\n          ))}\r\n        </div>\r\n      </ConfigProvider>\r\n    </>\r\n  );\r\n};\r\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { useConnection, useSlippageConfig } from \"../../utils/connection\";\r\nimport { Button, Modal } from \"antd\";\r\nimport { cache, useCachedPool } from \"../../utils/accounts\";\r\nimport {\r\n  addLiquidity,\r\n  removeLiquidity,\r\n  useOwnedPools,\r\n} from \"../../utils/pools\";\r\nimport { useWallet } from \"../../context/wallet\";\r\nimport { PoolAccounts } from \"../pool/quickView\";\r\nimport { LiquidityComponent } from \"../../models\";\r\n\r\nexport const MigrationModal = () => {\r\n  const [visible, setVisable] = useState(false);\r\n  const [ack, setAck] = useState(false);\r\n  const [executing, setExecuting] = useState(false);\r\n  const [completed, setCompleted] = useState(false);\r\n\r\n  const { wallet, connected } = useWallet();\r\n  const connection = useConnection();\r\n  const { slippage } = useSlippageConfig();\r\n\r\n  const activePools = useCachedPool();\r\n  const legacyOwned = useOwnedPools(true);\r\n\r\n  const poolsToMigrate = useMemo(() => {\r\n    return legacyOwned\r\n      .map((item) => {\r\n        const account = item.account;\r\n        const fromPool = item.pool;\r\n\r\n        const toPool = activePools.pools.find(\r\n          (p) =>\r\n            (p.pubkeys.holdingMints[0].equals(\r\n              fromPool.pubkeys.holdingMints[0]\r\n            ) &&\r\n              p.pubkeys.holdingMints[1].equals(\r\n                fromPool.pubkeys.holdingMints[1]\r\n              )) ||\r\n            (p.pubkeys.holdingMints[0].equals(\r\n              fromPool.pubkeys.holdingMints[1]\r\n            ) &&\r\n              p.pubkeys.holdingMints[1].equals(\r\n                fromPool.pubkeys.holdingMints[0]\r\n              ))\r\n        );\r\n\r\n        return {\r\n          account,\r\n          fromPool,\r\n          toPool,\r\n        };\r\n      })\r\n      .filter((item) => item.toPool !== undefined);\r\n  }, [activePools, legacyOwned]);\r\n\r\n  const handleOk = useCallback(async () => {\r\n    setAck(true);\r\n    setExecuting(true);\r\n    for (let i = 0; i < poolsToMigrate.length; i++) {\r\n      try {\r\n        const item = poolsToMigrate[i];\r\n        const account = item.account;\r\n        const fromPool = item.fromPool;\r\n        const toPool = item.toPool;\r\n\r\n        let liquidityAmount = account.info.amount.toNumber();\r\n        const poolMint = await cache.queryMint(\r\n          connection,\r\n          fromPool.pubkeys.mint\r\n        );\r\n        const baseAccount = await cache.queryAccount(\r\n          connection,\r\n          fromPool.pubkeys.holdingAccounts[0]\r\n        );\r\n        const quoteAccount = await cache.queryAccount(\r\n          connection,\r\n          fromPool.pubkeys.holdingAccounts[1]\r\n        );\r\n\r\n        const ownershipRatio = liquidityAmount / poolMint.supply.toNumber();\r\n\r\n        const baseAmount = Math.floor(\r\n          baseAccount.info.amount.toNumber() * ownershipRatio\r\n        );\r\n        const quoteAmount = Math.floor(\r\n          quoteAccount.info.amount.toNumber() * ownershipRatio\r\n        );\r\n\r\n        const toAccounts = await removeLiquidity(\r\n          connection,\r\n          wallet,\r\n          liquidityAmount,\r\n          account,\r\n          fromPool\r\n        );\r\n\r\n        const sameMintOrder =\r\n          fromPool.pubkeys.holdingMints[0].toBase58() ===\r\n          toPool?.pubkeys.holdingMints[0].toBase58();\r\n        if (!sameMintOrder) {\r\n          toAccounts.reverse();\r\n        }\r\n\r\n        const components: LiquidityComponent[] = [\r\n          {\r\n            amount: baseAmount,\r\n            account: cache.getAccount(toAccounts[0]),\r\n            mintAddress: toPool?.pubkeys.holdingMints[0].toBase58() || \"\",\r\n          },\r\n          {\r\n            amount: quoteAmount,\r\n            account: cache.getAccount(toAccounts[1]),\r\n            mintAddress: toPool?.pubkeys.holdingMints[1].toBase58() || \"\",\r\n          },\r\n        ];\r\n        await addLiquidity(connection, wallet, components, slippage, toPool);\r\n      } catch {\r\n        // TODO:\r\n      }\r\n    }\r\n    setExecuting(false);\r\n    setCompleted(true);\r\n  }, [connection, wallet, slippage, setAck, poolsToMigrate]);\r\n\r\n  const handleCancel = useCallback(() => {\r\n    setAck(true);\r\n\r\n    if (!executing) {\r\n      setVisable(false);\r\n    }\r\n  }, [executing, setVisable, setAck]);\r\n\r\n  useEffect(() => {\r\n    if (poolsToMigrate.length > 0 && !ack) {\r\n      setVisable(true);\r\n    }\r\n  }, [poolsToMigrate, connected, ack]);\r\n\r\n  return (\r\n    <Modal\r\n      visible={visible}\r\n      title=\"Liquidity migration\"\r\n      onOk={handleOk}\r\n      onCancel={handleCancel}\r\n      closable={!executing}\r\n      footer={\r\n        completed\r\n          ? []\r\n          : [\r\n              <Button key=\"back\" onClick={handleCancel} disabled={executing}>\r\n                Ask me later\r\n              </Button>,\r\n              <Button\r\n                key=\"submit\"\r\n                type=\"primary\"\r\n                loading={executing}\r\n                onClick={handleOk}\r\n              >\r\n                Migrate\r\n              </Button>,\r\n            ]\r\n      }\r\n    >\r\n      {completed ? (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"space-around\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <h2>Congratulations!</h2>\r\n          <div>Your migration has been successful.</div>\r\n          <Button type=\"primary\" onClick={handleOk}>\r\n            Close\r\n          </Button>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <p>\r\n            You are identified as liquidity provider that used v1 of Serum Swap.\r\n          </p>\r\n          <p>\r\n            Please click migrate button to move to new version of the contract\r\n          </p>\r\n          <p>During migration your wallet will ask for multiple approvals.</p>\r\n          <PoolAccounts legacy={true} />\r\n        </>\r\n      )}\r\n    </Modal>\r\n  );\r\n};\r\n","import React, {\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  Col,\r\n  Popover,\r\n  Row,\r\n  Table,\r\n  Tooltip,\r\n  Typography,\r\n} from \"antd\";\r\nimport { AppBar } from \"./../appBar\";\r\nimport { Settings } from \"../settings\";\r\nimport {\r\n  SettingOutlined,\r\n  TableOutlined,\r\n  OneToOneOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { PoolIcon } from \"../tokenIcon\";\r\nimport { Input } from \"antd\";\r\nimport \"./styles.less\";\r\nimport echarts from \"echarts\";\r\nimport { useEnrichedPools } from \"../../context/market\";\r\nimport { usePools } from \"../../utils/pools\";\r\nimport {\r\n  formatNumber,\r\n  formatPct,\r\n  formatUSD,\r\n  useLocalStorageState,\r\n} from \"../../utils/utils\";\r\nimport { PoolAddress } from \"../pool/address\";\r\nimport { PoolCard } from \"./../pool/card\";\r\nimport { MigrationModal } from \"../migration\";\r\nimport { HistoricalLiquidity, HistoricalVolume } from \"./historical\";\r\n\r\nconst { Text } = Typography;\r\n\r\nconst { Search } = Input;\r\n\r\nconst FlashText = (props: { text: string; val: number }) => {\r\n  const [activeClass, setActiveClass] = useState(\"\");\r\n  const [value] = useState(props.val);\r\n  useEffect(() => {\r\n    if (props.val !== value) {\r\n      setActiveClass(props.val > value ? \"flash-positive\" : \"flash-negative\");\r\n\r\n      setTimeout(() => setActiveClass(\"\"), 200);\r\n    }\r\n  }, [props.text, props.val, value]);\r\n\r\n  return <span className={activeClass}>{props.text}</span>;\r\n};\r\n\r\ninterface Totals {\r\n  liquidity: number;\r\n  volume: number;\r\n  fees: number;\r\n}\r\n\r\nconst DEFAULT_DISPLAY_TYPE = \"Table\";\r\n\r\nexport const ChartsView = React.memo(() => {\r\n  const [search, setSearch] = useState<string>(\"\");\r\n  const [totals, setTotals] = useState<Totals>(() => ({\r\n    liquidity: 0,\r\n    volume: 0,\r\n    fees: 0,\r\n  }));\r\n  const chartDiv = useRef<HTMLDivElement>(null);\r\n  const echartsRef = useRef<any>(null);\r\n  const { pools } = usePools();\r\n  const enriched = useEnrichedPools(pools);\r\n\r\n  const [infoDisplayType, setInfoDisplayType] = useLocalStorageState(\r\n    \"infoDisplayType\",\r\n    DEFAULT_DISPLAY_TYPE\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (chartDiv.current) {\r\n      echartsRef.current = echarts.init(chartDiv.current);\r\n    }\r\n\r\n    return () => {\r\n      echartsRef.current.dispose();\r\n    };\r\n  }, []);\r\n\r\n  // TODO: display user percent in the pool\r\n  // const { ownedPools } = useOwnedPools();\r\n\r\n  // TODO: create cache object with layout type, get, query, add\r\n\r\n  let searchRegex: RegExp | undefined = useMemo(() => {\r\n    try {\r\n      return new RegExp(search, \"i\");\r\n    } catch {\r\n      // ignore bad regex typed by user\r\n    }\r\n  }, [search]);\r\n\r\n  const updateChart = useCallback(() => {\r\n    if (echartsRef.current) {\r\n      echartsRef.current.setOption({\r\n        series: [\r\n          {\r\n            name: \"Liquidity\",\r\n            type: \"treemap\",\r\n            top: 0,\r\n            bottom: 10,\r\n            left: 30,\r\n            right: 30,\r\n            animation: false,\r\n            // visibleMin: 300,\r\n            label: {\r\n              show: true,\r\n              formatter: \"{b}\",\r\n            },\r\n            itemStyle: {\r\n              normal: {\r\n                borderColor: \"#000\",\r\n              },\r\n            },\r\n            breadcrumb: {\r\n              show: false,\r\n            },\r\n            data: enriched\r\n              .filter(\r\n                (row) => !search || !searchRegex || searchRegex.test(row.name)\r\n              )\r\n              .map((row) => {\r\n                return {\r\n                  value: row.liquidity,\r\n                  name: row.name,\r\n                  path: `Liquidity/${row.name}`,\r\n                  data: row,\r\n                };\r\n              }),\r\n          },\r\n        ],\r\n      });\r\n    }\r\n  }, [enriched, search, searchRegex]);\r\n\r\n  // Updates total values\r\n  useEffect(() => {\r\n    setTotals(\r\n      enriched.reduce(\r\n        (acc, item) => {\r\n          acc.liquidity = acc.liquidity + item.liquidity;\r\n          acc.volume = acc.volume + item.volume24h;\r\n          acc.fees = acc.fees + item.fees;\r\n          return acc;\r\n        },\r\n        { liquidity: 0, volume: 0, fees: 0 } as Totals\r\n      )\r\n    );\r\n\r\n    updateChart();\r\n  }, [enriched, updateChart, search]);\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Name\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n      render(text: string, record: any) {\r\n        return {\r\n          props: {\r\n            style: {},\r\n          },\r\n          children: (\r\n            <div style={{ display: \"flex\" }}>\r\n              <PoolIcon mintA={record.mints[0]} mintB={record.mints[1]} />\r\n              <a href={record.link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                {text}\r\n              </a>\r\n            </div>\r\n          ),\r\n        };\r\n      },\r\n    },\r\n    {\r\n      title: \"Liquidity\",\r\n      dataIndex: \"liquidity\",\r\n      key: \"liquidity\",\r\n      render(text: string, record: any) {\r\n        return {\r\n          props: {\r\n            style: { textAlign: \"right\" },\r\n          },\r\n          children: (\r\n            <div>\r\n              <div>{formatUSD.format(record.liquidity)}</div>\r\n              <div>\r\n                <Text type=\"secondary\" style={{ fontSize: 11 }}>\r\n                  {formatNumber.format(record.liquidityA)} {record.names[0]}\r\n                </Text>\r\n              </div>\r\n              <div>\r\n                <Text type=\"secondary\" style={{ fontSize: 11 }}>\r\n                  {formatNumber.format(record.liquidityB)} {record.names[1]}\r\n                </Text>\r\n              </div>\r\n            </div>\r\n          ),\r\n        };\r\n      },\r\n      sorter: (a: any, b: any) => a.liquidity - b.liquidity,\r\n      defaultSortOrder: \"descend\" as any,\r\n    },\r\n    {\r\n      title: \"Supply\",\r\n      dataIndex: \"supply\",\r\n      key: \"supply\",\r\n      render(text: string, record: any) {\r\n        return {\r\n          props: {\r\n            style: { textAlign: \"right\" },\r\n          },\r\n          children: <FlashText text={text} val={record.supply} />,\r\n        };\r\n      },\r\n      sorter: (a: any, b: any) => a.supply - b.supply,\r\n    },\r\n    {\r\n      title: \"Volume (24h)\",\r\n      dataIndex: \"volume\",\r\n      key: \"volume\",\r\n      render(text: string, record: any) {\r\n        return {\r\n          props: {\r\n            style: { textAlign: \"right\" },\r\n          },\r\n          children: (\r\n            <FlashText\r\n              text={formatUSD.format(record.volume24h)}\r\n              val={record.volume24h}\r\n            />\r\n          ),\r\n        };\r\n      },\r\n      sorter: (a: any, b: any) => a.volume24h - b.volume24h,\r\n    },\r\n    {\r\n      title: \"Fees (24h)\",\r\n      dataIndex: \"fees24h\",\r\n      key: \"fees24h\",\r\n      render(text: string, record: any) {\r\n        return {\r\n          props: {\r\n            style: { textAlign: \"right\" },\r\n          },\r\n          children: (\r\n            <FlashText\r\n              text={formatUSD.format(record.fees24h)}\r\n              val={record.fees24h}\r\n            />\r\n          ),\r\n        };\r\n      },\r\n      sorter: (a: any, b: any) => a.fees24h - b.fees24h,\r\n    },\r\n    {\r\n      title: \"APY\",\r\n      dataIndex: \"apy\",\r\n      key: \"apy\",\r\n      render(text: string, record: any) {\r\n        return {\r\n          props: {\r\n            style: { textAlign: \"right\" },\r\n          },\r\n          children: formatPct.format(record.apy),\r\n        };\r\n      },\r\n      sorter: (a: any, b: any) => a.apy - b.apy,\r\n    },\r\n    {\r\n      title: \"Address\",\r\n      dataIndex: \"address\",\r\n      key: \"address\",\r\n      render(text: string, record: any) {\r\n        return {\r\n          props: {\r\n            style: { fontFamily: \"monospace\" } as React.CSSProperties,\r\n          },\r\n          children: <PoolAddress pool={record.raw} />,\r\n        };\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <AppBar\r\n        right={\r\n          <Popover\r\n            placement=\"topRight\"\r\n            title=\"Settings\"\r\n            content={<Settings />}\r\n            trigger=\"click\"\r\n          >\r\n            <Button\r\n              shape=\"circle\"\r\n              size=\"large\"\r\n              type=\"text\"\r\n              icon={<SettingOutlined />}\r\n            />\r\n          </Popover>\r\n        }\r\n      />\r\n      <div className=\"info-header\">\r\n        <Search\r\n          className=\"search-input\"\r\n          placeholder=\"Filter\"\r\n          type=\"search\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          onSearch={(value) => setSearch(value)}\r\n          style={{ width: 200 }}\r\n        />\r\n        <Tooltip title=\"Show as table\">\r\n          <Button\r\n            size=\"small\"\r\n            type={infoDisplayType === \"Table\" ? \"primary\" : \"text\"}\r\n            onClick={() => setInfoDisplayType(\"Table\")}\r\n            icon={<TableOutlined />}\r\n          />\r\n        </Tooltip>\r\n        <Tooltip title=\"Show as cards\">\r\n          <Button\r\n            size=\"small\"\r\n            type={infoDisplayType === \"Card\" ? \"primary\" : \"text\"}\r\n            onClick={() => setInfoDisplayType(\"Card\")}\r\n            icon={<OneToOneOutlined />}\r\n          />\r\n        </Tooltip>\r\n      </div>\r\n      <Row gutter={16} style={{ padding: \"0px 30px\", margin: \"30px 0px\" }}>\r\n        <Col span={12}>\r\n          <Card>\r\n            <HistoricalLiquidity current={formatUSD.format(totals.liquidity)} />\r\n          </Card>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Card>\r\n            <HistoricalVolume current={formatUSD.format(totals.volume)} />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n      <div ref={chartDiv} style={{ height: \"250px\", width: \"100%\" }} />\r\n      {infoDisplayType === \"Table\" ? (\r\n        <Table\r\n          dataSource={enriched.filter(\r\n            (row) => !search || !searchRegex || searchRegex.test(row.name)\r\n          )}\r\n          columns={columns}\r\n          size=\"small\"\r\n          pagination={{ pageSize: 10 }}\r\n        />\r\n      ) : (\r\n        <div className=\"pool-grid\">\r\n          {enriched\r\n            .sort((a, b) => b.liquidity - a.liquidity)\r\n            .map((p) => {\r\n              return <PoolCard pool={p.raw} />;\r\n            })}\r\n        </div>\r\n      )}\r\n      <MigrationModal />\r\n    </>\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport { Button, Popover } from \"antd\";\r\nimport { useOwnedPools } from \"../../utils/pools\";\r\nimport \"./view.less\";\r\nimport { Settings } from \"./../settings\";\r\nimport { SettingOutlined } from \"@ant-design/icons\";\r\nimport { AppBar } from \"./../appBar\";\r\nimport { useWallet } from \"../../context/wallet\";\r\nimport { PoolCard } from \"./card\";\r\nimport { MigrationModal } from \"../migration\";\r\n\r\nexport const PoolOverview = () => {\r\n  const owned = useOwnedPools();\r\n  const { connected } = useWallet();\r\n\r\n  return (\r\n    <>\r\n      <AppBar\r\n        right={\r\n          <Popover\r\n            placement=\"topRight\"\r\n            title=\"Settings\"\r\n            content={<Settings />}\r\n            trigger=\"click\"\r\n          >\r\n            <Button\r\n              shape=\"circle\"\r\n              size=\"large\"\r\n              type=\"text\"\r\n              icon={<SettingOutlined />}\r\n            />\r\n          </Popover>\r\n        }\r\n      />\r\n      <div className=\"pool-grid\">\r\n        {owned.map((o) => (\r\n          <PoolCard\r\n            key={o.pool.pubkeys.account.toBase58()}\r\n            pool={o.pool}\r\n            account={o.account}\r\n          />\r\n        ))}\r\n        {!connected && <h3>Connect to a wallet to view your liquidity.</h3>}\r\n      </div>\r\n      <MigrationModal />\r\n    </>\r\n  );\r\n};\r\n","import { Button, Card, Popover, Spin, Typography } from \"antd\";\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport {\r\n  useConnection,\r\n  useConnectionConfig,\r\n  useSlippageConfig,\r\n} from \"../../utils/connection\";\r\nimport { useWallet } from \"../../context/wallet\";\r\nimport { CurrencyInput } from \"../currencyInput\";\r\nimport {\r\n  LoadingOutlined,\r\n  SwapOutlined,\r\n  QuestionCircleOutlined,\r\n  SettingOutlined,\r\n} from \"@ant-design/icons\";\r\nimport {\r\n  swap,\r\n  usePoolForBasket,\r\n  PoolOperation,\r\n  LIQUIDITY_PROVIDER_FEE,\r\n} from \"../../utils/pools\";\r\nimport { notify } from \"../../utils/notifications\";\r\nimport { useCurrencyPairState } from \"../../utils/currencyPair\";\r\nimport { generateActionLabel, POOL_NOT_AVAILABLE, SWAP_LABEL } from \"../labels\";\r\nimport \"./trade.less\";\r\nimport { colorWarning, getTokenName } from \"../../utils/utils\";\r\nimport { AdressesPopover } from \"../pool/address\";\r\nimport { PoolInfo } from \"../../models\";\r\nimport { useEnrichedPools } from \"../../context/market\";\r\nimport { AppBar } from \"../appBar\";\r\nimport { Settings } from \"../settings\";\r\nimport { MigrationModal } from \"../migration\";\r\n\r\nconst { Text } = Typography;\r\n\r\nconst antIcon = <LoadingOutlined style={{ fontSize: 24 }} spin />;\r\n\r\nexport const TradeEntry = () => {\r\n  const { wallet, connect, connected } = useWallet();\r\n  const connection = useConnection();\r\n  const [pendingTx, setPendingTx] = useState(false);\r\n  const {\r\n    A,\r\n    B,\r\n    setLastTypedAccount,\r\n    setPoolOperation,\r\n  } = useCurrencyPairState();\r\n  const pool = usePoolForBasket([A?.mintAddress, B?.mintAddress]);\r\n  const { slippage } = useSlippageConfig();\r\n  const { tokenMap } = useConnectionConfig();\r\n\r\n  const swapAccounts = () => {\r\n    const tempMint = A.mintAddress;\r\n    const tempAmount = A.amount;\r\n    A.setMint(B.mintAddress);\r\n    A.setAmount(B.amount);\r\n    B.setMint(tempMint);\r\n    B.setAmount(tempAmount);\r\n    // @ts-ignore\r\n    setPoolOperation((op: PoolOperation) => {\r\n      switch (+op) {\r\n        case PoolOperation.SwapGivenInput:\r\n          return PoolOperation.SwapGivenProceeds;\r\n        case PoolOperation.SwapGivenProceeds:\r\n          return PoolOperation.SwapGivenInput;\r\n        case PoolOperation.Add:\r\n          return PoolOperation.SwapGivenInput;\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSwap = async () => {\r\n    if (A.account && B.mintAddress) {\r\n      try {\r\n        setPendingTx(true);\r\n\r\n        const components = [\r\n          {\r\n            account: A.account,\r\n            mintAddress: A.mintAddress,\r\n            amount: A.convertAmount(),\r\n          },\r\n          {\r\n            mintAddress: B.mintAddress,\r\n            amount: B.convertAmount(),\r\n          },\r\n        ];\r\n\r\n        await swap(connection, wallet, components, slippage, pool);\r\n      } catch {\r\n        notify({\r\n          description:\r\n            \"Please try again and approve transactions from your wallet\",\r\n          message: \"Swap trade cancelled.\",\r\n          type: \"error\",\r\n        });\r\n      } finally {\r\n        setPendingTx(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"input-card\">\r\n        <div className=\"desBox\">\r\n          <div className=\"desL\">\r\n            <div className=\"font1\">兑换</div>\r\n            <div className=\"font2\">即时兑换代币</div>\r\n          </div>\r\n          <div className=\"desR\">\r\n            <img src={require('../../assets/img/icon1.png')} alt=\"\"/>\r\n            <img src={require('../../assets/img/icon2.png')} alt=\"\" />\r\n            <AdressesPopover pool={pool} />\r\n          </div>\r\n        </div>\r\n        <CurrencyInput\r\n          title=\"Input\"\r\n          onInputChange={(val: any) => {\r\n            setPoolOperation(PoolOperation.SwapGivenInput);\r\n            if (A.amount !== val) {\r\n              setLastTypedAccount(A.mintAddress);\r\n            }\r\n\r\n            A.setAmount(val);\r\n          }}\r\n          amount={A.amount}\r\n          mint={A.mintAddress}\r\n          onMintChange={(item) => {\r\n            A.setMint(item);\r\n          }}\r\n        />\r\n        <Button type=\"primary\" className=\"swap-button\" onClick={swapAccounts}>\r\n          ⇅\r\n        </Button>\r\n        <CurrencyInput\r\n          title=\"To (Estimate)\"\r\n          onInputChange={(val: any) => {\r\n            setPoolOperation(PoolOperation.SwapGivenProceeds);\r\n            if (B.amount !== val) {\r\n              setLastTypedAccount(B.mintAddress);\r\n            }\r\n\r\n            B.setAmount(val);\r\n          }}\r\n          amount={B.amount}\r\n          mint={B.mintAddress}\r\n          onMintChange={(item) => {\r\n            B.setMint(item);\r\n          }}\r\n        />\r\n      </div>\r\n      <Button\r\n        className=\"trade-button\"\r\n        type=\"primary\"\r\n        size=\"large\"\r\n        onClick={connected ? handleSwap : connect}\r\n        style={{ width: \"100%\" }}\r\n        disabled={\r\n          connected &&\r\n          (pendingTx ||\r\n            !A.account ||\r\n            !B.mintAddress ||\r\n            A.account === B.account ||\r\n            !A.sufficientBalance() ||\r\n            !pool)\r\n        }\r\n      >\r\n        {generateActionLabel(\r\n          !pool\r\n            ? POOL_NOT_AVAILABLE(\r\n                getTokenName(tokenMap, A.mintAddress),\r\n                getTokenName(tokenMap, B.mintAddress)\r\n              )\r\n            : SWAP_LABEL,\r\n          connected,\r\n          tokenMap,\r\n          A,\r\n          B,\r\n          true\r\n        )}\r\n        {pendingTx && <Spin indicator={antIcon} className=\"add-spinner\" />}\r\n      </Button>\r\n      <TradeInfo pool={pool} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport const TradeInfo = (props: { pool?: PoolInfo }) => {\r\n  const { A, B } = useCurrencyPairState();\r\n  const { pool } = props;\r\n  const { slippage } = useSlippageConfig();\r\n  const pools = useMemo(() => (pool ? [pool] : []), [pool]);\r\n  const enriched = useEnrichedPools(pools);\r\n\r\n  const [amountOut, setAmountOut] = useState(0);\r\n  const [priceImpact, setPriceImpact] = useState(0);\r\n  const [lpFee, setLpFee] = useState(0);\r\n  const [exchangeRate, setExchangeRate] = useState(0);\r\n  const [priceAccount, setPriceAccount] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!pool || enriched.length === 0) {\r\n      return;\r\n    }\r\n    if (B.amount) {\r\n      const minAmountOut = parseFloat(B?.amount) * (1 - slippage);\r\n      setAmountOut(minAmountOut);\r\n    }\r\n    const liqA = enriched[0].liquidityA;\r\n    const liqB = enriched[0].liquidityB;\r\n    const supplyRatio = liqA / liqB;\r\n    // We need to make sure the order matched the pool's accounts order\r\n    const enrichedA = A.mintAddress === enriched[0].mints[0] ? A : B;\r\n    const enrichedB = enrichedA.mintAddress === A.mintAddress ? B : A;\r\n    const calculatedRatio =\r\n      parseFloat(enrichedA.amount) / parseFloat(enrichedB.amount);\r\n    // % difference between pool ratio and  calculated ratio\r\n    setPriceImpact(Math.abs(100 - (calculatedRatio * 100) / supplyRatio));\r\n\r\n    // 6 decimals without trailing zeros\r\n    const lpFeeStr = (parseFloat(A.amount) * LIQUIDITY_PROVIDER_FEE).toFixed(6);\r\n    setLpFee(parseFloat(lpFeeStr));\r\n\r\n    if (priceAccount === B.mintAddress) {\r\n      setExchangeRate(parseFloat(B.amount) / parseFloat(A.amount));\r\n    } else {\r\n      setExchangeRate(parseFloat(A.amount) / parseFloat(B.amount));\r\n    }\r\n  }, [A, B, slippage, pool, enriched, priceAccount]);\r\n\r\n  const handleSwapPriceInfo = () => {\r\n    if (priceAccount !== B.mintAddress) {\r\n      setPriceAccount(B.mintAddress);\r\n    } else {\r\n      setPriceAccount(A.mintAddress);\r\n    }\r\n  };\r\n  return !!parseFloat(B.amount) ? (\r\n    <div className=\"pool-card\" style={{ width: \"initial\" }}>\r\n      <div className=\"pool-card-row\">\r\n        <Text className=\"pool-card-cell\">Price</Text>\r\n        <div className=\"pool-card-cell \" title={exchangeRate.toString()}>\r\n          <Button\r\n            shape=\"circle\"\r\n            size=\"middle\"\r\n            type=\"text\"\r\n            icon={<SwapOutlined />}\r\n            onClick={handleSwapPriceInfo}\r\n          >\r\n            {exchangeRate.toFixed(6)}&nbsp;\r\n            {priceAccount === B.mintAddress ? B.name : A.name} per&nbsp;\r\n            {priceAccount === B.mintAddress ? A.name : B.name}&nbsp;\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div className=\"pool-card-row\">\r\n        <Text className=\"pool-card-cell\">\r\n          <Popover\r\n            trigger=\"hover\"\r\n            content={\r\n              <div style={{ width: 300 }}>\r\n                You transaction will revert if there is a large, unfavorable\r\n                price movement before it is confirmed.\r\n              </div>\r\n            }\r\n          >\r\n            Minimum Received <QuestionCircleOutlined />\r\n          </Popover>\r\n        </Text>\r\n        <div className=\"pool-card-cell \" title={amountOut.toString()}>\r\n          {amountOut.toFixed(6)} {B.name}\r\n        </div>\r\n      </div>\r\n      <div className=\"pool-card-row\">\r\n        <Text className=\"pool-card-cell\">\r\n          <Popover\r\n            trigger=\"hover\"\r\n            content={\r\n              <div style={{ width: 300 }}>\r\n                The difference between the market price and estimated price due\r\n                to trade size.\r\n              </div>\r\n            }\r\n          >\r\n            Price Impact <QuestionCircleOutlined />\r\n          </Popover>\r\n        </Text>\r\n        <div\r\n          className=\"pool-card-cell \"\r\n          title={priceImpact.toString()}\r\n          style={{ color: colorWarning(priceImpact) }}\r\n        >\r\n          {priceImpact < 0.01 ? \"< 0.01%\" : priceImpact.toFixed(3) + \"%\"}\r\n        </div>\r\n      </div>\r\n      <div className=\"pool-card-row\">\r\n        <Text className=\"pool-card-cell\">\r\n          <Popover\r\n            trigger=\"hover\"\r\n            content={\r\n              <div style={{ width: 300 }}>\r\n                A portion of each trade ({LIQUIDITY_PROVIDER_FEE * 100}%) goes\r\n                to liquidity providers as a protocol incentive.\r\n              </div>\r\n            }\r\n          >\r\n            Liquidity Provider Fee <QuestionCircleOutlined />\r\n          </Popover>\r\n        </Text>\r\n        <div className=\"pool-card-cell \" title={lpFee.toString()}>\r\n          {lpFee} {A.name}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nexport const TradeView = () => {\r\n  return (\r\n    <>\r\n      <AppBar\r\n        right={\r\n          <Popover\r\n            placement=\"topRight\"\r\n            title=\"Settings\"\r\n            content={<Settings />}\r\n            trigger=\"click\"\r\n          >\r\n            <Button\r\n              shape=\"circle\"\r\n              size=\"large\"\r\n              type=\"text\"\r\n              icon={<SettingOutlined />}\r\n            />\r\n          </Popover>\r\n        }\r\n      />\r\n      <Card\r\n        className=\"exchange-card\"\r\n        headStyle={{ padding: 0 }}\r\n        bodyStyle={{ position: \"relative\" }}\r\n      >\r\n        <TradeEntry />\r\n      </Card>\r\n      <MigrationModal />\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Button, Card, Popover } from \"antd\";\r\nimport { TradeEntry } from \"./trade\";\r\nimport { AddToLiquidity } from \"./pool/add\";\r\nimport { Settings } from \"./settings\";\r\nimport { SettingOutlined } from \"@ant-design/icons\";\r\nimport { AppBar } from \"./appBar\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nexport const ExchangeView = (props: {}) => {\r\n  const tabStyle: React.CSSProperties = { width: 120 };\r\n  const tabList = [\r\n    {\r\n      key: \"trade\",\r\n      tab: <div style={tabStyle}>Trade</div>,\r\n      render: () => {\r\n        return <TradeEntry />;\r\n      },\r\n    },\r\n    {\r\n      key: \"pool\",\r\n      tab: <div style={tabStyle}>Pool</div>,\r\n      render: () => {\r\n        return <AddToLiquidity />;\r\n      },\r\n    },\r\n    {\r\n      key: \"assets\",\r\n      tab: <div style={tabStyle}>资产桥</div>,\r\n      render: () => {\r\n        return <AddToLiquidity />;\r\n      },\r\n    },\r\n  ];\r\n\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const activeTab = location.pathname.indexOf(\"add\") < 0 ? \"trade\" : \"pool\";\r\n\r\n  const handleTabChange = (key: any) => {\r\n    if (activeTab !== key) {\r\n      if (key === \"trade\") {\r\n        history.push(\"/\");\r\n      } else {\r\n        history.push(\"/add\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AppBar\r\n        right={\r\n          <Popover\r\n            placement=\"topRight\"\r\n            title=\"Settings\"\r\n            content={<Settings />}\r\n            trigger=\"click\"\r\n          >\r\n            <Button\r\n              shape=\"circle\"\r\n              size=\"large\"\r\n              type=\"text\"\r\n              icon={<SettingOutlined />}\r\n            />\r\n          </Popover>\r\n        }\r\n      />\r\n      <Card\r\n        className=\"exchange-card\"\r\n        headStyle={{ padding: 0 }}\r\n        bodyStyle={{ position: \"relative\" }}\r\n        tabList={tabList}\r\n        tabProps={{\r\n          tabBarGutter: 0,\r\n        }}\r\n        activeTabKey={activeTab}\r\n        onTabChange={(key) => {\r\n          handleTabChange(key);\r\n        }}\r\n      >\r\n        <div className=\"contentBox\">\r\n          {tabList.find((t) => t.key === activeTab)?.render()}\r\n        </div>\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n","import { HashRouter, Route } from \"react-router-dom\";\r\nimport React from \"react\";\r\nimport { ChartsView } from \"./components/charts\";\r\n\r\nimport { WalletProvider } from \"./context/wallet\";\r\nimport { ConnectionProvider } from \"./utils/connection\";\r\nimport { AccountsProvider } from \"./utils/accounts\";\r\nimport { CurrencyPairProvider } from \"./utils/currencyPair\";\r\nimport { MarketProvider } from \"./context/market\";\r\nimport { PoolOverview } from \"./components/pool/view\";\r\nimport { ExchangeView } from \"./components/exchange\";\r\n\r\nexport function Routes() {\r\n  return (\r\n    <>\r\n      <HashRouter basename={\"/\"}>\r\n        <ConnectionProvider>\r\n          <WalletProvider>\r\n            <AccountsProvider>\r\n              <MarketProvider>\r\n                <CurrencyPairProvider>\r\n                  <Route exact path=\"/swap/\" component={ExchangeView} />\r\n                  <Route exact path=\"/swap/add\" component={ExchangeView} />\r\n                  <Route exact path=\"/swap/info\" component={() => <ChartsView />} />\r\n                  <Route\r\n                    exact\r\n                    path=\"/swap/pool\"\r\n                    component={() => <PoolOverview />}\r\n                  />\r\n                </CurrencyPairProvider>\r\n              </MarketProvider>\r\n            </AccountsProvider>\r\n          </WalletProvider>\r\n        </ConnectionProvider>\r\n      </HashRouter>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Menu } from \"antd\";\r\nimport { AppstoreOutlined, MailOutlined, SettingOutlined } from '@ant-design/icons';\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport './styles.less'\r\nconst { SubMenu } = Menu;\r\n\r\n\r\nexport const AppMenu = (props: { left?: JSX.Element; right?: JSX.Element }) => {\r\n  // const location = useLocation();\r\n  // const history = useHistory();\r\n  const handleClick =()=>{\r\n    \r\n  }\r\n  const LeftMenu = (\r\n    <div className=\"App-Menu\">\r\n      <div className=\"App-Menu-left\">\r\n        <Menu\r\n          onClick={handleClick}\r\n          style={{ width: 240 }}\r\n          defaultSelectedKeys={['/']}\r\n          defaultOpenKeys={['sub1']}\r\n          mode=\"inline\"\r\n        >\r\n          <Menu.Item key=\"1\" icon={<img src={require('../../assets/img/nav/nav1.png')} className=\"navIcon\" />}>\r\n              <Link\r\n                  to={{\r\n                    pathname: \"/home\",\r\n                  }}\r\n            >\r\n                  首页\r\n              </Link>\r\n          </Menu.Item>\r\n          <SubMenu key=\"sub1\" icon={<img src={require('../../assets/img/nav/nav2.png')} className=\"navIcon\" />} title=\"交易\">\r\n              <Menu.Item key=\"/swap\">\r\n                <Link\r\n                  to={{\r\n                    pathname: \"/swap/\",\r\n                  }}\r\n                >\r\n                  兑换\r\n                </Link>\r\n              </Menu.Item>\r\n              <Menu.Item key=\"/swap/add\">\r\n                <Link\r\n                  to={{\r\n                    pathname: \"/swap/add\",\r\n                  }}\r\n                >\r\n                  流动性\r\n                </Link>\r\n              </Menu.Item>\r\n              <Menu.Item key=\"/swap/info\">\r\n                <Link\r\n                  to={{\r\n                    pathname: \"/swap/info\",\r\n                  }}\r\n                >\r\n                资产桥\r\n                </Link>\r\n              </Menu.Item>\r\n          </SubMenu>\r\n        </Menu>\r\n        <div className=\"bottomBox\">\r\n          <div className=\"infor\">\r\n            <p className=\"logoImg\">\r\n              <img src={require('../../assets/img/nav/logo.png')} alt=\"\" />\r\n              $18.356\r\n            </p>\r\n            <p className=\"lang\">\r\n              <img src={require('../../assets/img/nav/lang.png')} alt=\"\" />\r\n              EN\r\n            </p>\r\n          </div>\r\n          <div className=\"relationBox\">\r\n            <a href=\"\">\r\n              <img src={require('../../assets/img/nav/b1.png')} alt=\"\"/>\r\n            </a>\r\n            <a href=\"\">\r\n              <img src={require('../../assets/img/nav/b2.png')} alt=\"\"/>\r\n            </a>\r\n            <a href=\"\">\r\n              <img src={require('../../assets/img/nav/b3.png')} alt=\"\"/>\r\n            </a>\r\n            <a href=\"\">\r\n              <img src={require('../../assets/img/nav/b4.png')} alt=\"\"/>\r\n            </a>\r\n            <a href=\"\">\r\n              <img src={require('../../assets/img/nav/b5.png')} alt=\"\"/>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return LeftMenu;\r\n};\r\n\r\n","import React from \"react\";\r\nimport \"./style.less\";\r\nimport { Routes } from \"../../routes\";\r\nimport {AppMenu} from '../../components/menu'\r\nfunction Main() {\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"main-content\">\r\n        <AppMenu></AppMenu>\r\n        <div className=\"main-body\">\r\n          <Routes />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\n// import { Link, useHistory } from \"react-router-dom\";\r\nimport './home.less'\r\n\r\n\r\nexport const Home = (props: { left?: JSX.Element; right?: JSX.Element }) => {\r\n  // const history = useHistory();\r\n\r\n  const HomePage = (\r\n    <div className=\"homePage\">\r\n      <div className=\"homeContent\">\r\n        <div className=\"maxWidth\">\r\n          <div className=\"homeHeader\">\r\n            <img src={require('../../assets/img/logo.png')} alt=\"\" className=\"homeLogo\"/>\r\n          </div>\r\n          <div className=\"bannerBox\">\r\n            <div className=\"banner\">\r\n              <div className=\"font1\">满足一切金融需求的<span className=\"font5\">DEX</span></div>\r\n              <div className=\"font2\">AMM<span className=\"font4\"> | </span>IDO<span className=\"font4\"> | </span>DeF<span className=\"font4\"> | 高易用性链上基础设施</span></div>\r\n              <div className=\"font3\">BANANASWAP 致力于为用户提供超 CEX 级别的交易体验，以建立一个简单易用、可组合性强、可灵活定制的去中心化金融基础设施，满足不同用户间的去中心化金融服务需求。</div>\r\n              <div className=\"handBtn\">LAUNCH APP</div>\r\n            </div>\r\n            <img src={require('../../assets/img/homeSubBg1.png')} alt=\"\"/>\r\n          </div>\r\n          <div className=\"section1\">\r\n            <div className=\"font1\">前所未有的交易体验<span className=\"subfont\">IN SOLANA</span></div>\r\n            <div className=\"cardBox\">\r\n              <div className=\"cardItem\">\r\n                <img src={require('../../assets/img/homeImg1.png')} alt=\"\" className=\"cardImg\" />\r\n                <p className=\"cardFont1\">灵活做市</p>\r\n                <p className=\"cardFont2\">流动性提供者将拥有更大的灵活性和更高的资金利用率，所有交易者将享受更强大的流动性。</p>\r\n              </div>\r\n              <div className=\"cardItem\">\r\n                <img src={require('../../assets/img/homeImg2.png')} alt=\"\" className=\"cardImg\" />\r\n                <p className=\"cardFont1\">资产发行</p>\r\n                <p className=\"cardFont2\">体验轻松多样化的上币及流动性创建流程，投资者及项目方双向权益皆可获得最大保障。</p>\r\n              </div>\r\n              <div className=\"cardItem\">\r\n                <img src={require('../../assets/img/homeImg3.png')} alt=\"\" className=\"cardImg\" />\r\n                <p className=\"cardFont1\">一站式DeFi工具</p>\r\n                <p className=\"cardFont2\">一站式完成你的DeFi市场操作，包括交易，挖矿，质押，IDO及多样化功能。</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"section2\">\r\n            <div className=\"barBox\">\r\n              强大的交易工具及基础模块\r\n              <div className=\"addImg\">\r\n                <img src={require('../../assets/img/homeIcon2.png')} alt=\"\" className=\"cardImg\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"moduleBox\">\r\n              <div className=\"tabTitle\">\r\n                <p>区间做市</p>\r\n                <p>限价订单</p>\r\n                <p>LP/NFT</p>\r\n                <p>费用调控</p>\r\n                <p>聚合看板</p>\r\n                <p>资产图表</p>\r\n              </div>\r\n              <div className=\"tabContent\">\r\n                <div className=\"tabLeft\">\r\n                  <p className=\"font1\">完备的资产看板</p>\r\n                  <p className=\"font2\">提供一套可视化的聚合看板和资产交易仪表盘，一站式满足所有数据需求，支持外部API接入，为更复杂的做市组合提供更简单选择。</p>\r\n                </div>\r\n                <div className=\"switchBox\">\r\n                  <div className=\"switch\">\r\n                    <img src={require('../../assets/img/dome1.png')} alt=\"\" className=\"tabImg\"/>\r\n                    <img src={require('../../assets/img/dome2.png')} alt=\"\" className=\"tabImg\"/>\r\n                  </div>\r\n                  <div className=\"slickBox\">\r\n                    <span className=\"slickDots active\"></span>\r\n                    <span className=\"slickDots\"></span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"section3\">\r\n            <div className=\"contentBox\">\r\n              <img src={require('../../assets/img/homeImg4.png')} alt=\"\" className=\"tabImg\" />\r\n              <div className=\"content\">\r\n                <p className=\"font1\">BANA CLUB</p>\r\n                <p className=\"font2\">BANANA CLUB是一个基于去中心化治理的会员联盟。BANANA CLUB由三种类型的角色构成，也代表整个系统中的三个生态，平台、会员、委员会，带动Solana生态乃至整个DeFi世界的良性发展。 </p>\r\n                <p className=\"font2\">vBANA 是俱乐部联盟中的身份识别卡片。持有 vBANA，将享有手续费分红折扣、IDO认购份额、提案和投票权以及诸如预言机、仪表盘数据调用权限等各平台独立权益。 </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"section4\">\r\n            <p className=\"title\">VBANA权益联盟</p>\r\n            <div className=\"equity\">\r\n              <div className=\"equityL\">\r\n                <div className=\"equityLItem\">\r\n                  <p><i>BANA</i></p>\r\n                  <img src={require('../../assets/img/homeIcon.png')} className=\"placeholder\" alt=\"\"/>\r\n                </div>\r\n                <div className=\"equityLItem\">\r\n                  <p><i>SRM</i></p>\r\n                  <img src={require('../../assets/img/homeIcon.png')} className=\"placeholder\" alt=\"\"/>\r\n                </div>\r\n                <div className=\"equityLItem\">\r\n                  <p><i>OXY</i></p>\r\n                  <img src={require('../../assets/img/homeIcon.png')} className=\"placeholder\" alt=\"\"/>\r\n                </div>\r\n                <div className=\"equityLItem\">\r\n                  <div className=\"dian\"><span></span><span></span><span></span></div>\r\n                  <p className=\"placeholder\"></p>\r\n                </div>\r\n                <div className=\"equityLItem\">\r\n                  <p><i>UNI</i></p>\r\n                  <img src={require('../../assets/img/homeIcon.png')} className=\"placeholder\" alt=\"\"/>\r\n                </div>\r\n                <div className=\"position position1\"><i>DeFi权益币资产池<br />（白名单扩展）</i></div>\r\n                <div className=\"position position2\"><i>将DeFi平台权益币抵<br />押进一个资产池</i></div>\r\n                <div className=\"position position3\"><i>资格评定<br />（白名单）</i></div>\r\n              </div>\r\n              <div className=\"equityC\">\r\n                <p className=\"font1\"><i>vBANA <br /> BANANA CLUB</i></p>\r\n                <p className=\"font2\"><i>全品牌会员生态联盟</i></p>\r\n                <p className=\"font3\"><i>按照不同资产成分铸造合成vBANA，根据vBANA类型享受生态联盟中的所有平台权益委员会</i></p>\r\n              </div>\r\n              <div className=\"equityR\">\r\n                <div className=\"equityRItem\">\r\n                  <p className=\"placeholder\"></p>\r\n                  <div className=\"equityRSubItem\">\r\n                    <p className=\"classify\"><i>青香蕉</i></p>\r\n                    <p className=\"classifyInfo\"><i>获得生态联盟的手续<br/>费分红</i></p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"equityRItem\">\r\n                  <img src={require('../../assets/img/homeIcon.png')} alt=\"\" className=\"placeholder\" />\r\n                  <div className=\"equityRSubItem\">\r\n                    <p className=\"classify\"><i>银香蕉</i></p>\r\n                    <p className=\"classifyInfo\"><i>享受生态联盟的手续<br/>费折扣</i></p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"equityRItem\">\r\n                  <p className=\"placeholder\"></p>\r\n                  <div className=\"equityRSubItem\">\r\n                    <p className=\"classify\"><i>金香蕉</i></p>\r\n                    <p className=\"classifyInfo\"><i>享受生态联盟的IDO<br/>认购份额</i></p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"position position1\"><i>兼具NFT功能，收藏、<br />转移、拍卖 …</i></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"section5\">\r\n            <p className=\"hen\"></p>\r\n            <p className=\"font1\">路线图</p>\r\n            <div className=\"headerBox\">\r\n              <p>2021 Q3</p>\r\n              <p className=\"active\">2021 Q4</p>\r\n              <p>2022 Q1</p>\r\n              <p>2022 Q2</p>\r\n              <p>2022 Q3</p>\r\n            </div>\r\n            <div className=\"contentBox\">\r\n              <ul>\r\n                <li>完成BANANASWAP整体设计架构</li>\r\n                <li>发布SOLANA上的测试版本</li>\r\n                <li>合约代码审计</li>\r\n                <li>AMM去中心化交易平台</li>\r\n              </ul>\r\n              <ul>\r\n                <li>AMM流动性聚合</li>\r\n                <li>支持范围限价订单</li>\r\n                <li>价格区间流动性</li>\r\n                <li>提供非同质化流动性证明</li>\r\n                <li>引入多级费率模型</li>\r\n                <li>TWAP历史预言机</li>\r\n              </ul>\r\n              <ul>\r\n                <li>BNANACLUB</li>\r\n                <li>NFT交易拍卖</li>\r\n                <li>NFT游戏分发平台</li>\r\n                <li>NFT包装资产收益管理</li>\r\n                <li>NFT碎片化解决方案</li>\r\n              </ul>\r\n              <ul>\r\n                <li>衍生品</li>\r\n                <li>合成资产</li>\r\n                <li>杠杆借贷</li>\r\n                <li>永续合约</li>\r\n                <li>二元期权</li>\r\n              </ul>\r\n              <ul>\r\n                <li>启动多链部署计划</li>\r\n                <li>混合型跨链桥</li>\r\n                <li>跨链资产兑换</li>\r\n                <li>聚合交易</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <div className=\"section6\">\r\n            <p className=\"line\"></p>\r\n            <div className=\"logoBox\">\r\n              <img src={require('../../assets/img/logo.png')} alt=\"\" />\r\n              <p>EMAIL：CONTACT@BANANASWAP.NET</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <img src={require('../../assets/img/homeSubBg2.png')} alt=\"\" className=\"footBg\"/>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return HomePage;\r\n};\r\n\r\n","import React from \"react\";\r\nimport {Link,Route,Switch,Redirect} from 'react-router-dom'\r\nimport \"./App.less\";\r\nimport Main from \"./components/main/main\";\r\nimport {Home} from \"./components/home\";\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      {/* <Link className=\"list-group-item\" to=\"/\"></Link> */}\r\n      {/* <Link className=\"list-group-item\" to=\"/swap\">swap</Link> */}\r\n      <Switch>\r\n        <Route path=\"/home\" component={Home} />\r\n        <Route path=\"/swap\" component={Main} />\r\n        <Redirect to=\"/home\"/>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {HashRouter} from 'react-router-dom'\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter>\r\n      <App />\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import React from \"react\";\r\nimport { Typography } from \"antd\";\r\nimport { shortenAddress } from \"./../utils/utils\";\r\nimport { PublicKey } from \"@solana/web3.js\";\r\n\r\nexport const ExplorerLink = (props: {\r\n  address: string | PublicKey;\r\n  type: string;\r\n  code?: boolean;\r\n  style?: React.CSSProperties;\r\n  length?: number;\r\n}) => {\r\n  const { type, code } = props;\r\n\r\n  const address =\r\n    typeof props.address === \"string\"\r\n      ? props.address\r\n      : props.address?.toBase58();\r\n\r\n  if (!address) {\r\n    return null;\r\n  }\r\n\r\n  const length = props.length ?? 9;\r\n\r\n  return (\r\n    <a\r\n      href={`https://explorer.solana.com/${type}/${address}`}\r\n      // eslint-disable-next-line react/jsx-no-target-blank\r\n      target=\"_blank\"\r\n      title={address}\r\n      style={props.style}\r\n    >\r\n      {code ? (\r\n        <Typography.Text style={props.style} code>\r\n          {shortenAddress(address, length)}\r\n        </Typography.Text>\r\n      ) : (\r\n        shortenAddress(address, length)\r\n      )}\r\n    </a>\r\n  );\r\n};\r\n","import BN from 'bn.js';\r\nimport { useCallback, useState } from \"react\";\r\nimport { MintInfo } from \"@solana/spl-token\";\r\n\r\nimport { PoolInfo, TokenAccount } from \"./../models\";\r\nimport { TokenInfo } from \"@solana/spl-token-registry\";\r\n\r\nexport type KnownTokenMap = Map<string, TokenInfo>;\r\n\r\nexport function useLocalStorageState(key: string, defaultState?: string) {\r\n  const [state, setState] = useState(() => {\r\n    // NOTE: Not sure if this is ok\r\n    const storedState = localStorage.getItem(key);\r\n    if (storedState) {\r\n      return JSON.parse(storedState);\r\n    }\r\n    return defaultState;\r\n  });\r\n\r\n  const setLocalStorageState = useCallback(\r\n    (newState) => {\r\n      const changed = state !== newState;\r\n      if (!changed) {\r\n        return;\r\n      }\r\n      setState(newState);\r\n      if (newState === null) {\r\n        localStorage.removeItem(key);\r\n      } else {\r\n        localStorage.setItem(key, JSON.stringify(newState));\r\n      }\r\n    },\r\n    [state, key]\r\n  );\r\n\r\n  return [state, setLocalStorageState];\r\n}\r\n\r\n// shorten the checksummed version of the input address to have 4 characters at start and end\r\nexport function shortenAddress(address: string, chars = 4): string {\r\n  return `${address.slice(0, chars)}...${address.slice(-chars)}`;\r\n}\r\n\r\nexport function getTokenName(\r\n  map: KnownTokenMap,\r\n  mintAddress: string,\r\n  shorten = true,\r\n  length = 5\r\n): string {\r\n  const knownSymbol = map.get(mintAddress)?.symbol;\r\n  if (knownSymbol) {\r\n    return knownSymbol;\r\n  }\r\n\r\n  return shorten ? `${mintAddress.substring(0, length)}...` : mintAddress;\r\n}\r\n\r\nexport function getTokenIcon(\r\n  map: KnownTokenMap,\r\n  mintAddress: string\r\n): string | undefined {\r\n  return map.get(mintAddress)?.logoURI;\r\n}\r\n\r\nexport function getPoolName(\r\n  map: KnownTokenMap,\r\n  pool: PoolInfo,\r\n  shorten = true\r\n) {\r\n  const sorted = pool.pubkeys.holdingMints.map((a) => a.toBase58()).sort();\r\n  return sorted.map((item) => getTokenName(map, item, shorten)).join(\"/\");\r\n}\r\n\r\nexport function isKnownMint(map: KnownTokenMap, mintAddress: string) {\r\n  return !!map.get(mintAddress);\r\n}\r\n\r\nexport const STABLE_COINS = new Set([\"USDC\", \"wUSDC\", \"USDT\", \"wUSDT\", \"WUSDT\"]);\r\n\r\nexport function chunks<T>(array: T[], size: number): T[][] {\r\n  return Array.apply<number, T[], T[][]>(\r\n    0,\r\n    new Array(Math.ceil(array.length / size))\r\n  ).map((_, index) => array.slice(index * size, (index + 1) * size));\r\n}\r\n\r\nexport function convert(\r\n  account?: TokenAccount | number,\r\n  mint?: MintInfo,\r\n  rate: number = 1.0\r\n): number {\r\n  if (!account) {\r\n    return 0;\r\n  }\r\n\r\n  const amount =\r\n    typeof account === \"number\" ? new BN(account) : account.info.amount;\r\n\r\n  const precision = new BN(10).pow(new BN(mint?.decimals || 0));\r\n\r\n  // avoid overflowing 53 bit numbers on calling toNumber()\r\n  let div = amount.div(precision).toNumber();\r\n  let rem = amount.mod(precision).toNumber() / precision.toNumber();\r\n  let result = (div + rem) * rate;\r\n\r\n  return result;\r\n}\r\n\r\nvar SI_SYMBOL = [\"\", \"k\", \"M\", \"G\", \"T\", \"P\", \"E\"];\r\n\r\nconst abbreviateNumber = (number: number, precision: number) => {\r\n  let tier = (Math.log10(number) / 3) | 0;\r\n  let scaled = number;\r\n  let suffix = SI_SYMBOL[tier];\r\n  if (tier !== 0) {\r\n    let scale = Math.pow(10, tier * 3);\r\n    scaled = number / scale;\r\n  }\r\n\r\n  return scaled.toFixed(precision) + suffix;\r\n};\r\n\r\nconst format = (val: number, precision: number, abbr: boolean) =>\r\n  abbr ? abbreviateNumber(val, precision) : val.toFixed(precision);\r\n\r\nexport function formatTokenAmount(\r\n  account?: TokenAccount,\r\n  mint?: MintInfo,\r\n  rate: number = 1.0,\r\n  prefix = \"\",\r\n  suffix = \"\",\r\n  precision = 6,\r\n  abbr = false\r\n): string {\r\n  if (!account) {\r\n    return \"\";\r\n  }\r\n\r\n  return `${[prefix]}${format(\r\n    convert(account, mint, rate),\r\n    precision,\r\n    abbr\r\n  )}${suffix}`;\r\n}\r\n\r\nexport const formatUSD = new Intl.NumberFormat(\"en-US\", {\r\n  style: \"currency\",\r\n  currency: \"USD\",\r\n});\r\n\r\nexport const formatNumber = new Intl.NumberFormat(\"en-US\", {\r\n  style: \"decimal\",\r\n  minimumFractionDigits: 2,\r\n  maximumFractionDigits: 2,\r\n});\r\n\r\nexport const formatPct = new Intl.NumberFormat(\"en-US\", {\r\n  style: \"percent\",\r\n  minimumFractionDigits: 2,\r\n  maximumFractionDigits: 2,\r\n});\r\n\r\nexport const formatPriceNumber = new Intl.NumberFormat(\"en-US\", {\r\n  style: \"decimal\",\r\n  minimumFractionDigits: 2,\r\n  maximumFractionDigits: 8,\r\n});\r\n\r\nexport const formatShortDate = new Intl.DateTimeFormat(\"en-US\", {\r\n  day: \"numeric\",\r\n  month: \"short\",\r\n});\r\n\r\n// returns a Color from a 4 color array, green to red, depending on the index\r\n// of the closer (up) checkpoint number from the value\r\nexport const colorWarning = (value = 0, valueCheckpoints = [1, 3, 5, 100]) => {\r\n  const defaultIndex = 1;\r\n  const colorCodes = [\"#27ae60\", \"inherit\", \"#f3841e\", \"#ff3945\"];\r\n  if (value > valueCheckpoints[valueCheckpoints.length - 1]) {\r\n    return colorCodes[defaultIndex];\r\n  }\r\n  const closest = [...valueCheckpoints].sort((a, b) => {\r\n    const first = a - value < 0 ? Number.POSITIVE_INFINITY : a - value;\r\n    const second = b - value < 0 ? Number.POSITIVE_INFINITY : b - value;\r\n    if (first < second) {\r\n      return -1;\r\n    } else if (first > second) {\r\n      return 1;\r\n    }\r\n    return 0;\r\n  })[0];\r\n  const index = valueCheckpoints.indexOf(closest);\r\n  if (index !== -1) {\r\n    return colorCodes[index];\r\n  }\r\n  return colorCodes[defaultIndex];\r\n};\r\n","import React, {\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n} from \"react\";\r\nimport { useConnection } from \"./connection\";\r\nimport { useWallet } from \"../context/wallet\";\r\nimport { AccountInfo, Connection, PublicKey } from \"@solana/web3.js\";\r\nimport { programIds, SWAP_HOST_FEE_ADDRESS, WRAPPED_SOL_MINT } from \"./ids\";\r\nimport { AccountLayout, u64, MintInfo, MintLayout } from \"@solana/spl-token\";\r\nimport { usePools } from \"./pools\";\r\nimport { TokenAccount, PoolInfo } from \"./../models\";\r\nimport { notify } from \"./notifications\";\r\nimport { chunks } from \"./utils\";\r\nimport { EventEmitter } from \"./eventEmitter\";\r\n\r\nconst AccountsContext = React.createContext<any>(null);\r\n\r\nconst accountEmitter = new EventEmitter();\r\n\r\nconst pendingMintCalls = new Map<string, Promise<MintInfo>>();\r\nconst mintCache = new Map<string, MintInfo>();\r\nconst pendingAccountCalls = new Map<string, Promise<TokenAccount>>();\r\nconst accountsCache = new Map<string, TokenAccount>();\r\n\r\nconst pendingCalls = new Map<string, Promise<ParsedAccountBase>>();\r\nconst genericCache = new Map<string, ParsedAccountBase>();\r\n\r\nconst getAccountInfo = async (connection: Connection, pubKey: PublicKey) => {\r\n  const info = await connection.getAccountInfo(pubKey);\r\n  if (info === null) {\r\n    throw new Error(\"Failed to find account\");\r\n  }\r\n\r\n  return tokenAccountFactory(pubKey, info);\r\n};\r\n\r\nconst getMintInfo = async (connection: Connection, pubKey: PublicKey) => {\r\n  const info = await connection.getAccountInfo(pubKey);\r\n  if (info === null) {\r\n    throw new Error(\"Failed to find mint account\");\r\n  }\r\n\r\n  const data = Buffer.from(info.data);\r\n\r\n  return deserializeMint(data);\r\n};\r\n\r\nexport interface ParsedAccountBase {\r\n  pubkey: PublicKey;\r\n  account: AccountInfo<Buffer>;\r\n  info: any; // TODO: change to unkown\r\n}\r\n\r\nexport interface ParsedAccount<T> extends ParsedAccountBase {\r\n  info: T;\r\n}\r\n\r\nexport type AccountParser = (\r\n  pubkey: PublicKey,\r\n  data: AccountInfo<Buffer>\r\n) => ParsedAccountBase;\r\nexport const MintParser = (pubKey: PublicKey, info: AccountInfo<Buffer>) => {\r\n  const buffer = Buffer.from(info.data);\r\n\r\n  const data = deserializeMint(buffer);\r\n\r\n  const details = {\r\n    pubkey: pubKey,\r\n    account: {\r\n      ...info,\r\n    },\r\n    info: data,\r\n  } as ParsedAccountBase;\r\n\r\n  return details;\r\n};\r\n\r\nexport const TokenAccountParser = tokenAccountFactory;\r\n\r\nexport const GenericAccountParser = (\r\n  pubKey: PublicKey,\r\n  info: AccountInfo<Buffer>\r\n) => {\r\n  const buffer = Buffer.from(info.data);\r\n\r\n  const details = {\r\n    pubkey: pubKey,\r\n    account: {\r\n      ...info,\r\n    },\r\n    info: buffer,\r\n  } as ParsedAccountBase;\r\n\r\n  return details;\r\n};\r\n\r\nexport const keyToAccountParser = new Map<string, AccountParser>();\r\n\r\nexport const cache = {\r\n  query: async (\r\n    connection: Connection,\r\n    pubKey: string | PublicKey,\r\n    parser?: AccountParser\r\n  ) => {\r\n    let id: PublicKey;\r\n    if (typeof pubKey === \"string\") {\r\n      id = new PublicKey(pubKey);\r\n    } else {\r\n      id = pubKey;\r\n    }\r\n\r\n    const address = id.toBase58();\r\n\r\n    let account = genericCache.get(address);\r\n    if (account) {\r\n      return account;\r\n    }\r\n\r\n    let query = pendingCalls.get(address);\r\n    if (query) {\r\n      return query;\r\n    }\r\n\r\n    query = connection.getAccountInfo(id).then((data) => {\r\n      if (!data) {\r\n        throw new Error(\"Account not found\");\r\n      }\r\n\r\n      return cache.add(id, data, parser);\r\n    }) as Promise<TokenAccount>;\r\n    pendingCalls.set(address, query as any);\r\n\r\n    return query;\r\n  },\r\n  add: (id: PublicKey, obj: AccountInfo<Buffer>, parser?: AccountParser) => {\r\n    const address = id.toBase58();\r\n    const deserialize = parser ? parser : keyToAccountParser.get(address);\r\n    if (!deserialize) {\r\n      throw new Error(\r\n        \"Deserializer needs to be registered or passed as a parameter\"\r\n      );\r\n    }\r\n\r\n    cache.registerParser(id, deserialize);\r\n    pendingCalls.delete(address);\r\n    const account = deserialize(id, obj);\r\n    genericCache.set(address, account);\r\n    return account;\r\n  },\r\n  get: (pubKey: string | PublicKey) => {\r\n    let key: string;\r\n    if (typeof pubKey !== \"string\") {\r\n      key = pubKey.toBase58();\r\n    } else {\r\n      key = pubKey;\r\n    }\r\n\r\n    return genericCache.get(key);\r\n  },\r\n  registerParser: (pubkey: PublicKey, parser: AccountParser) => {\r\n    keyToAccountParser.set(pubkey.toBase58(), parser);\r\n  },\r\n\r\n  queryAccount: async (connection: Connection, pubKey: string | PublicKey) => {\r\n    let id: PublicKey;\r\n    if (typeof pubKey === \"string\") {\r\n      id = new PublicKey(pubKey);\r\n    } else {\r\n      id = pubKey;\r\n    }\r\n\r\n    const address = id.toBase58();\r\n\r\n    let account = accountsCache.get(address);\r\n    if (account) {\r\n      return account;\r\n    }\r\n\r\n    let query = pendingAccountCalls.get(address);\r\n    if (query) {\r\n      return query;\r\n    }\r\n\r\n    query = getAccountInfo(connection, id).then((data) => {\r\n      pendingAccountCalls.delete(address);\r\n      accountsCache.set(address, data);\r\n      return data;\r\n    }) as Promise<TokenAccount>;\r\n    pendingAccountCalls.set(address, query as any);\r\n\r\n    return query;\r\n  },\r\n  addAccount: (pubKey: PublicKey, obj: AccountInfo<Buffer>) => {\r\n    const account = tokenAccountFactory(pubKey, obj);\r\n    accountsCache.set(account.pubkey.toBase58(), account);\r\n    return account;\r\n  },\r\n  deleteAccount: (pubkey: PublicKey) => {\r\n    const id = pubkey?.toBase58();\r\n    accountsCache.delete(id);\r\n    accountEmitter.raiseAccountUpdated(id);\r\n  },\r\n  getAccount: (pubKey: string | PublicKey) => {\r\n    let key: string;\r\n    if (typeof pubKey !== \"string\") {\r\n      key = pubKey.toBase58();\r\n    } else {\r\n      key = pubKey;\r\n    }\r\n\r\n    return accountsCache.get(key);\r\n  },\r\n  queryMint: async (connection: Connection, pubKey: string | PublicKey) => {\r\n    let id: PublicKey;\r\n    if (typeof pubKey === \"string\") {\r\n      id = new PublicKey(pubKey);\r\n    } else {\r\n      id = pubKey;\r\n    }\r\n\r\n    const address = id.toBase58();\r\n    let mint = mintCache.get(address);\r\n    if (mint) {\r\n      return mint;\r\n    }\r\n\r\n    let query = pendingMintCalls.get(address);\r\n    if (query) {\r\n      return query;\r\n    }\r\n\r\n    query = getMintInfo(connection, id).then((data) => {\r\n      pendingAccountCalls.delete(address);\r\n\r\n      mintCache.set(address, data);\r\n      return data;\r\n    }) as Promise<MintInfo>;\r\n    pendingAccountCalls.set(address, query as any);\r\n\r\n    return query;\r\n  },\r\n  getMint: (pubKey: string | PublicKey | undefined) => {\r\n    if (!pubKey) {\r\n      return;\r\n    }\r\n\r\n    let key: string;\r\n    if (typeof pubKey !== \"string\") {\r\n      key = pubKey.toBase58();\r\n    } else {\r\n      key = pubKey;\r\n    }\r\n\r\n    return mintCache.get(key);\r\n  },\r\n  addMint: (pubKey: PublicKey, obj: AccountInfo<Buffer>) => {\r\n    const mint = deserializeMint(obj.data);\r\n    const id = pubKey.toBase58();\r\n    mintCache.set(id, mint);\r\n    return mint;\r\n  },\r\n};\r\n\r\nexport const getCachedAccount = (\r\n  predicate: (account: TokenAccount) => boolean\r\n) => {\r\n  for (const account of accountsCache.values()) {\r\n    if (predicate(account)) {\r\n      return account as TokenAccount;\r\n    }\r\n  }\r\n};\r\n\r\nfunction tokenAccountFactory(pubKey: PublicKey, info: AccountInfo<Buffer>) {\r\n  const buffer = Buffer.from(info.data);\r\n\r\n  const data = deserializeAccount(buffer);\r\n\r\n  const details = {\r\n    pubkey: pubKey,\r\n    account: {\r\n      ...info,\r\n    },\r\n    info: data,\r\n  } as TokenAccount;\r\n\r\n  return details;\r\n}\r\n\r\nfunction wrapNativeAccount(\r\n  pubkey: PublicKey,\r\n  account?: AccountInfo<Buffer>\r\n): TokenAccount | undefined {\r\n  if (!account) {\r\n    return undefined;\r\n  }\r\n\r\n  return {\r\n    pubkey: pubkey,\r\n    account,\r\n    info: {\r\n      mint: WRAPPED_SOL_MINT,\r\n      owner: pubkey,\r\n      amount: new u64(account.lamports),\r\n      delegate: null,\r\n      delegatedAmount: new u64(0),\r\n      isInitialized: true,\r\n      isFrozen: false,\r\n      isNative: true,\r\n      rentExemptReserve: null,\r\n      closeAuthority: null,\r\n    },\r\n  };\r\n}\r\n\r\nconst UseNativeAccount = () => {\r\n  const connection = useConnection();\r\n  const { wallet } = useWallet();\r\n\r\n  const [nativeAccount, setNativeAccount] = useState<AccountInfo<Buffer>>();\r\n  useEffect(() => {\r\n    if (!connection || !wallet?.publicKey) {\r\n      return;\r\n    }\r\n\r\n    connection.getAccountInfo(wallet.publicKey).then((acc) => {\r\n      if (acc) {\r\n        setNativeAccount(acc);\r\n      }\r\n    });\r\n    connection.onAccountChange(wallet.publicKey, (acc) => {\r\n      if (acc) {\r\n        setNativeAccount(acc);\r\n      }\r\n    });\r\n  }, [setNativeAccount, wallet, wallet?.publicKey, connection]);\r\n\r\n  useEffect(() => {\r\n    if (!wallet?.publicKey) {\r\n      return;\r\n    }\r\n\r\n    const account = wrapNativeAccount(wallet?.publicKey, nativeAccount);\r\n    if (!account) {\r\n      return;\r\n    }\r\n\r\n    accountsCache.set(account.pubkey.toBase58(), account);\r\n  }, [wallet?.publicKey, nativeAccount]);\r\n\r\n  return { nativeAccount };\r\n};\r\n\r\nconst PRECACHED_OWNERS = new Set<string>();\r\nconst precacheUserTokenAccounts = async (\r\n  connection: Connection,\r\n  owner?: PublicKey\r\n) => {\r\n  if (!owner) {\r\n    return;\r\n  }\r\n\r\n  // used for filtering account updates over websocket\r\n  PRECACHED_OWNERS.add(owner.toBase58());\r\n\r\n  // user accounts are update via ws subscription\r\n  const accounts = await connection.getTokenAccountsByOwner(owner, {\r\n    programId: programIds().token,\r\n  });\r\n\r\n  accounts.value\r\n    .map((info) => {\r\n      const data = deserializeAccount(info.account.data);\r\n      // TODO: move to web3.js for decoding on the client side... maybe with callback\r\n      const details = {\r\n        pubkey: info.pubkey,\r\n        account: {\r\n          ...info.account,\r\n        },\r\n        info: data,\r\n      } as TokenAccount;\r\n\r\n      return details;\r\n    })\r\n    .forEach((acc) => {\r\n      accountsCache.set(acc.pubkey.toBase58(), acc);\r\n    });\r\n};\r\n\r\nexport function AccountsProvider({ children = null as any }) {\r\n  const connection = useConnection();\r\n  const { wallet, connected } = useWallet();\r\n  const [tokenAccounts, setTokenAccounts] = useState<TokenAccount[]>([]);\r\n  const [userAccounts, setUserAccounts] = useState<TokenAccount[]>([]);\r\n  const { nativeAccount } = UseNativeAccount();\r\n  const { pools } = usePools();\r\n\r\n  const publicKey = wallet?.publicKey;\r\n\r\n  const selectUserAccounts = useCallback(() => {\r\n    return [...accountsCache.values()].filter(\r\n      (a) => a.info.owner.toBase58() === publicKey?.toBase58()\r\n    );\r\n  }, [publicKey]);\r\n\r\n  useEffect(() => {\r\n    setUserAccounts(\r\n      [wrapNativeAccount(publicKey, nativeAccount), ...tokenAccounts].filter(\r\n        (a) => a !== undefined\r\n      ) as TokenAccount[]\r\n    );\r\n  }, [nativeAccount, publicKey, tokenAccounts]);\r\n\r\n  useEffect(() => {\r\n    if (!connection || !publicKey) {\r\n      setTokenAccounts([]);\r\n    } else {\r\n      // cache host accounts to avoid query during swap\r\n      precacheUserTokenAccounts(connection, SWAP_HOST_FEE_ADDRESS);\r\n\r\n      precacheUserTokenAccounts(connection, publicKey).then(async () => {\r\n        const accounts = selectUserAccounts();\r\n        const mints = [...new Set(accounts.map(a => a.info.mint.toBase58())\r\n          .filter(a => cache.getMint(a) === undefined))]\r\n          .sort();\r\n        const response = await getMultipleAccounts(connection, mints, 'single');\r\n\r\n        response.keys.forEach((key, index) => {\r\n          if (response.array[index]) {\r\n            try {\r\n              cache.addMint(new PublicKey(key), response.array[index]);\r\n            } catch {\r\n              debugger;\r\n            }\r\n          }\r\n        });\r\n\r\n        setTokenAccounts(accounts);\r\n      });\r\n\r\n      const dispose = accountEmitter.onAccount(() => {\r\n        setTokenAccounts(selectUserAccounts());\r\n      });\r\n\r\n      // This can return different types of accounts: token-account, mint, multisig\r\n      // TODO: web3.js expose ability to filter. discuss filter syntax\r\n      const tokenSubID = connection.onProgramAccountChange(\r\n        programIds().token,\r\n        (info) => {\r\n          const id = typeof info.accountId === 'string' ? info.accountId as unknown as string : info.accountId.toBase58();\r\n          // TODO: do we need a better way to identify layout (maybe a enum identifing type?)\r\n          if (info.accountInfo.data.length === AccountLayout.span) {\r\n            const data = deserializeAccount(info.accountInfo.data);\r\n            // TODO: move to web3.js for decoding on the client side... maybe with callback\r\n            const details = {\r\n              pubkey: new PublicKey(id),\r\n              account: {\r\n                ...info.accountInfo,\r\n              },\r\n              info: data,\r\n            } as TokenAccount;\r\n\r\n            if (\r\n              PRECACHED_OWNERS.has(details.info.owner.toBase58()) ||\r\n              accountsCache.has(id)\r\n            ) {\r\n              accountsCache.set(id, details);\r\n              accountEmitter.raiseAccountUpdated(id);\r\n            }\r\n          } else if (info.accountInfo.data.length === MintLayout.span) {\r\n            if (mintCache.has(id)) {\r\n              const data = Buffer.from(info.accountInfo.data);\r\n              const mint = deserializeMint(data);\r\n              mintCache.set(id, mint);\r\n            }\r\n\r\n            accountEmitter.raiseAccountUpdated(id);\r\n          }\r\n\r\n          if (genericCache.has(id)) {\r\n            cache.add(new PublicKey(id), info.accountInfo);\r\n          }\r\n        },\r\n        \"singleGossip\"\r\n      );\r\n\r\n      return () => {\r\n        connection.removeProgramAccountChangeListener(tokenSubID);\r\n        dispose();\r\n      };\r\n    }\r\n  }, [connection, connected, publicKey, selectUserAccounts]);\r\n\r\n  return (\r\n    <AccountsContext.Provider\r\n      value={{\r\n        userAccounts,\r\n        pools,\r\n        nativeAccount,\r\n      }}\r\n    >\r\n      {children}\r\n    </AccountsContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useNativeAccount() {\r\n  const context = useContext(AccountsContext);\r\n  return {\r\n    account: context.nativeAccount as AccountInfo<Buffer>,\r\n  };\r\n}\r\n\r\nexport const getMultipleAccounts = async (\r\n  connection: any,\r\n  keys: string[],\r\n  commitment: string\r\n) => {\r\n  const result = await Promise.all(\r\n    chunks(keys, 99).map((chunk) =>\r\n      getMultipleAccountsCore(connection, chunk, commitment)\r\n    )\r\n  );\r\n\r\n  const array = result\r\n    .map(\r\n      (a) =>\r\n        a.array\r\n          .map((acc) => {\r\n            if(!acc) {\r\n              return undefined;\r\n            }\r\n\r\n            const { data, ...rest } = acc;\r\n            const obj = {\r\n              ...rest,\r\n              data: Buffer.from(data[0], \"base64\"),\r\n            } as AccountInfo<Buffer>;\r\n            return obj;\r\n          }) as AccountInfo<Buffer>[]\r\n    )\r\n    .flat();\r\n  return { keys, array };\r\n};\r\n\r\nconst getMultipleAccountsCore = async (\r\n  connection: any,\r\n  keys: string[],\r\n  commitment: string\r\n) => {\r\n  const args = connection._buildArgs([keys], commitment, \"base64\");\r\n\r\n  const unsafeRes = await connection._rpcRequest(\"getMultipleAccounts\", args);\r\n  if (unsafeRes.error) {\r\n    throw new Error(\r\n      \"failed to get info about account \" + unsafeRes.error.message\r\n    );\r\n  }\r\n\r\n  if (unsafeRes.result.value) {\r\n    const array = unsafeRes.result.value as AccountInfo<string[]>[];\r\n    return { keys, array };\r\n  }\r\n\r\n  // TODO: fix\r\n  throw new Error();\r\n};\r\n\r\nexport function useMint(key?: string | PublicKey) {\r\n  const connection = useConnection();\r\n  const [mint, setMint] = useState<MintInfo>();\r\n\r\n  const id = typeof key === \"string\" ? key : key?.toBase58();\r\n\r\n  useEffect(() => {\r\n    if (!id) {\r\n      return;\r\n    }\r\n\r\n    cache\r\n      .queryMint(connection, id)\r\n      .then(setMint)\r\n      .catch((err) =>\r\n        notify({\r\n          message: err.message,\r\n          type: \"error\",\r\n        })\r\n      );\r\n\r\n    const dispose = accountEmitter.onAccount((e) => {\r\n      const event = e;\r\n      if (event.id === id) {\r\n        cache.queryMint(connection, id).then(setMint);\r\n      }\r\n    });\r\n    return () => {\r\n      dispose();\r\n    };\r\n  }, [connection, id]);\r\n\r\n  return mint;\r\n}\r\n\r\nexport function useUserAccounts() {\r\n  const context = useContext(AccountsContext);\r\n  return {\r\n    userAccounts: context.userAccounts as TokenAccount[],\r\n  };\r\n}\r\n\r\nexport function useAccount(pubKey?: PublicKey) {\r\n  const connection = useConnection();\r\n  const [account, setAccount] = useState<TokenAccount>();\r\n\r\n  const key = pubKey?.toBase58();\r\n  useEffect(() => {\r\n    const query = async () => {\r\n      try {\r\n        if (!key) {\r\n          return;\r\n        }\r\n\r\n        const acc = await cache.queryAccount(connection, key).catch((err) =>\r\n          notify({\r\n            message: err.message,\r\n            type: \"error\",\r\n          })\r\n        );\r\n        if (acc) {\r\n          setAccount(acc);\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    };\r\n\r\n    query();\r\n\r\n    const dispose = accountEmitter.onAccount((e) => {\r\n      const event = e;\r\n      if (event.id === key) {\r\n        query();\r\n      }\r\n    });\r\n    return () => {\r\n      dispose();\r\n    };\r\n  }, [connection, key]);\r\n\r\n  return account;\r\n}\r\n\r\nexport function useCachedPool(legacy = false) {\r\n  const context = useContext(AccountsContext);\r\n\r\n  const allPools = context.pools as PoolInfo[];\r\n  const pools = useMemo(() => {\r\n    return allPools.filter((p) => p.legacy === legacy);\r\n  }, [allPools, legacy]);\r\n\r\n  return {\r\n    pools,\r\n  };\r\n}\r\n\r\nexport const useSelectedAccount = (account: string) => {\r\n  const { userAccounts } = useUserAccounts();\r\n  const index = userAccounts.findIndex(\r\n    (acc) => acc.pubkey.toBase58() === account\r\n  );\r\n\r\n  if (index !== -1) {\r\n    return userAccounts[index];\r\n  }\r\n\r\n  return;\r\n};\r\n\r\nexport const useAccountByMint = (mint: string) => {\r\n  const { userAccounts } = useUserAccounts();\r\n  const index = userAccounts.findIndex(\r\n    (acc) => acc.info.mint.toBase58() === mint\r\n  );\r\n\r\n  if (index !== -1) {\r\n    return userAccounts[index];\r\n  }\r\n\r\n  return;\r\n};\r\n\r\n// TODO: expose in spl package\r\nconst deserializeAccount = (data: Buffer) => {\r\n  const accountInfo = AccountLayout.decode(data);\r\n  accountInfo.mint = new PublicKey(accountInfo.mint);\r\n  accountInfo.owner = new PublicKey(accountInfo.owner);\r\n  accountInfo.amount = u64.fromBuffer(accountInfo.amount);\r\n\r\n  if (accountInfo.delegateOption === 0) {\r\n    accountInfo.delegate = null;\r\n    accountInfo.delegatedAmount = new u64(0);\r\n  } else {\r\n    accountInfo.delegate = new PublicKey(accountInfo.delegate);\r\n    accountInfo.delegatedAmount = u64.fromBuffer(accountInfo.delegatedAmount);\r\n  }\r\n\r\n  accountInfo.isInitialized = accountInfo.state !== 0;\r\n  accountInfo.isFrozen = accountInfo.state === 2;\r\n\r\n  if (accountInfo.isNativeOption === 1) {\r\n    accountInfo.rentExemptReserve = u64.fromBuffer(accountInfo.isNative);\r\n    accountInfo.isNative = true;\r\n  } else {\r\n    accountInfo.rentExemptReserve = null;\r\n    accountInfo.isNative = false;\r\n  }\r\n\r\n  if (accountInfo.closeAuthorityOption === 0) {\r\n    accountInfo.closeAuthority = null;\r\n  } else {\r\n    accountInfo.closeAuthority = new PublicKey(accountInfo.closeAuthority);\r\n  }\r\n\r\n  return accountInfo;\r\n};\r\n\r\n// TODO: expose in spl package\r\nconst deserializeMint = (data: Buffer) => {\r\n  if (data.length !== MintLayout.span) {\r\n    throw new Error(\"Not a valid Mint\");\r\n  }\r\n\r\n  const mintInfo = MintLayout.decode(data);\r\n\r\n  if (mintInfo.mintAuthorityOption === 0) {\r\n    mintInfo.mintAuthority = null;\r\n  } else {\r\n    mintInfo.mintAuthority = new PublicKey(mintInfo.mintAuthority);\r\n  }\r\n\r\n  mintInfo.supply = u64.fromBuffer(mintInfo.supply);\r\n  mintInfo.isInitialized = mintInfo.isInitialized !== 0;\r\n\r\n  if (mintInfo.freezeAuthorityOption === 0) {\r\n    mintInfo.freezeAuthority = null;\r\n  } else {\r\n    mintInfo.freezeAuthority = new PublicKey(mintInfo.freezeAuthority);\r\n  }\r\n\r\n  return mintInfo as MintInfo;\r\n};\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAwCAYAAABUmTXqAAADuUlEQVR4Xu2d4Y3UMBCF30hXACCqoBKuESiAn3fohICfFACNHJVQBQIKOGmQ9zZSEm2yznicjJPn37E9fjOfkrfOOoLgTVXfAPgmIrfBQ2V4CxRQ1UcAH0Tk14Juq18qq8+YOaGqvgDwBcB7ADciEjbWzCXxsp4CqqoAngD8AHAnIv8iChSu6FT1BsA7AJ8AvO5EIyARy8ce0xmQboDfAB4SLCKSoAnTQgGiqm/T4xSA9Fg1aAQkTM24BDICpBszPW6lx66fLpM4DBICkM5nAEiAXGwExCHbgYaYAKSLMAESwp9sCsjYZ8zlj4AEqm6HUK4Akmbo/Mm9iPx1mNI0xCaATPkMAmLKYZOdMgAJ4U9WB2TOZxCQJmvdFPQCQDb1J6sBkuMzCIip1prsZABkE39SHZAlPoOANFnrpqALAFnVn1QDxOIzTEqz05EVqL5/UgUQq884cqa59iIFqu2fuAJS6jOKJGJnKgC475+4AOLlM5hhKuCggOv+SREg9BkO6eQQtRRw8SdmQOgzauWV4zorUORPFgNCn+GcPg63lgImf5INyNlnfD2/ip5eSWejAq0p0PmTjyLyJyf4q4DQZ+TIyGsaUyDbn8wCQp/RWNoZ7lIFrvqTi4DQZyzVmdc3rsCkPxkAQp/ReJoZfokCF/3JCRD6jBJd2XdnCgz8idBn7Cy9XI6XAs/+hIB46clxdqbAMyCjR6y0z5HOo2KjAkdVIJ3PdQ/gezqCaGzS0zlU6TyqdC4VNwOPWiLHXHdn0h9EJPmQU+PPvMcsBq56qEDez7xj1ehPWEc7V8C2UdgXpfcTcDon9+XOBePyjqHAwGfMLfnqu1hdZ1WlPzlG8ex5lRd9hgsgPVBOnyOYOyZ0zwpzbc0qUPd1d/qTZgvj6IFf9RmudxD6k6PXWzPrz/YZ1QChP2mmWI4U6GKfUR0Q+pMj1V/otZp8xmqA9ECZ/BCOVV5+/sCqXMx+hUePjhdV5DNWByRN6L1/QkBiFro1KidAXHzGJoB4+xMCYi3FmP0KAXH1GZsC4uVPCEjMQrdGVQCIu88IAUipPyEg1lKM2c8ASDWfEQqQkT/5DOBVTgoJSI5K7VyzAJDkM+62+kR09rtYNaRf8n4XAamRge3GzABkNZ8R7g4yDijnmCECsl0x15iZn4E2qDr3/xMCYhA0cJcJQDbxGeHvIP0Ae/snA39CQAJXuyG0ESCb+oymAJnaPyEghioM3OUMSAif0SQg4/0TEbkNnG+GtlABVX08Hasjkh6rwrb/6J2Mylmk2jQAAAAASUVORK5CYII=\"","import { AccountInfo, PublicKey } from \"@solana/web3.js\";\r\nimport { TokenAccount } from \"./account\";\r\n\r\nexport const DEFAULT_DENOMINATOR = 10_000;\r\n\r\nexport interface PoolInfo {\r\n  pubkeys: {\r\n    program: PublicKey;\r\n    account: PublicKey;\r\n    holdingAccounts: PublicKey[];\r\n    holdingMints: PublicKey[];\r\n    mint: PublicKey;\r\n    feeAccount?: PublicKey;\r\n  };\r\n  legacy: boolean;\r\n  raw: {\r\n    pubkey: PublicKey;\r\n    data: any;\r\n    account: AccountInfo<Buffer>;\r\n  };\r\n}\r\n\r\nexport interface LiquidityComponent {\r\n  amount: number;\r\n  account?: TokenAccount;\r\n  mintAddress: string;\r\n}\r\n\r\nexport enum CurveType {\r\n  ConstantProduct = 0,\r\n  ConstantPrice = 1,\r\n  Stable = 2,\r\n  ConstantProductWithOffset = 3,\r\n}\r\n\r\nexport interface PoolConfig {\r\n  curveType: CurveType;\r\n  fees: {\r\n    tradeFeeNumerator: number;\r\n    tradeFeeDenominator: number;\r\n    ownerTradeFeeNumerator: number;\r\n    ownerTradeFeeDenominator: number;\r\n    ownerWithdrawFeeNumerator: number;\r\n    ownerWithdrawFeeDenominator: number;\r\n    hostFeeNumerator: number;\r\n    hostFeeDenominator: number;\r\n  };\r\n\r\n  token_b_offset?: number;\r\n  token_b_price?: number;\r\n}\r\n","import { EventEmitter as Emitter } from \"eventemitter3\";\r\n\r\nexport class AccountUpdateEvent {\r\n  static type = \"AccountUpdate\";\r\n  id: string;\r\n  constructor(id: string) {\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nexport class MarketUpdateEvent {\r\n  static type = \"MarketUpdate\";\r\n  ids: Set<string>;\r\n  constructor(ids: Set<string>) {\r\n    this.ids = ids;\r\n  }\r\n}\r\n\r\nexport class EventEmitter {\r\n  private emitter = new Emitter();\r\n\r\n  onMarket(callback: (args: MarketUpdateEvent) => void) {\r\n    this.emitter.on(MarketUpdateEvent.type, callback);\r\n\r\n    return () => this.emitter.removeListener(MarketUpdateEvent.type, callback);\r\n  }\r\n\r\n  onAccount(callback: (args: AccountUpdateEvent) => void) {\r\n    this.emitter.on(AccountUpdateEvent.type, callback);\r\n\r\n    return () => this.emitter.removeListener(AccountUpdateEvent.type, callback);\r\n  }\r\n\r\n  raiseAccountUpdated(id: string) {\r\n    this.emitter.emit(AccountUpdateEvent.type, new AccountUpdateEvent(id));\r\n  }\r\n\r\n  raiseMarketUpdated(ids: Set<string>) {\r\n    this.emitter.emit(MarketUpdateEvent.type, new MarketUpdateEvent(ids));\r\n  }\r\n}\r\n","import { useLocalStorageState } from \"./utils\";\r\nimport {\r\n  Account,\r\n  clusterApiUrl,\r\n  Connection,\r\n  PublicKey,\r\n  Transaction,\r\n  TransactionInstruction,\r\n} from \"@solana/web3.js\";\r\nimport React, { useContext, useEffect, useMemo, useState } from \"react\";\r\nimport { setProgramIds } from \"./ids\";\r\nimport { notify } from \"./notifications\";\r\nimport { ExplorerLink } from \"../components/explorerLink\";\r\nimport {\r\n  TokenListProvider,\r\n  ENV as ChainID,\r\n  TokenInfo,\r\n} from \"@solana/spl-token-registry\";\r\nimport { cache, getMultipleAccounts } from \"./accounts\";\r\n\r\nexport type ENV = \"mainnet-beta\" | \"testnet\" | \"devnet\" | \"localnet\";\r\n\r\nexport const ENDPOINTS = [\r\n  {\r\n    name: \"mainnet-beta\" as ENV,\r\n    endpoint: \"https://solana-api.projectserum.com/\",\r\n    chainID: ChainID.MainnetBeta,\r\n  },\r\n  {\r\n    name: \"testnet\" as ENV,\r\n    endpoint: clusterApiUrl(\"testnet\"),\r\n    chainID: ChainID.Testnet,\r\n  },\r\n  {\r\n    name: \"devnet\" as ENV,\r\n    endpoint: clusterApiUrl(\"devnet\"),\r\n    chainID: ChainID.Devnet,\r\n  },\r\n  {\r\n    name: \"localnet\" as ENV,\r\n    endpoint: \"http://45.77.106.109:8899\",\r\n    chainID: ChainID.Devnet,\r\n  },\r\n];\r\n\r\nconst DEFAULT = ENDPOINTS[0].endpoint;\r\nconst DEFAULT_SLIPPAGE = 0.25;\r\n\r\ninterface ConnectionConfig {\r\n  connection: Connection;\r\n  sendConnection: Connection;\r\n  endpoint: string;\r\n  slippage: number;\r\n  setSlippage: (val: number) => void;\r\n  env: ENV;\r\n  setEndpoint: (val: string) => void;\r\n  tokens: TokenInfo[];\r\n  tokenMap: Map<string, TokenInfo>;\r\n}\r\n\r\nconst ConnectionContext = React.createContext<ConnectionConfig>({\r\n  endpoint: DEFAULT,\r\n  setEndpoint: () => {},\r\n  slippage: DEFAULT_SLIPPAGE,\r\n  setSlippage: (val: number) => {},\r\n  connection: new Connection(DEFAULT, \"recent\"),\r\n  sendConnection: new Connection(DEFAULT, \"recent\"),\r\n  env: ENDPOINTS[0].name,\r\n  tokens: [],\r\n  tokenMap: new Map<string, TokenInfo>(),\r\n});\r\n\r\nexport function ConnectionProvider({ children = undefined as any }) {\r\n  const [endpoint, setEndpoint] = useLocalStorageState(\r\n    \"connectionEndpts\",\r\n    ENDPOINTS[0].endpoint\r\n  );\r\n\r\n  const [slippage, setSlippage] = useLocalStorageState(\r\n    \"slippage\",\r\n    DEFAULT_SLIPPAGE.toString()\r\n  );\r\n\r\n  const connection = useMemo(() => new Connection(endpoint, \"recent\"), [\r\n    endpoint,\r\n  ]);\r\n  const sendConnection = useMemo(() => new Connection(endpoint, \"recent\"), [\r\n    endpoint,\r\n  ]);\r\n\r\n  const chain =\r\n    ENDPOINTS.find((end) => end.endpoint === endpoint) || ENDPOINTS[0];\r\n\r\n  const env = chain.name;\r\n\r\n  const [tokens, setTokens] = useState<TokenInfo[]>([]);\r\n  const [tokenMap, setTokenMap] = useState<Map<string, TokenInfo>>(new Map());\r\n  useEffect(() => {\r\n    (async () => {\r\n      const res = await new TokenListProvider().resolve();\r\n      const list = res\r\n        .filterByChainId(chain.chainID)\r\n        .excludeByTag(\"nft\")\r\n        .getList();\r\n      const knownMints = list.reduce((map, item) => {\r\n        map.set(item.address, item);\r\n        return map;\r\n      }, new Map<string, TokenInfo>());\r\n\r\n      const accounts = await getMultipleAccounts(connection, [...knownMints.keys()], 'single');\r\n      accounts.keys.forEach((key, index) => {\r\n        const account = accounts.array[index];\r\n        if(!account) {\r\n          knownMints.delete(accounts.keys[index]);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          cache.addMint(new PublicKey(key), account);\r\n        } catch {\r\n          // ignore\r\n        }\r\n      });\r\n\r\n      setTokenMap(knownMints);\r\n      setTokens([...knownMints.values()]);\r\n    })();\r\n  }, [chain, connection]);\r\n\r\n  setProgramIds(env);\r\n\r\n  // The websocket library solana/web3.js uses closes its websocket connection when the subscription list\r\n  // is empty after opening its first time, preventing subsequent subscriptions from receiving responses.\r\n  // This is a hack to prevent the list from every getting empty\r\n  useEffect(() => {\r\n    const id = connection.onAccountChange(new Account().publicKey, () => {});\r\n    return () => {\r\n      connection.removeAccountChangeListener(id);\r\n    };\r\n  }, [connection]);\r\n\r\n  useEffect(() => {\r\n    const id = connection.onSlotChange(() => null);\r\n    return () => {\r\n      connection.removeSlotChangeListener(id);\r\n    };\r\n  }, [connection]);\r\n\r\n  useEffect(() => {\r\n    const id = sendConnection.onAccountChange(\r\n      new Account().publicKey,\r\n      () => {}\r\n    );\r\n    return () => {\r\n      sendConnection.removeAccountChangeListener(id);\r\n    };\r\n  }, [sendConnection]);\r\n\r\n  useEffect(() => {\r\n    const id = sendConnection.onSlotChange(() => null);\r\n    return () => {\r\n      sendConnection.removeSlotChangeListener(id);\r\n    };\r\n  }, [sendConnection]);\r\n\r\n  return (\r\n    <ConnectionContext.Provider\r\n      value={{\r\n        endpoint,\r\n        setEndpoint,\r\n        slippage: parseFloat(slippage),\r\n        setSlippage: (val) => setSlippage(val.toString()),\r\n        connection,\r\n        sendConnection,\r\n        tokens,\r\n        tokenMap,\r\n        env,\r\n      }}\r\n    >\r\n      {children}\r\n    </ConnectionContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useConnection() {\r\n  return useContext(ConnectionContext).connection as Connection;\r\n}\r\n\r\nexport function useSendConnection() {\r\n  return useContext(ConnectionContext)?.sendConnection;\r\n}\r\n\r\nexport function useConnectionConfig() {\r\n  const context = useContext(ConnectionContext);\r\n  return {\r\n    endpoint: context.endpoint,\r\n    setEndpoint: context.setEndpoint,\r\n    env: context.env,\r\n    tokens: context.tokens,\r\n    tokenMap: context.tokenMap,\r\n  };\r\n}\r\n\r\nexport function useSlippageConfig() {\r\n  const { slippage, setSlippage } = useContext(ConnectionContext);\r\n  return { slippage, setSlippage };\r\n}\r\n\r\nconst getErrorForTransaction = async (connection: Connection, txid: string) => {\r\n  // wait for all confirmation before geting transaction\r\n  await connection.confirmTransaction(txid, \"max\");\r\n\r\n  const tx = await connection.getParsedConfirmedTransaction(txid);\r\n\r\n  const errors: string[] = [];\r\n  if (tx?.meta && tx.meta.logMessages) {\r\n    tx.meta.logMessages.forEach((log) => {\r\n      const regex = /Error: (.*)/gm;\r\n      let m;\r\n      while ((m = regex.exec(log)) !== null) {\r\n        // This is necessary to avoid infinite loops with zero-width matches\r\n        if (m.index === regex.lastIndex) {\r\n          regex.lastIndex++;\r\n        }\r\n\r\n        if (m.length > 1) {\r\n          errors.push(m[1]);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const sendTransaction = async (\r\n  connection: Connection,\r\n  wallet: any,\r\n  instructions: TransactionInstruction[],\r\n  signers: Account[],\r\n  awaitConfirmation = true\r\n) => {\r\n  let transaction = new Transaction();\r\n  instructions.forEach((instruction) => transaction.add(instruction));\r\n  transaction.recentBlockhash = (\r\n    await connection.getRecentBlockhash(\"max\")\r\n  ).blockhash;\r\n  transaction.setSigners(\r\n    // fee payied by the wallet owner\r\n    wallet.publicKey,\r\n    ...signers.map((s) => s.publicKey)\r\n  );\r\n  if (signers.length > 0) {\r\n    transaction.partialSign(...signers);\r\n  }\r\n  transaction = await wallet.signTransaction(transaction);\r\n  const rawTransaction = transaction.serialize();\r\n  let options = {\r\n    skipPreflight: true,\r\n    commitment: \"singleGossip\",\r\n  };\r\n\r\n  const txid = await connection.sendRawTransaction(rawTransaction, options);\r\n\r\n  if (awaitConfirmation) {\r\n    const status = (\r\n      await connection.confirmTransaction(\r\n        txid,\r\n        options && (options.commitment as any)\r\n      )\r\n    ).value;\r\n\r\n    if (status?.err) {\r\n      const errors = await getErrorForTransaction(connection, txid);\r\n      notify({\r\n        message: \"Transaction failed...\",\r\n        description: (\r\n          <>\r\n            {errors.map((err) => (\r\n              <div>{err}</div>\r\n            ))}\r\n            <ExplorerLink address={txid} type=\"transaction\" />\r\n          </>\r\n        ),\r\n        type: \"error\",\r\n      });\r\n\r\n      throw new Error(\r\n        `Raw transaction ${txid} failed (${JSON.stringify(status)})`\r\n      );\r\n    }\r\n  }\r\n\r\n  return txid;\r\n};\r\n","import { PublicKey } from \"@solana/web3.js\";\r\nimport { TokenSwapLayout } from \"../models\";\r\n\r\nexport const WRAPPED_SOL_MINT = new PublicKey(\r\n  \"So11111111111111111111111111111111111111112\"\r\n);\r\nlet TOKEN_PROGRAM_ID = new PublicKey(\r\n  \"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA\"\r\n);\r\n\r\nlet SWAP_PROGRAM_ID: PublicKey;\r\nlet SWAP_PROGRAM_LEGACY_IDS: PublicKey[];\r\nlet SWAP_PROGRAM_LAYOUT: any;\r\n\r\nexport const SWAP_PROGRAM_OWNER_FEE_ADDRESS = new PublicKey(\r\n  \"HfoTxFR1Tm6kGmWgYWD6J7YHVy1UwqSULUGVLXkJqaKN\"\r\n);\r\n\r\nexport const SWAP_HOST_FEE_ADDRESS = process.env.REACT_APP_SWAP_HOST_FEE_ADDRESS\r\n  ? new PublicKey(`${process.env.REACT_APP_SWAP_HOST_FEE_ADDRESS}`)\r\n  : SWAP_PROGRAM_OWNER_FEE_ADDRESS;\r\n\r\nexport const ENABLE_FEES_INPUT = false;\r\n\r\nconsole.debug(`Host address: ${SWAP_HOST_FEE_ADDRESS?.toBase58()}`);\r\nconsole.debug(`Owner address: ${SWAP_PROGRAM_OWNER_FEE_ADDRESS?.toBase58()}`);\r\n\r\n// legacy pools are used to show users contributions in those pools to allow for withdrawals of funds\r\nexport const PROGRAM_IDS = [\r\n  {\r\n    name: \"mainnet-beta\",\r\n    swap: () => ({\r\n      current: {\r\n        pubkey: new PublicKey(\"SwaPpA9LAaLfeLi3a68M4DjnLqgtticKg6CnyNwgAC8\"),\r\n        layout: TokenSwapLayout,\r\n      },\r\n      legacy: [new PublicKey(\"9qvG1zUp8xF1Bi4m6UdRNby1BAAuaDrUxSpv4CmRRMjL\")],\r\n    }),\r\n  },\r\n  {\r\n    name: \"testnet\",\r\n    swap: () => ({\r\n      current: {\r\n        pubkey: new PublicKey(\"SwaPpA9LAaLfeLi3a68M4DjnLqgtticKg6CnyNwgAC8\"),\r\n        layout: TokenSwapLayout,\r\n      },\r\n      legacy: [],\r\n    }),\r\n  },\r\n  {\r\n    name: \"devnet\",\r\n    swap: () => ({\r\n      current: {\r\n        pubkey: new PublicKey(\"SwaPpA9LAaLfeLi3a68M4DjnLqgtticKg6CnyNwgAC8\"),\r\n        layout: TokenSwapLayout,\r\n      },\r\n      legacy: [],\r\n    }),\r\n  },\r\n  {\r\n    name: \"localnet\",\r\n    swap: () => ({\r\n      current: {\r\n        pubkey: new PublicKey(\"Gdj6rMwKZUonU4rKnLPsfQP5rKCwcJgJpbKMHKVtwYkc\"),\r\n        layout: TokenSwapLayout,\r\n      },\r\n      legacy: [],\r\n    }),\r\n  },\r\n];\r\n\r\nexport const setProgramIds = (envName: string) => {\r\n  let instance = PROGRAM_IDS.find((env) => env.name === envName);\r\n  if (!instance) {\r\n    return;\r\n  }\r\n\r\n  let swap = instance.swap();\r\n\r\n  SWAP_PROGRAM_ID = swap.current.pubkey;\r\n  SWAP_PROGRAM_LAYOUT = swap.current.layout;\r\n  SWAP_PROGRAM_LEGACY_IDS = swap.legacy;\r\n};\r\n\r\nexport const programIds = () => {\r\n  return {\r\n    token: TOKEN_PROGRAM_ID,\r\n    swap: SWAP_PROGRAM_ID,\r\n    swapLayout: SWAP_PROGRAM_LAYOUT,\r\n    swap_legacy: SWAP_PROGRAM_LEGACY_IDS,\r\n  };\r\n};\r\n","import type Transport from \"@ledgerhq/hw-transport\";\r\nimport type { Transaction } from \"@solana/web3.js\";\r\n\r\nimport { PublicKey } from \"@solana/web3.js\";\r\n\r\nconst INS_GET_PUBKEY = 0x05;\r\nconst INS_SIGN_MESSAGE = 0x06;\r\n\r\nconst P1_NON_CONFIRM = 0x00;\r\nconst P1_CONFIRM = 0x01;\r\n\r\nconst P2_EXTEND = 0x01;\r\nconst P2_MORE = 0x02;\r\n\r\nconst MAX_PAYLOAD = 255;\r\n\r\nconst LEDGER_CLA = 0xe0;\r\n\r\n/*\r\n * Helper for chunked send of large payloads\r\n */\r\nasync function ledgerSend(\r\n  transport: Transport,\r\n  instruction: number,\r\n  p1: number,\r\n  payload: Buffer\r\n) {\r\n  let p2 = 0;\r\n  let payloadOffset = 0;\r\n\r\n  if (payload.length > MAX_PAYLOAD) {\r\n    while (payload.length - payloadOffset > MAX_PAYLOAD) {\r\n      const chunk = payload.slice(payloadOffset, payloadOffset + MAX_PAYLOAD);\r\n      payloadOffset += MAX_PAYLOAD;\r\n      console.log(\r\n        \"send\",\r\n        (p2 | P2_MORE).toString(16),\r\n        chunk.length.toString(16),\r\n        chunk\r\n      );\r\n      const reply = await transport.send(\r\n        LEDGER_CLA,\r\n        instruction,\r\n        p1,\r\n        p2 | P2_MORE,\r\n        chunk\r\n      );\r\n      if (reply.length !== 2) {\r\n        throw new Error(\"Received unexpected reply payload\");\r\n      }\r\n      p2 |= P2_EXTEND;\r\n    }\r\n  }\r\n\r\n  const chunk = payload.slice(payloadOffset);\r\n  console.log(\"send\", p2.toString(16), chunk.length.toString(16), chunk);\r\n  const reply = await transport.send(LEDGER_CLA, instruction, p1, p2, chunk);\r\n\r\n  return reply.slice(0, reply.length - 2);\r\n}\r\n\r\nconst BIP32_HARDENED_BIT = (1 << 31) >>> 0;\r\nfunction harden(n: number = 0) {\r\n  return (n | BIP32_HARDENED_BIT) >>> 0;\r\n}\r\n\r\nexport function getSolanaDerivationPath(account?: number, change?: number) {\r\n  var length;\r\n  if (account !== undefined) {\r\n    if (change !== undefined) {\r\n      length = 4;\r\n    } else {\r\n      length = 3;\r\n    }\r\n  } else {\r\n    length = 2;\r\n  }\r\n\r\n  var derivationPath = Buffer.alloc(1 + length * 4);\r\n  // eslint-disable-next-line\r\n  var offset = 0;\r\n  offset = derivationPath.writeUInt8(length, offset);\r\n  offset = derivationPath.writeUInt32BE(harden(44), offset); // Using BIP44\r\n  offset = derivationPath.writeUInt32BE(harden(501), offset); // Solana's BIP44 path\r\n\r\n  if (length > 2) {\r\n    offset = derivationPath.writeUInt32BE(harden(account), offset);\r\n    if (length === 4) {\r\n      // @FIXME: https://github.com/project-serum/spl-token-wallet/issues/59\r\n      offset = derivationPath.writeUInt32BE(harden(change), offset);\r\n    }\r\n  }\r\n\r\n  return derivationPath;\r\n}\r\n\r\nexport async function signTransaction(\r\n  transport: Transport,\r\n  transaction: Transaction,\r\n  derivationPath: Buffer = getSolanaDerivationPath()\r\n) {\r\n  const messageBytes = transaction.serializeMessage();\r\n  return signBytes(transport, messageBytes, derivationPath);\r\n}\r\n\r\nexport async function signBytes(\r\n  transport: Transport,\r\n  bytes: Buffer,\r\n  derivationPath: Buffer = getSolanaDerivationPath()\r\n) {\r\n  const numPaths = Buffer.alloc(1);\r\n  numPaths.writeUInt8(1, 0);\r\n\r\n  const payload = Buffer.concat([numPaths, derivationPath, bytes]);\r\n\r\n  // @FIXME: must enable blind signing in Solana Ledger App per https://github.com/project-serum/spl-token-wallet/issues/71\r\n  // See also https://github.com/project-serum/spl-token-wallet/pull/23#issuecomment-712317053\r\n  return ledgerSend(transport, INS_SIGN_MESSAGE, P1_CONFIRM, payload);\r\n}\r\n\r\nexport async function getPublicKey(\r\n  transport: Transport,\r\n  derivationPath: Buffer = getSolanaDerivationPath()\r\n) {\r\n  const publicKeyBytes = await ledgerSend(\r\n    transport,\r\n    INS_GET_PUBKEY,\r\n    P1_NON_CONFIRM,\r\n    derivationPath\r\n  );\r\n\r\n  return new PublicKey(publicKeyBytes);\r\n}\r\n","import { Numberu64 } from \"@solana/spl-token-swap\";\r\nimport { PublicKey, Account, TransactionInstruction } from \"@solana/web3.js\";\r\nimport * as BufferLayout from \"buffer-layout\";\r\nimport { CurveType, PoolConfig } from \"./pool\";\r\n\r\nexport { TokenSwap } from \"@solana/spl-token-swap\";\r\n\r\n/**\r\n * Layout for a public key\r\n */\r\nexport const publicKey = (property: string = \"publicKey\"): Object => {\r\n  return BufferLayout.blob(32, property);\r\n};\r\n\r\n/**\r\n * Layout for a 64bit unsigned value\r\n */\r\nexport const uint64 = (property: string = \"uint64\"): Object => {\r\n  return BufferLayout.blob(8, property);\r\n};\r\n\r\nconst FEE_LAYOUT = BufferLayout.struct(\r\n  [\r\n    BufferLayout.nu64(\"tradeFeeNumerator\"),\r\n    BufferLayout.nu64(\"tradeFeeDenominator\"),\r\n    BufferLayout.nu64(\"ownerTradeFeeNumerator\"),\r\n    BufferLayout.nu64(\"ownerTradeFeeDenominator\"),\r\n    BufferLayout.nu64(\"ownerWithdrawFeeNumerator\"),\r\n    BufferLayout.nu64(\"ownerWithdrawFeeDenominator\"),\r\n    BufferLayout.nu64(\"hostFeeNumerator\"),\r\n    BufferLayout.nu64(\"hostFeeDenominator\"),\r\n  ],\r\n  \"fees\"\r\n);\r\n\r\nexport const TokenSwapLayoutLegacyV0 = BufferLayout.struct([\r\n  BufferLayout.u8(\"isInitialized\"),\r\n  BufferLayout.u8(\"nonce\"),\r\n  publicKey(\"tokenAccountA\"),\r\n  publicKey(\"tokenAccountB\"),\r\n  publicKey(\"tokenPool\"),\r\n  uint64(\"feesNumerator\"),\r\n  uint64(\"feesDenominator\"),\r\n]);\r\n\r\nexport const TokenSwapLayoutV1: typeof BufferLayout.Structure = BufferLayout.struct(\r\n  [\r\n    BufferLayout.u8(\"isInitialized\"),\r\n    BufferLayout.u8(\"nonce\"),\r\n    publicKey(\"tokenProgramId\"),\r\n    publicKey(\"tokenAccountA\"),\r\n    publicKey(\"tokenAccountB\"),\r\n    publicKey(\"tokenPool\"),\r\n    publicKey(\"mintA\"),\r\n    publicKey(\"mintB\"),\r\n    publicKey(\"feeAccount\"),\r\n    BufferLayout.u8(\"curveType\"),\r\n    uint64(\"tradeFeeNumerator\"),\r\n    uint64(\"tradeFeeDenominator\"),\r\n    uint64(\"ownerTradeFeeNumerator\"),\r\n    uint64(\"ownerTradeFeeDenominator\"),\r\n    uint64(\"ownerWithdrawFeeNumerator\"),\r\n    uint64(\"ownerWithdrawFeeDenominator\"),\r\n    BufferLayout.blob(16, \"padding\"),\r\n  ]\r\n);\r\n\r\nconst CURVE_NODE = BufferLayout.union(\r\n  BufferLayout.u8(),\r\n  BufferLayout.blob(32),\r\n  \"curve\"\r\n);\r\nCURVE_NODE.addVariant(0, BufferLayout.struct([]), \"constantProduct\");\r\nCURVE_NODE.addVariant(\r\n  1,\r\n  BufferLayout.struct([BufferLayout.nu64(\"token_b_price\")]),\r\n  \"constantPrice\"\r\n);\r\nCURVE_NODE.addVariant(2, BufferLayout.struct([]), \"stable\");\r\nCURVE_NODE.addVariant(\r\n  3,\r\n  BufferLayout.struct([BufferLayout.nu64(\"token_b_offset\")]),\r\n  \"offset\"\r\n);\r\n\r\nexport const TokenSwapLayout: typeof BufferLayout.Structure = BufferLayout.struct(\r\n  [\r\n    BufferLayout.u8(\"version\"),\r\n    BufferLayout.u8(\"isInitialized\"),\r\n    BufferLayout.u8(\"nonce\"),\r\n    publicKey(\"tokenProgramId\"),\r\n    publicKey(\"tokenAccountA\"),\r\n    publicKey(\"tokenAccountB\"),\r\n    publicKey(\"tokenPool\"),\r\n    publicKey(\"mintA\"),\r\n    publicKey(\"mintB\"),\r\n    publicKey(\"feeAccount\"),\r\n    FEE_LAYOUT,\r\n    CURVE_NODE,\r\n  ]\r\n);\r\n\r\nexport const createInitSwapInstruction = (\r\n  tokenSwapAccount: Account,\r\n  authority: PublicKey,\r\n  tokenAccountA: PublicKey,\r\n  tokenAccountB: PublicKey,\r\n  tokenPool: PublicKey,\r\n  feeAccount: PublicKey,\r\n  destinationAccount: PublicKey,\r\n  tokenProgramId: PublicKey,\r\n  swapProgramId: PublicKey,\r\n  nonce: number,\r\n  config: PoolConfig,\r\n  isLatest: boolean\r\n): TransactionInstruction => {\r\n  const keys = [\r\n    { pubkey: tokenSwapAccount.publicKey, isSigner: false, isWritable: true },\r\n    { pubkey: authority, isSigner: false, isWritable: false },\r\n    { pubkey: tokenAccountA, isSigner: false, isWritable: false },\r\n    { pubkey: tokenAccountB, isSigner: false, isWritable: false },\r\n    { pubkey: tokenPool, isSigner: false, isWritable: true },\r\n    { pubkey: feeAccount, isSigner: false, isWritable: false },\r\n    { pubkey: destinationAccount, isSigner: false, isWritable: true },\r\n    { pubkey: tokenProgramId, isSigner: false, isWritable: false },\r\n  ];\r\n\r\n  let data = Buffer.alloc(1024);\r\n  if (isLatest) {\r\n    const fields = [\r\n      BufferLayout.u8(\"instruction\"),\r\n      BufferLayout.u8(\"nonce\"),\r\n      BufferLayout.nu64(\"tradeFeeNumerator\"),\r\n      BufferLayout.nu64(\"tradeFeeDenominator\"),\r\n      BufferLayout.nu64(\"ownerTradeFeeNumerator\"),\r\n      BufferLayout.nu64(\"ownerTradeFeeDenominator\"),\r\n      BufferLayout.nu64(\"ownerWithdrawFeeNumerator\"),\r\n      BufferLayout.nu64(\"ownerWithdrawFeeDenominator\"),\r\n      BufferLayout.nu64(\"hostFeeNumerator\"),\r\n      BufferLayout.nu64(\"hostFeeDenominator\"),\r\n      BufferLayout.u8(\"curveType\"),\r\n    ];\r\n\r\n    if (config.curveType === CurveType.ConstantProductWithOffset) {\r\n      fields.push(BufferLayout.nu64(\"token_b_offset\"));\r\n      fields.push(BufferLayout.blob(24, \"padding\"));\r\n    } else if (config.curveType === CurveType.ConstantPrice) {\r\n      fields.push(BufferLayout.nu64(\"token_b_price\"));\r\n      fields.push(BufferLayout.blob(24, \"padding\"));\r\n    } else {\r\n      fields.push(BufferLayout.blob(32, \"padding\"));\r\n    }\r\n\r\n    const commandDataLayout = BufferLayout.struct(fields);\r\n\r\n    const { fees, ...rest } = config;\r\n\r\n    const encodeLength = commandDataLayout.encode(\r\n      {\r\n        instruction: 0, // InitializeSwap instruction\r\n        nonce,\r\n        ...fees,\r\n        ...rest,\r\n      },\r\n      data\r\n    );\r\n    data = data.slice(0, encodeLength);\r\n  } else {\r\n    const commandDataLayout = BufferLayout.struct([\r\n      BufferLayout.u8(\"instruction\"),\r\n      BufferLayout.u8(\"nonce\"),\r\n      BufferLayout.u8(\"curveType\"),\r\n      BufferLayout.nu64(\"tradeFeeNumerator\"),\r\n      BufferLayout.nu64(\"tradeFeeDenominator\"),\r\n      BufferLayout.nu64(\"ownerTradeFeeNumerator\"),\r\n      BufferLayout.nu64(\"ownerTradeFeeDenominator\"),\r\n      BufferLayout.nu64(\"ownerWithdrawFeeNumerator\"),\r\n      BufferLayout.nu64(\"ownerWithdrawFeeDenominator\"),\r\n      BufferLayout.blob(16, \"padding\"),\r\n    ]);\r\n\r\n    const encodeLength = commandDataLayout.encode(\r\n      {\r\n        instruction: 0, // InitializeSwap instruction\r\n        nonce,\r\n        curveType: config.curveType,\r\n        tradeFeeNumerator: config.fees.tradeFeeNumerator,\r\n        tradeFeeDenominator: config.fees.tradeFeeDenominator,\r\n        ownerTradeFeeNumerator: config.fees.ownerTradeFeeNumerator,\r\n        ownerTradeFeeDenominator: config.fees.ownerTradeFeeDenominator,\r\n        ownerWithdrawFeeNumerator: config.fees.ownerWithdrawFeeNumerator,\r\n        ownerWithdrawFeeDenominator: config.fees.ownerWithdrawFeeDenominator,\r\n      },\r\n      data\r\n    );\r\n    data = data.slice(0, encodeLength);\r\n  }\r\n\r\n  return new TransactionInstruction({\r\n    keys,\r\n    programId: swapProgramId,\r\n    data,\r\n  });\r\n};\r\n\r\nexport const depositInstruction = (\r\n  tokenSwap: PublicKey,\r\n  authority: PublicKey,\r\n  transferAuthority: PublicKey,\r\n  sourceA: PublicKey,\r\n  sourceB: PublicKey,\r\n  intoA: PublicKey,\r\n  intoB: PublicKey,\r\n  poolToken: PublicKey,\r\n  poolAccount: PublicKey,\r\n  swapProgramId: PublicKey,\r\n  tokenProgramId: PublicKey,\r\n  poolTokenAmount: number | Numberu64,\r\n  maximumTokenA: number | Numberu64,\r\n  maximumTokenB: number | Numberu64,\r\n  isLatest: boolean\r\n): TransactionInstruction => {\r\n  const dataLayout = BufferLayout.struct([\r\n    BufferLayout.u8(\"instruction\"),\r\n    uint64(\"poolTokenAmount\"),\r\n    uint64(\"maximumTokenA\"),\r\n    uint64(\"maximumTokenB\"),\r\n  ]);\r\n\r\n  const data = Buffer.alloc(dataLayout.span);\r\n  dataLayout.encode(\r\n    {\r\n      instruction: 2, // Deposit instruction\r\n      poolTokenAmount: new Numberu64(poolTokenAmount).toBuffer(),\r\n      maximumTokenA: new Numberu64(maximumTokenA).toBuffer(),\r\n      maximumTokenB: new Numberu64(maximumTokenB).toBuffer(),\r\n    },\r\n    data\r\n  );\r\n\r\n  const keys = isLatest\r\n    ? [\r\n        { pubkey: tokenSwap, isSigner: false, isWritable: false },\r\n        { pubkey: authority, isSigner: false, isWritable: false },\r\n        { pubkey: transferAuthority, isSigner: true, isWritable: false },\r\n        { pubkey: sourceA, isSigner: false, isWritable: true },\r\n        { pubkey: sourceB, isSigner: false, isWritable: true },\r\n        { pubkey: intoA, isSigner: false, isWritable: true },\r\n        { pubkey: intoB, isSigner: false, isWritable: true },\r\n        { pubkey: poolToken, isSigner: false, isWritable: true },\r\n        { pubkey: poolAccount, isSigner: false, isWritable: true },\r\n        { pubkey: tokenProgramId, isSigner: false, isWritable: false },\r\n      ]\r\n    : [\r\n        { pubkey: tokenSwap, isSigner: false, isWritable: false },\r\n        { pubkey: authority, isSigner: false, isWritable: false },\r\n        { pubkey: sourceA, isSigner: false, isWritable: true },\r\n        { pubkey: sourceB, isSigner: false, isWritable: true },\r\n        { pubkey: intoA, isSigner: false, isWritable: true },\r\n        { pubkey: intoB, isSigner: false, isWritable: true },\r\n        { pubkey: poolToken, isSigner: false, isWritable: true },\r\n        { pubkey: poolAccount, isSigner: false, isWritable: true },\r\n        { pubkey: tokenProgramId, isSigner: false, isWritable: false },\r\n      ];\r\n  return new TransactionInstruction({\r\n    keys,\r\n    programId: swapProgramId,\r\n    data,\r\n  });\r\n};\r\n\r\nexport const depositExactOneInstruction = (\r\n  tokenSwap: PublicKey,\r\n  authority: PublicKey,\r\n  transferAuthority: PublicKey,\r\n  source: PublicKey,\r\n  intoA: PublicKey,\r\n  intoB: PublicKey,\r\n  poolToken: PublicKey,\r\n  poolAccount: PublicKey,\r\n  swapProgramId: PublicKey,\r\n  tokenProgramId: PublicKey,\r\n  sourceTokenAmount: number | Numberu64,\r\n  minimumPoolTokenAmount: number | Numberu64,\r\n  isLatest: boolean\r\n): TransactionInstruction => {\r\n  const dataLayout = BufferLayout.struct([\r\n    BufferLayout.u8(\"instruction\"),\r\n    uint64(\"sourceTokenAmount\"),\r\n    uint64(\"minimumPoolTokenAmount\"),\r\n  ]);\r\n\r\n  const data = Buffer.alloc(dataLayout.span);\r\n  dataLayout.encode(\r\n    {\r\n      instruction: 4, // DepositExactOne instruction\r\n      sourceTokenAmount: new Numberu64(sourceTokenAmount).toBuffer(),\r\n      minimumPoolTokenAmount: new Numberu64(minimumPoolTokenAmount).toBuffer(),\r\n    },\r\n    data\r\n  );\r\n\r\n  const keys = isLatest\r\n    ? [\r\n        { pubkey: tokenSwap, isSigner: false, isWritable: false },\r\n        { pubkey: authority, isSigner: false, isWritable: false },\r\n        { pubkey: transferAuthority, isSigner: true, isWritable: false },\r\n        { pubkey: source, isSigner: false, isWritable: true },\r\n        { pubkey: intoA, isSigner: false, isWritable: true },\r\n        { pubkey: intoB, isSigner: false, isWritable: true },\r\n        { pubkey: poolToken, isSigner: false, isWritable: true },\r\n        { pubkey: poolAccount, isSigner: false, isWritable: true },\r\n        { pubkey: tokenProgramId, isSigner: false, isWritable: false },\r\n      ]\r\n    : [\r\n        { pubkey: tokenSwap, isSigner: false, isWritable: false },\r\n        { pubkey: authority, isSigner: false, isWritable: false },\r\n        { pubkey: source, isSigner: false, isWritable: true },\r\n        { pubkey: intoA, isSigner: false, isWritable: true },\r\n        { pubkey: intoB, isSigner: false, isWritable: true },\r\n        { pubkey: poolToken, isSigner: false, isWritable: true },\r\n        { pubkey: poolAccount, isSigner: false, isWritable: true },\r\n        { pubkey: tokenProgramId, isSigner: false, isWritable: false },\r\n      ];\r\n  return new TransactionInstruction({\r\n    keys,\r\n    programId: swapProgramId,\r\n    data,\r\n  });\r\n};\r\n\r\nexport const withdrawInstruction = (\r\n  tokenSwap: PublicKey,\r\n  authority: PublicKey,\r\n  transferAuthority: PublicKey,\r\n  poolMint: PublicKey,\r\n  feeAccount: PublicKey | undefined,\r\n  sourcePoolAccount: PublicKey,\r\n  fromA: PublicKey,\r\n  fromB: PublicKey,\r\n  userAccountA: PublicKey,\r\n  userAccountB: PublicKey,\r\n  swapProgramId: PublicKey,\r\n  tokenProgramId: PublicKey,\r\n  poolTokenAmount: number | Numberu64,\r\n  minimumTokenA: number | Numberu64,\r\n  minimumTokenB: number | Numberu64,\r\n  isLatest: boolean\r\n): TransactionInstruction => {\r\n  const dataLayout = BufferLayout.struct([\r\n    BufferLayout.u8(\"instruction\"),\r\n    uint64(\"poolTokenAmount\"),\r\n    uint64(\"minimumTokenA\"),\r\n    uint64(\"minimumTokenB\"),\r\n  ]);\r\n\r\n  const data = Buffer.alloc(dataLayout.span);\r\n  dataLayout.encode(\r\n    {\r\n      instruction: 3, // Withdraw instruction\r\n      poolTokenAmount: new Numberu64(poolTokenAmount).toBuffer(),\r\n      minimumTokenA: new Numberu64(minimumTokenA).toBuffer(),\r\n      minimumTokenB: new Numberu64(minimumTokenB).toBuffer(),\r\n    },\r\n    data\r\n  );\r\n\r\n  const keys = isLatest\r\n    ? [\r\n        { pubkey: tokenSwap, isSigner: false, isWritable: false },\r\n        { pubkey: authority, isSigner: false, isWritable: false },\r\n        { pubkey: transferAuthority, isSigner: true, isWritable: false },\r\n        { pubkey: poolMint, isSigner: false, isWritable: true },\r\n        { pubkey: sourcePoolAccount, isSigner: false, isWritable: true },\r\n        { pubkey: fromA, isSigner: false, isWritable: true },\r\n        { pubkey: fromB, isSigner: false, isWritable: true },\r\n        { pubkey: userAccountA, isSigner: false, isWritable: true },\r\n        { pubkey: userAccountB, isSigner: false, isWritable: true },\r\n      ]\r\n    : [\r\n        { pubkey: tokenSwap, isSigner: false, isWritable: false },\r\n        { pubkey: authority, isSigner: false, isWritable: false },\r\n        { pubkey: poolMint, isSigner: false, isWritable: true },\r\n        { pubkey: sourcePoolAccount, isSigner: false, isWritable: true },\r\n        { pubkey: fromA, isSigner: false, isWritable: true },\r\n        { pubkey: fromB, isSigner: false, isWritable: true },\r\n        { pubkey: userAccountA, isSigner: false, isWritable: true },\r\n        { pubkey: userAccountB, isSigner: false, isWritable: true },\r\n      ];\r\n\r\n  if (feeAccount) {\r\n    keys.push({ pubkey: feeAccount, isSigner: false, isWritable: true });\r\n  }\r\n  keys.push({ pubkey: tokenProgramId, isSigner: false, isWritable: false });\r\n\r\n  return new TransactionInstruction({\r\n    keys,\r\n    programId: swapProgramId,\r\n    data,\r\n  });\r\n};\r\n\r\nexport const withdrawExactOneInstruction = (\r\n  tokenSwap: PublicKey,\r\n  authority: PublicKey,\r\n  transferAuthority: PublicKey,\r\n  poolMint: PublicKey,\r\n  sourcePoolAccount: PublicKey,\r\n  fromA: PublicKey,\r\n  fromB: PublicKey,\r\n  userAccount: PublicKey,\r\n  feeAccount: PublicKey | undefined,\r\n  swapProgramId: PublicKey,\r\n  tokenProgramId: PublicKey,\r\n  sourceTokenAmount: number | Numberu64,\r\n  maximumTokenAmount: number | Numberu64,\r\n  isLatest: boolean\r\n): TransactionInstruction => {\r\n  const dataLayout = BufferLayout.struct([\r\n    BufferLayout.u8(\"instruction\"),\r\n    uint64(\"sourceTokenAmount\"),\r\n    uint64(\"maximumTokenAmount\"),\r\n  ]);\r\n\r\n  const data = Buffer.alloc(dataLayout.span);\r\n  dataLayout.encode(\r\n    {\r\n      instruction: 5, // WithdrawExactOne instruction\r\n      sourceTokenAmount: new Numberu64(sourceTokenAmount).toBuffer(),\r\n      maximumTokenAmount: new Numberu64(maximumTokenAmount).toBuffer(),\r\n    },\r\n    data\r\n  );\r\n\r\n  const keys = isLatest\r\n    ? [\r\n        { pubkey: tokenSwap, isSigner: false, isWritable: false },\r\n        { pubkey: authority, isSigner: false, isWritable: false },\r\n        { pubkey: transferAuthority, isSigner: true, isWritable: false },\r\n        { pubkey: poolMint, isSigner: false, isWritable: true },\r\n        { pubkey: sourcePoolAccount, isSigner: false, isWritable: true },\r\n        { pubkey: fromA, isSigner: false, isWritable: true },\r\n        { pubkey: fromB, isSigner: false, isWritable: true },\r\n        { pubkey: userAccount, isSigner: false, isWritable: true },\r\n      ]\r\n    : [\r\n        { pubkey: tokenSwap, isSigner: false, isWritable: false },\r\n        { pubkey: authority, isSigner: false, isWritable: false },\r\n        { pubkey: poolMint, isSigner: false, isWritable: true },\r\n        { pubkey: sourcePoolAccount, isSigner: false, isWritable: true },\r\n        { pubkey: fromA, isSigner: false, isWritable: true },\r\n        { pubkey: fromB, isSigner: false, isWritable: true },\r\n        { pubkey: userAccount, isSigner: false, isWritable: true },\r\n      ];\r\n\r\n  if (feeAccount) {\r\n    keys.push({ pubkey: feeAccount, isSigner: false, isWritable: true });\r\n  }\r\n  keys.push({ pubkey: tokenProgramId, isSigner: false, isWritable: false });\r\n\r\n  return new TransactionInstruction({\r\n    keys,\r\n    programId: swapProgramId,\r\n    data,\r\n  });\r\n};\r\n\r\nexport const swapInstruction = (\r\n  tokenSwap: PublicKey,\r\n  authority: PublicKey,\r\n  transferAuthority: PublicKey,\r\n  userSource: PublicKey,\r\n  poolSource: PublicKey,\r\n  poolDestination: PublicKey,\r\n  userDestination: PublicKey,\r\n  poolMint: PublicKey,\r\n  feeAccount: PublicKey,\r\n  swapProgramId: PublicKey,\r\n  tokenProgramId: PublicKey,\r\n  amountIn: number | Numberu64,\r\n  minimumAmountOut: number | Numberu64,\r\n  programOwner: PublicKey | undefined,\r\n  isLatest: boolean\r\n): TransactionInstruction => {\r\n  const dataLayout = BufferLayout.struct([\r\n    BufferLayout.u8(\"instruction\"),\r\n    uint64(\"amountIn\"),\r\n    uint64(\"minimumAmountOut\"),\r\n  ]);\r\n\r\n  const keys = isLatest\r\n    ? [\r\n        { pubkey: tokenSwap, isSigner: false, isWritable: false },\r\n        { pubkey: authority, isSigner: false, isWritable: false },\r\n        { pubkey: transferAuthority, isSigner: true, isWritable: false },\r\n        { pubkey: userSource, isSigner: false, isWritable: true },\r\n        { pubkey: poolSource, isSigner: false, isWritable: true },\r\n        { pubkey: poolDestination, isSigner: false, isWritable: true },\r\n        { pubkey: userDestination, isSigner: false, isWritable: true },\r\n        { pubkey: poolMint, isSigner: false, isWritable: true },\r\n        { pubkey: feeAccount, isSigner: false, isWritable: true },\r\n        { pubkey: tokenProgramId, isSigner: false, isWritable: false },\r\n      ]\r\n    : [\r\n        { pubkey: tokenSwap, isSigner: false, isWritable: false },\r\n        { pubkey: authority, isSigner: false, isWritable: false },\r\n        { pubkey: userSource, isSigner: false, isWritable: true },\r\n        { pubkey: poolSource, isSigner: false, isWritable: true },\r\n        { pubkey: poolDestination, isSigner: false, isWritable: true },\r\n        { pubkey: userDestination, isSigner: false, isWritable: true },\r\n        { pubkey: poolMint, isSigner: false, isWritable: true },\r\n        { pubkey: feeAccount, isSigner: false, isWritable: true },\r\n        { pubkey: tokenProgramId, isSigner: false, isWritable: false },\r\n      ];\r\n\r\n  // optional depending on the build of token-swap program\r\n  if (programOwner) {\r\n    keys.push({ pubkey: programOwner, isSigner: false, isWritable: true });\r\n  }\r\n\r\n  const data = Buffer.alloc(dataLayout.span);\r\n  dataLayout.encode(\r\n    {\r\n      instruction: 1, // Swap instruction\r\n      amountIn: new Numberu64(amountIn).toBuffer(),\r\n      minimumAmountOut: new Numberu64(minimumAmountOut).toBuffer(),\r\n    },\r\n    data\r\n  );\r\n\r\n  return new TransactionInstruction({\r\n    keys,\r\n    programId: swapProgramId,\r\n    data,\r\n  });\r\n};\r\n","import {\r\n  Account,\r\n  AccountInfo,\r\n  Connection,\r\n  PublicKey,\r\n  SystemProgram,\r\n  TransactionInstruction,\r\n} from \"@solana/web3.js\";\r\nimport { sendTransaction, useConnection } from \"./connection\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { Token, MintLayout, AccountLayout } from \"@solana/spl-token\";\r\nimport { notify } from \"./notifications\";\r\nimport {\r\n  cache,\r\n  getCachedAccount,\r\n  useUserAccounts,\r\n  useCachedPool,\r\n  getMultipleAccounts,\r\n} from \"./accounts\";\r\nimport {\r\n  programIds,\r\n  SWAP_HOST_FEE_ADDRESS,\r\n  SWAP_PROGRAM_OWNER_FEE_ADDRESS,\r\n  WRAPPED_SOL_MINT,\r\n} from \"./ids\";\r\nimport {\r\n  LiquidityComponent,\r\n  PoolInfo,\r\n  TokenAccount,\r\n  createInitSwapInstruction,\r\n  TokenSwapLayout,\r\n  depositInstruction,\r\n  withdrawInstruction,\r\n  TokenSwapLayoutLegacyV0 as TokenSwapLayoutV0,\r\n  TokenSwapLayoutV1,\r\n  swapInstruction,\r\n  PoolConfig,\r\n  depositExactOneInstruction,\r\n  withdrawExactOneInstruction,\r\n} from \"./../models\";\r\n\r\nconst LIQUIDITY_TOKEN_PRECISION = 8;\r\n\r\nexport const LIQUIDITY_PROVIDER_FEE = 0.003;\r\nexport const SERUM_FEE = 0.0005;\r\n\r\nexport const isLatest = (swap: AccountInfo<Buffer>) => {\r\n  return swap.data.length === TokenSwapLayout.span;\r\n};\r\n\r\nexport const removeLiquidity = async (\r\n  connection: Connection,\r\n  wallet: any,\r\n  liquidityAmount: number,\r\n  account: TokenAccount,\r\n  pool?: PoolInfo\r\n) => {\r\n  if (!pool) {\r\n    throw new Error(\"Pool is required\");\r\n  }\r\n\r\n  notify({\r\n    message: \"Removing Liquidity...\",\r\n    description: \"Please review transactions to approve.\",\r\n    type: \"warn\",\r\n  });\r\n\r\n  // TODO get min amounts based on total supply and liquidity\r\n  const minAmount0 = 0;\r\n  const minAmount1 = 0;\r\n\r\n  const poolMint = await cache.queryMint(connection, pool.pubkeys.mint);\r\n  const accountA = await cache.queryAccount(\r\n    connection,\r\n    pool.pubkeys.holdingAccounts[0]\r\n  );\r\n  const accountB = await cache.queryAccount(\r\n    connection,\r\n    pool.pubkeys.holdingAccounts[1]\r\n  );\r\n  if (!poolMint.mintAuthority) {\r\n    throw new Error(\"Mint doesnt have authority\");\r\n  }\r\n  const authority = poolMint.mintAuthority;\r\n\r\n  const signers: Account[] = [];\r\n  const instructions: TransactionInstruction[] = [];\r\n  const cleanupInstructions: TransactionInstruction[] = [];\r\n\r\n  const accountRentExempt = await connection.getMinimumBalanceForRentExemption(\r\n    AccountLayout.span\r\n  );\r\n\r\n  const toAccounts: PublicKey[] = [\r\n    await findOrCreateAccountByMint(\r\n      wallet.publicKey,\r\n      wallet.publicKey,\r\n      instructions,\r\n      cleanupInstructions,\r\n      accountRentExempt,\r\n      accountA.info.mint,\r\n      signers\r\n    ),\r\n    await findOrCreateAccountByMint(\r\n      wallet.publicKey,\r\n      wallet.publicKey,\r\n      instructions,\r\n      cleanupInstructions,\r\n      accountRentExempt,\r\n      accountB.info.mint,\r\n      signers\r\n    ),\r\n  ];\r\n\r\n  const isLatestSwap = isLatest(pool.raw.account);\r\n  const transferAuthority = approveAmount(\r\n    instructions,\r\n    cleanupInstructions,\r\n    account.pubkey,\r\n    wallet.publicKey,\r\n    liquidityAmount,\r\n    isLatestSwap ? undefined : authority\r\n  );\r\n\r\n  if (isLatestSwap) {\r\n    signers.push(transferAuthority);\r\n  }\r\n\r\n  // withdraw\r\n  instructions.push(\r\n    withdrawInstruction(\r\n      pool.pubkeys.account,\r\n      authority,\r\n      transferAuthority.publicKey,\r\n      pool.pubkeys.mint,\r\n      pool.pubkeys.feeAccount,\r\n      account.pubkey,\r\n      pool.pubkeys.holdingAccounts[0],\r\n      pool.pubkeys.holdingAccounts[1],\r\n      toAccounts[0],\r\n      toAccounts[1],\r\n      pool.pubkeys.program,\r\n      programIds().token,\r\n      liquidityAmount,\r\n      minAmount0,\r\n      minAmount1,\r\n      isLatestSwap\r\n    )\r\n  );\r\n\r\n  const deleteAccount = liquidityAmount === account.info.amount.toNumber();\r\n  if (deleteAccount) {\r\n    instructions.push(\r\n      Token.createCloseAccountInstruction(\r\n        programIds().token,\r\n        account.pubkey,\r\n        authority,\r\n        wallet.publicKey,\r\n        []\r\n      )\r\n    );\r\n  }\r\n\r\n  let tx = await sendTransaction(\r\n    connection,\r\n    wallet,\r\n    instructions.concat(cleanupInstructions),\r\n    signers\r\n  );\r\n\r\n  if (deleteAccount) {\r\n    cache.deleteAccount(account.pubkey);\r\n  }\r\n\r\n  notify({\r\n    message: \"Liquidity Returned. Thank you for your support.\",\r\n    type: \"success\",\r\n    description: `Transaction - ${tx}`,\r\n  });\r\n\r\n  return [\r\n    accountA.info.mint.equals(WRAPPED_SOL_MINT)\r\n      ? (wallet.publicKey as PublicKey)\r\n      : toAccounts[0],\r\n    accountB.info.mint.equals(WRAPPED_SOL_MINT)\r\n      ? (wallet.publicKey as PublicKey)\r\n      : toAccounts[1],\r\n  ];\r\n};\r\n\r\nexport const removeExactOneLiquidity = async (\r\n  connection: Connection,\r\n  wallet: any,\r\n  account: TokenAccount,\r\n  liquidityAmount: number,\r\n  tokenAmount: number,\r\n  tokenMint: string,\r\n  pool?: PoolInfo\r\n) => {\r\n  if (!pool) {\r\n    throw new Error(\"Pool is required\");\r\n  }\r\n\r\n  notify({\r\n    message: \"Removing Liquidity...\",\r\n    description: \"Please review transactions to approve.\",\r\n    type: \"warn\",\r\n  });\r\n  // Maximum number of LP tokens\r\n  // needs to be different math because the new instruction\r\n  const liquidityMaxAmount = liquidityAmount * (1 + SLIPPAGE);\r\n\r\n  const poolMint = await cache.queryMint(connection, pool.pubkeys.mint);\r\n  const accountA = await cache.queryAccount(\r\n    connection,\r\n    pool.pubkeys.holdingAccounts[0]\r\n  );\r\n  const accountB = await cache.queryAccount(\r\n    connection,\r\n    pool.pubkeys.holdingAccounts[1]\r\n  );\r\n  if (!poolMint.mintAuthority) {\r\n    throw new Error(\"Mint doesnt have authority\");\r\n  }\r\n\r\n  const tokenMatchAccount =\r\n    tokenMint === pool.pubkeys.holdingMints[0].toBase58() ? accountA : accountB;\r\n  const authority = poolMint.mintAuthority;\r\n\r\n  const signers: Account[] = [];\r\n  const instructions: TransactionInstruction[] = [];\r\n  const cleanupInstructions: TransactionInstruction[] = [];\r\n\r\n  const accountRentExempt = await connection.getMinimumBalanceForRentExemption(\r\n    AccountLayout.span\r\n  );\r\n\r\n  const toAccount: PublicKey = await findOrCreateAccountByMint(\r\n    wallet.publicKey,\r\n    wallet.publicKey,\r\n    instructions,\r\n    cleanupInstructions,\r\n    accountRentExempt,\r\n    tokenMatchAccount.info.mint,\r\n    signers\r\n  );\r\n\r\n  const isLatestSwap = isLatest(pool.raw.account);\r\n  const transferAuthority = approveAmount(\r\n    instructions,\r\n    cleanupInstructions,\r\n    account.pubkey,\r\n    wallet.publicKey,\r\n    account.info.amount.toNumber(), // liquidityAmount <- need math tuning\r\n    isLatestSwap ? undefined : authority\r\n  );\r\n  if (isLatestSwap) {\r\n    signers.push(transferAuthority);\r\n  }\r\n\r\n  // withdraw exact one\r\n  instructions.push(\r\n    withdrawExactOneInstruction(\r\n      pool.pubkeys.account,\r\n      authority,\r\n      transferAuthority.publicKey,\r\n      pool.pubkeys.mint,\r\n      account.pubkey,\r\n      pool.pubkeys.holdingAccounts[0],\r\n      pool.pubkeys.holdingAccounts[1],\r\n      toAccount,\r\n      pool.pubkeys.feeAccount,\r\n      pool.pubkeys.program,\r\n      programIds().token,\r\n      tokenAmount,\r\n      liquidityMaxAmount,\r\n      isLatestSwap\r\n    )\r\n  );\r\n\r\n  let tx = await sendTransaction(\r\n    connection,\r\n    wallet,\r\n    instructions.concat(cleanupInstructions),\r\n    signers\r\n  );\r\n\r\n  notify({\r\n    message: \"Liquidity Returned. Thank you for your support.\",\r\n    type: \"success\",\r\n    description: `Transaction - ${tx}`,\r\n  });\r\n\r\n  return tokenMatchAccount.info.mint.equals(WRAPPED_SOL_MINT)\r\n    ? (wallet.publicKey as PublicKey)\r\n    : toAccount;\r\n};\r\n\r\nexport const swap = async (\r\n  connection: Connection,\r\n  wallet: any,\r\n  components: LiquidityComponent[],\r\n  SLIPPAGE: number,\r\n  pool?: PoolInfo\r\n) => {\r\n  if (!pool || !components[0].account) {\r\n    notify({\r\n      type: \"error\",\r\n      message: `Pool doesn't exsist.`,\r\n      description: `Swap trade cancelled`,\r\n    });\r\n    return;\r\n  }\r\n\r\n  // Uniswap whitepaper: https://uniswap.org/whitepaper.pdf\r\n  // see: https://uniswap.org/docs/v2/advanced-topics/pricing/\r\n  // as well as native uniswap v2 oracle: https://uniswap.org/docs/v2/core-concepts/oracles/\r\n  const amountIn = components[0].amount; // these two should include slippage\r\n  const minAmountOut = components[1].amount * (1 - SLIPPAGE);\r\n  const holdingA =\r\n    pool.pubkeys.holdingMints[0]?.toBase58() ===\r\n    components[0].account.info.mint.toBase58()\r\n      ? pool.pubkeys.holdingAccounts[0]\r\n      : pool.pubkeys.holdingAccounts[1];\r\n  const holdingB =\r\n    holdingA === pool.pubkeys.holdingAccounts[0]\r\n      ? pool.pubkeys.holdingAccounts[1]\r\n      : pool.pubkeys.holdingAccounts[0];\r\n\r\n  const poolMint = await cache.queryMint(connection, pool.pubkeys.mint);\r\n  if (!poolMint.mintAuthority || !pool.pubkeys.feeAccount) {\r\n    throw new Error(\"Mint doesnt have authority\");\r\n  }\r\n  const authority = poolMint.mintAuthority;\r\n\r\n  const instructions: TransactionInstruction[] = [];\r\n  const cleanupInstructions: TransactionInstruction[] = [];\r\n  const signers: Account[] = [];\r\n\r\n  const accountRentExempt = await connection.getMinimumBalanceForRentExemption(\r\n    AccountLayout.span\r\n  );\r\n\r\n  const fromAccount = getWrappedAccount(\r\n    instructions,\r\n    cleanupInstructions,\r\n    components[0].account,\r\n    wallet.publicKey,\r\n    amountIn + accountRentExempt,\r\n    signers\r\n  );\r\n\r\n  let toAccount = findOrCreateAccountByMint(\r\n    wallet.publicKey,\r\n    wallet.publicKey,\r\n    instructions,\r\n    cleanupInstructions,\r\n    accountRentExempt,\r\n    new PublicKey(components[1].mintAddress),\r\n    signers\r\n  );\r\n\r\n  const isLatestSwap = isLatest(pool.raw.account);\r\n  // create approval for transfer transactions\r\n  const transferAuthority = approveAmount(\r\n    instructions,\r\n    cleanupInstructions,\r\n    fromAccount,\r\n    wallet.publicKey,\r\n    amountIn,\r\n    isLatestSwap ? undefined : authority\r\n  );\r\n  if (isLatestSwap) {\r\n    signers.push(transferAuthority);\r\n  }\r\n\r\n  let hostFeeAccount = SWAP_HOST_FEE_ADDRESS\r\n    ? findOrCreateAccountByMint(\r\n        wallet.publicKey,\r\n        SWAP_HOST_FEE_ADDRESS,\r\n        instructions,\r\n        cleanupInstructions,\r\n        accountRentExempt,\r\n        pool.pubkeys.mint,\r\n        signers\r\n      )\r\n    : undefined;\r\n\r\n  // swap\r\n  instructions.push(\r\n    swapInstruction(\r\n      pool.pubkeys.account,\r\n      authority,\r\n      transferAuthority.publicKey,\r\n      fromAccount,\r\n      holdingA,\r\n      holdingB,\r\n      toAccount,\r\n      pool.pubkeys.mint,\r\n      pool.pubkeys.feeAccount,\r\n      pool.pubkeys.program,\r\n      programIds().token,\r\n      amountIn,\r\n      minAmountOut,\r\n      hostFeeAccount,\r\n      isLatestSwap\r\n    )\r\n  );\r\n\r\n  let tx = await sendTransaction(\r\n    connection,\r\n    wallet,\r\n    instructions.concat(cleanupInstructions),\r\n    signers\r\n  );\r\n\r\n  notify({\r\n    message: \"Trade executed.\",\r\n    type: \"success\",\r\n    description: `Transaction - ${tx}`,\r\n  });\r\n};\r\n\r\nexport const addLiquidity = async (\r\n  connection: Connection,\r\n  wallet: any,\r\n  components: LiquidityComponent[],\r\n  slippage: number,\r\n  pool?: PoolInfo,\r\n  options?: PoolConfig,\r\n  depositType: string = \"both\"\r\n) => {\r\n  if (depositType === \"one\" && pool) {\r\n    await _addLiquidityExactOneExistingPool(\r\n      pool,\r\n      components[0],\r\n      connection,\r\n      wallet\r\n    );\r\n  } else if (!pool) {\r\n    if (!options) {\r\n      throw new Error(\"Options are required to create new pool.\");\r\n    }\r\n\r\n    await _addLiquidityNewPool(wallet, connection, components, options);\r\n  } else {\r\n    await _addLiquidityExistingPool(pool, components, connection, wallet);\r\n  }\r\n};\r\n\r\nconst getHoldings = (connection: Connection, accounts: string[]) => {\r\n  return accounts.map((acc) =>\r\n    cache.queryAccount(connection, new PublicKey(acc))\r\n  );\r\n};\r\n\r\nconst toPoolInfo = (item: any, program: PublicKey) => {\r\n  const mint = new PublicKey(item.data.tokenPool);\r\n  return {\r\n    pubkeys: {\r\n      account: item.pubkey,\r\n      program: program,\r\n      mint,\r\n      holdingMints: [] as PublicKey[],\r\n      holdingAccounts: [item.data.tokenAccountA, item.data.tokenAccountB].map(\r\n        (a) => new PublicKey(a)\r\n      ),\r\n    },\r\n    legacy: false,\r\n    raw: item,\r\n  } as PoolInfo;\r\n};\r\n\r\nexport const usePools = () => {\r\n  const connection = useConnection();\r\n  const [pools, setPools] = useState<PoolInfo[]>([]);\r\n\r\n  // initial query\r\n  useEffect(() => {\r\n    setPools([]);\r\n\r\n    const queryPools = async (swapId: PublicKey, isLegacy = false) => {\r\n      let poolsArray: PoolInfo[] = [];\r\n      (await connection.getProgramAccounts(swapId))\r\n        .filter(\r\n          (item) =>\r\n            item.account.data.length === TokenSwapLayout.span ||\r\n            item.account.data.length === TokenSwapLayoutV1.span ||\r\n            item.account.data.length === TokenSwapLayoutV0.span\r\n        )\r\n        .map((item) => {\r\n          let result = {\r\n            data: undefined as any,\r\n            account: item.account,\r\n            pubkey: item.pubkey,\r\n            init: async () => {},\r\n          };\r\n\r\n          const layout =\r\n            item.account.data.length === TokenSwapLayout.span\r\n              ? TokenSwapLayout\r\n              : item.account.data.length === TokenSwapLayoutV1.span\r\n              ? TokenSwapLayoutV1\r\n              : TokenSwapLayoutV0;\r\n\r\n          // handling of legacy layout can be removed soon...\r\n          if (layout === TokenSwapLayoutV0) {\r\n            result.data = layout.decode(item.account.data);\r\n            let pool = toPoolInfo(result, swapId);\r\n            pool.legacy = isLegacy;\r\n            poolsArray.push(pool as PoolInfo);\r\n\r\n            result.init = async () => {\r\n              try {\r\n                // TODO: this is not great\r\n                // Ideally SwapLayout stores hash of all the mints to make finding of pool for a pair easier\r\n                const holdings = await Promise.all(\r\n                  getHoldings(connection, [\r\n                    result.data.tokenAccountA,\r\n                    result.data.tokenAccountB,\r\n                  ])\r\n                );\r\n\r\n                pool.pubkeys.holdingMints = [\r\n                  holdings[0].info.mint,\r\n                  holdings[1].info.mint,\r\n                ] as PublicKey[];\r\n              } catch (err) {\r\n                console.log(err);\r\n              }\r\n            };\r\n          } else {\r\n            result.data = layout.decode(item.account.data);\r\n\r\n            let pool = toPoolInfo(result, swapId);\r\n            pool.legacy = isLegacy;\r\n            pool.pubkeys.feeAccount = new PublicKey(result.data.feeAccount);\r\n            pool.pubkeys.holdingMints = [\r\n              new PublicKey(result.data.mintA),\r\n              new PublicKey(result.data.mintB),\r\n            ] as PublicKey[];\r\n\r\n            poolsArray.push(pool as PoolInfo);\r\n          }\r\n\r\n          return result;\r\n        });\r\n\r\n      const toQuery = [...poolsArray\r\n        .map(\r\n          (p) =>\r\n            [\r\n              ...p.pubkeys.holdingAccounts.map((h) => h.toBase58()),\r\n              ...p.pubkeys.holdingMints.map((h) => h.toBase58()),\r\n              p.pubkeys.feeAccount?.toBase58(), // used to calculate volume approximation\r\n              p.pubkeys.mint.toBase58(),\r\n            ].filter((p) => p) as string[]\r\n        )\r\n        .flat()\r\n        .filter(acc => cache.get(acc) === undefined)\r\n        .reduce((acc, item) => {\r\n          acc.add(item);\r\n          return acc;\r\n        }, new Set<string>())\r\n        .keys()]\r\n        .sort();\r\n\r\n      // This will pre-cache all accounts used by pools\r\n      // All those accounts are updated whenever there is a change\r\n      await getMultipleAccounts(connection, toQuery, \"single\").then(\r\n        ({ keys, array }) => {\r\n          return array.map((obj, index) => {\r\n            if (!obj) {\r\n              return undefined;\r\n            }\r\n\r\n            const pubKey = new PublicKey(keys[index]);\r\n            if (obj.data.length === AccountLayout.span) {\r\n              return cache.addAccount(pubKey, obj);\r\n            } else if (obj.data.length === MintLayout.span) {\r\n              if (!cache.getMint(pubKey)) {\r\n                return cache.addMint(pubKey, obj);\r\n              }\r\n            }\r\n\r\n            return obj;\r\n          }).filter(a => !!a) as any[];\r\n        }\r\n      );\r\n\r\n      return poolsArray;\r\n    };\r\n\r\n    Promise.all([\r\n      queryPools(programIds().swap),\r\n      ...programIds().swap_legacy.map((leg) => queryPools(leg, true)),\r\n    ]).then((all) => {\r\n      setPools(all.flat());\r\n    });\r\n  }, [connection]);\r\n\r\n  useEffect(() => {\r\n    const subID = connection.onProgramAccountChange(\r\n      programIds().swap,\r\n      async (info) => {\r\n        const id = (info.accountId as unknown) as string;\r\n        if (info.accountInfo.data.length === programIds().swapLayout.span) {\r\n          const account = info.accountInfo;\r\n          const updated = {\r\n            data: programIds().swapLayout.decode(account.data),\r\n            account: account,\r\n            pubkey: new PublicKey(id),\r\n          };\r\n\r\n          const index =\r\n            pools &&\r\n            pools.findIndex((p) => p.pubkeys.account.toBase58() === id);\r\n          if (index && index >= 0 && pools) {\r\n            // TODO: check if account is empty?\r\n\r\n            const filtered = pools.filter((p, i) => i !== index);\r\n            setPools([...filtered, toPoolInfo(updated, programIds().swap)]);\r\n          } else {\r\n            let pool = toPoolInfo(updated, programIds().swap);\r\n\r\n            pool.pubkeys.feeAccount = new PublicKey(updated.data.feeAccount);\r\n            pool.pubkeys.holdingMints = [\r\n              new PublicKey(updated.data.mintA),\r\n              new PublicKey(updated.data.mintB),\r\n            ] as PublicKey[];\r\n\r\n            setPools([...pools, pool]);\r\n          }\r\n        }\r\n      },\r\n      \"singleGossip\"\r\n    );\r\n\r\n    return () => {\r\n      connection.removeProgramAccountChangeListener(subID);\r\n    };\r\n  }, [connection, pools]);\r\n\r\n  return { pools };\r\n};\r\n\r\nexport const usePoolForBasket = (mints: (string | undefined)[]) => {\r\n  const connection = useConnection();\r\n  const { pools } = useCachedPool();\r\n  const [pool, setPool] = useState<PoolInfo>();\r\n  const sortedMints = useMemo(() => [...mints].sort(), [...mints]); // eslint-disable-line\r\n  useEffect(() => {\r\n    (async () => {\r\n      // reset pool during query\r\n      setPool(undefined);\r\n      let matchingPool = pools\r\n        .filter((p) => !p.legacy)\r\n        .filter((p) =>\r\n          p.pubkeys.holdingMints\r\n            .map((a) => a.toBase58())\r\n            .sort()\r\n            .every((address, i) => address === sortedMints[i])\r\n        );\r\n\r\n      const poolQuantities: { [pool: string]: number } = {};\r\n      for (let i = 0; i < matchingPool.length; i++) {\r\n        const p = matchingPool[i];\r\n\r\n        const [account0, account1] = await Promise.all([\r\n          cache.queryAccount(connection, p.pubkeys.holdingAccounts[0]),\r\n          cache.queryAccount(connection, p.pubkeys.holdingAccounts[1]),\r\n        ]);\r\n        const amount =\r\n          (account0.info.amount.toNumber() || 0) +\r\n          (account1.info.amount.toNumber() || 0);\r\n        if (amount > 0) {\r\n          poolQuantities[i.toString()] = amount;\r\n        }\r\n      }\r\n      if (Object.keys(poolQuantities).length > 0) {\r\n        const sorted = Object.entries(\r\n          poolQuantities\r\n        ).sort(([pool0Idx, amount0], [pool1Idx, amount1]) =>\r\n          amount0 > amount1 ? -1 : 1\r\n        );\r\n        const bestPool = matchingPool[parseInt(sorted[0][0])];\r\n        setPool(bestPool);\r\n        return;\r\n      }\r\n    })();\r\n  }, [connection, sortedMints, pools]);\r\n\r\n  return pool;\r\n};\r\n\r\nexport const useOwnedPools = (legacy = false) => {\r\n  const { pools } = useCachedPool(legacy);\r\n  const { userAccounts } = useUserAccounts();\r\n\r\n  const ownedPools = useMemo(() => {\r\n    const map = userAccounts.reduce((acc, item) => {\r\n      const key = item.info.mint.toBase58();\r\n      acc.set(key, [...(acc.get(key) || []), item]);\r\n      return acc;\r\n    }, new Map<string, TokenAccount[]>());\r\n\r\n    return pools\r\n      .filter((p) => map.has(p.pubkeys.mint.toBase58()) && p.legacy === legacy)\r\n      .map((item) => {\r\n        let feeAccount = item.pubkeys.feeAccount?.toBase58();\r\n        return map.get(item.pubkeys.mint.toBase58())?.map((a) => {\r\n          return {\r\n            account: a as TokenAccount,\r\n            isFeeAccount: feeAccount === a.pubkey.toBase58(),\r\n            pool: item,\r\n          };\r\n        }) as {\r\n          account: TokenAccount;\r\n          isFeeAccount: boolean;\r\n          pool: PoolInfo;\r\n        }[];\r\n      })\r\n      .flat();\r\n  }, [pools, userAccounts, legacy]);\r\n\r\n  return ownedPools;\r\n};\r\n\r\n// Allow for this much price movement in the pool before adding liquidity to the pool aborts\r\nconst SLIPPAGE = 0.005;\r\n\r\nasync function _addLiquidityExistingPool(\r\n  pool: PoolInfo,\r\n  components: LiquidityComponent[],\r\n  connection: Connection,\r\n  wallet: any\r\n) {\r\n  notify({\r\n    message: \"Adding Liquidity...\",\r\n    description: \"Please review transactions to approve.\",\r\n    type: \"warn\",\r\n  });\r\n\r\n  const poolMint = await cache.queryMint(connection, pool.pubkeys.mint);\r\n  if (!poolMint.mintAuthority) {\r\n    throw new Error(\"Mint doesnt have authority\");\r\n  }\r\n\r\n  if (!pool.pubkeys.feeAccount) {\r\n    throw new Error(\"Invald fee account\");\r\n  }\r\n\r\n  const accountA = await cache.queryAccount(\r\n    connection,\r\n    pool.pubkeys.holdingAccounts[0]\r\n  );\r\n  const accountB = await cache.queryAccount(\r\n    connection,\r\n    pool.pubkeys.holdingAccounts[1]\r\n  );\r\n\r\n  const reserve0 = accountA.info.amount.toNumber();\r\n  const reserve1 = accountB.info.amount.toNumber();\r\n  const fromA =\r\n    accountA.info.mint.toBase58() === components[0].mintAddress\r\n      ? components[0]\r\n      : components[1];\r\n  const fromB = fromA === components[0] ? components[1] : components[0];\r\n\r\n  if (!fromA.account || !fromB.account) {\r\n    throw new Error(\"Missing account info.\");\r\n  }\r\n\r\n  const supply = poolMint.supply.toNumber();\r\n  const authority = poolMint.mintAuthority;\r\n\r\n  // Uniswap whitepaper: https://uniswap.org/whitepaper.pdf\r\n  // see: https://uniswap.org/docs/v2/advanced-topics/pricing/\r\n  // as well as native uniswap v2 oracle: https://uniswap.org/docs/v2/core-concepts/oracles/\r\n  const amount0 = fromA.amount;\r\n  const amount1 = fromB.amount;\r\n\r\n  const liquidity = Math.min(\r\n    (amount0 * (1 - SLIPPAGE) * supply) / reserve0,\r\n    (amount1 * (1 - SLIPPAGE) * supply) / reserve1\r\n  );\r\n  const instructions: TransactionInstruction[] = [];\r\n  const cleanupInstructions: TransactionInstruction[] = [];\r\n\r\n  const signers: Account[] = [];\r\n\r\n  const accountRentExempt = await connection.getMinimumBalanceForRentExemption(\r\n    AccountLayout.span\r\n  );\r\n  const fromKeyA = getWrappedAccount(\r\n    instructions,\r\n    cleanupInstructions,\r\n    fromA.account,\r\n    wallet.publicKey,\r\n    amount0 + accountRentExempt,\r\n    signers\r\n  );\r\n  const fromKeyB = getWrappedAccount(\r\n    instructions,\r\n    cleanupInstructions,\r\n    fromB.account,\r\n    wallet.publicKey,\r\n    amount1 + accountRentExempt,\r\n    signers\r\n  );\r\n\r\n  let toAccount = findOrCreateAccountByMint(\r\n    wallet.publicKey,\r\n    wallet.publicKey,\r\n    instructions,\r\n    [],\r\n    accountRentExempt,\r\n    pool.pubkeys.mint,\r\n    signers,\r\n    new Set<string>([pool.pubkeys.feeAccount.toBase58()])\r\n  );\r\n\r\n  const isLatestSwap = isLatest(pool.raw.account);\r\n  // create approval for transfer transactions\r\n  const transferAuthority = approveAmount(\r\n    instructions,\r\n    cleanupInstructions,\r\n    fromKeyA,\r\n    wallet.publicKey,\r\n    amount0,\r\n    isLatestSwap ? undefined : authority\r\n  );\r\n  if (isLatestSwap) {\r\n    signers.push(transferAuthority);\r\n  }\r\n\r\n  approveAmount(\r\n    instructions,\r\n    cleanupInstructions,\r\n    fromKeyB,\r\n    wallet.publicKey,\r\n    amount1,\r\n    isLatestSwap ? transferAuthority.publicKey : authority\r\n  );\r\n\r\n  // deposit\r\n  instructions.push(\r\n    depositInstruction(\r\n      pool.pubkeys.account,\r\n      authority,\r\n      transferAuthority.publicKey,\r\n      fromKeyA,\r\n      fromKeyB,\r\n      pool.pubkeys.holdingAccounts[0],\r\n      pool.pubkeys.holdingAccounts[1],\r\n      pool.pubkeys.mint,\r\n      toAccount,\r\n      pool.pubkeys.program,\r\n      programIds().token,\r\n      liquidity,\r\n      amount0,\r\n      amount1,\r\n      isLatestSwap\r\n    )\r\n  );\r\n\r\n  let tx = await sendTransaction(\r\n    connection,\r\n    wallet,\r\n    instructions.concat(cleanupInstructions),\r\n    signers\r\n  );\r\n\r\n  notify({\r\n    message: \"Pool Funded. Happy trading.\",\r\n    type: \"success\",\r\n    description: `Transaction - ${tx}`,\r\n  });\r\n}\r\n\r\nasync function _addLiquidityExactOneExistingPool(\r\n  pool: PoolInfo,\r\n  component: LiquidityComponent,\r\n  connection: Connection,\r\n  wallet: any\r\n) {\r\n  notify({\r\n    message: \"Adding Liquidity...\",\r\n    description: \"Please review transactions to approve.\",\r\n    type: \"warn\",\r\n  });\r\n\r\n  const poolMint = await cache.queryMint(connection, pool.pubkeys.mint);\r\n  if (!poolMint.mintAuthority) {\r\n    throw new Error(\"Mint doesnt have authority\");\r\n  }\r\n\r\n  if (!pool.pubkeys.feeAccount) {\r\n    throw new Error(\"Invald fee account\");\r\n  }\r\n\r\n  const accountA = await cache.queryAccount(\r\n    connection,\r\n    pool.pubkeys.holdingAccounts[0]\r\n  );\r\n  const accountB = await cache.queryAccount(\r\n    connection,\r\n    pool.pubkeys.holdingAccounts[1]\r\n  );\r\n\r\n  const from = component;\r\n\r\n  if (!from.account) {\r\n    throw new Error(\"Missing account info.\");\r\n  }\r\n  const reserve =\r\n    accountA.info.mint.toBase58() === from.mintAddress\r\n      ? accountA.info.amount.toNumber()\r\n      : accountB.info.amount.toNumber();\r\n\r\n  const supply = poolMint.supply.toNumber();\r\n  const authority = poolMint.mintAuthority;\r\n\r\n  // Uniswap whitepaper: https://uniswap.org/whitepaper.pdf\r\n  // see: https://uniswap.org/docs/v2/advanced-topics/pricing/\r\n  // as well as native uniswap v2 oracle: https://uniswap.org/docs/v2/core-concepts/oracles/\r\n  const amount = from.amount;\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const _liquidityTokenTempMath = (amount * (1 - SLIPPAGE) * supply) / reserve;\r\n  const liquidityToken = 0;\r\n\r\n  const instructions: TransactionInstruction[] = [];\r\n  const cleanupInstructions: TransactionInstruction[] = [];\r\n\r\n  const signers: Account[] = [];\r\n\r\n  const accountRentExempt = await connection.getMinimumBalanceForRentExemption(\r\n    AccountLayout.span\r\n  );\r\n  const fromKey = getWrappedAccount(\r\n    instructions,\r\n    cleanupInstructions,\r\n    from.account,\r\n    wallet.publicKey,\r\n    amount + accountRentExempt,\r\n    signers\r\n  );\r\n\r\n  let toAccount = findOrCreateAccountByMint(\r\n    wallet.publicKey,\r\n    wallet.publicKey,\r\n    instructions,\r\n    [],\r\n    accountRentExempt,\r\n    pool.pubkeys.mint,\r\n    signers,\r\n    new Set<string>([pool.pubkeys.feeAccount.toBase58()])\r\n  );\r\n\r\n  const isLatestSwap = isLatest(pool.raw.account);\r\n  // create approval for transfer transactions\r\n  const transferAuthority = approveAmount(\r\n    instructions,\r\n    cleanupInstructions,\r\n    fromKey,\r\n    wallet.publicKey,\r\n    amount,\r\n    isLatestSwap ? undefined : authority\r\n  );\r\n  if (isLatestSwap) {\r\n    signers.push(transferAuthority);\r\n  }\r\n\r\n  // deposit\r\n  instructions.push(\r\n    depositExactOneInstruction(\r\n      pool.pubkeys.account,\r\n      authority,\r\n      transferAuthority.publicKey,\r\n      fromKey,\r\n      pool.pubkeys.holdingAccounts[0],\r\n      pool.pubkeys.holdingAccounts[1],\r\n      pool.pubkeys.mint,\r\n      toAccount,\r\n      pool.pubkeys.program,\r\n      programIds().token,\r\n      amount,\r\n      liquidityToken,\r\n      isLatestSwap\r\n    )\r\n  );\r\n\r\n  let tx = await sendTransaction(\r\n    connection,\r\n    wallet,\r\n    instructions.concat(cleanupInstructions),\r\n    signers\r\n  );\r\n\r\n  notify({\r\n    message: \"Pool Funded. Happy trading.\",\r\n    type: \"success\",\r\n    description: `Transaction - ${tx}`,\r\n  });\r\n}\r\n\r\nfunction findOrCreateAccountByMint(\r\n  payer: PublicKey,\r\n  owner: PublicKey,\r\n  instructions: TransactionInstruction[],\r\n  cleanupInstructions: TransactionInstruction[],\r\n  accountRentExempt: number,\r\n  mint: PublicKey, // use to identify same type\r\n  signers: Account[],\r\n  excluded?: Set<string>\r\n): PublicKey {\r\n  const accountToFind = mint.toBase58();\r\n  const account = getCachedAccount(\r\n    (acc) =>\r\n      acc.info.mint.toBase58() === accountToFind &&\r\n      acc.info.owner.toBase58() === owner.toBase58() &&\r\n      (excluded === undefined || !excluded.has(acc.pubkey.toBase58()))\r\n  );\r\n  const isWrappedSol = accountToFind === WRAPPED_SOL_MINT.toBase58();\r\n\r\n  let toAccount: PublicKey;\r\n  if (account && !isWrappedSol) {\r\n    toAccount = account.pubkey;\r\n  } else {\r\n    // creating depositor pool account\r\n    const newToAccount = createSplAccount(\r\n      instructions,\r\n      payer,\r\n      accountRentExempt,\r\n      mint,\r\n      owner,\r\n      AccountLayout.span\r\n    );\r\n\r\n    toAccount = newToAccount.publicKey;\r\n    signers.push(newToAccount);\r\n\r\n    if (isWrappedSol) {\r\n      cleanupInstructions.push(\r\n        Token.createCloseAccountInstruction(\r\n          programIds().token,\r\n          toAccount,\r\n          payer,\r\n          payer,\r\n          []\r\n        )\r\n      );\r\n    }\r\n  }\r\n\r\n  return toAccount;\r\n}\r\n\r\nfunction estimateProceedsFromInput(\r\n  inputQuantityInPool: number,\r\n  proceedsQuantityInPool: number,\r\n  inputAmount: number\r\n): number {\r\n  return (\r\n    (proceedsQuantityInPool * inputAmount) / (inputQuantityInPool + inputAmount)\r\n  );\r\n}\r\n\r\nfunction estimateInputFromProceeds(\r\n  inputQuantityInPool: number,\r\n  proceedsQuantityInPool: number,\r\n  proceedsAmount: number\r\n): number | string {\r\n  if (proceedsAmount >= proceedsQuantityInPool) {\r\n    return \"Not possible\";\r\n  }\r\n\r\n  return (\r\n    (inputQuantityInPool * proceedsAmount) /\r\n    (proceedsQuantityInPool - proceedsAmount)\r\n  );\r\n}\r\n\r\nexport enum PoolOperation {\r\n  Add,\r\n  SwapGivenInput,\r\n  SwapGivenProceeds,\r\n}\r\n\r\nexport async function calculateDependentAmount(\r\n  connection: Connection,\r\n  independent: string,\r\n  amount: number,\r\n  pool: PoolInfo,\r\n  op: PoolOperation\r\n): Promise<number | string | undefined> {\r\n  const poolMint = await cache.queryMint(connection, pool.pubkeys.mint);\r\n  const accountA = await cache.queryAccount(\r\n    connection,\r\n    pool.pubkeys.holdingAccounts[0]\r\n  );\r\n  const amountA = accountA.info.amount.toNumber();\r\n\r\n  const accountB = await cache.queryAccount(\r\n    connection,\r\n    pool.pubkeys.holdingAccounts[1]\r\n  );\r\n  let amountB = accountB.info.amount.toNumber();\r\n\r\n  if (!poolMint.mintAuthority) {\r\n    throw new Error(\"Mint doesnt have authority\");\r\n  }\r\n\r\n  if (poolMint.supply.eqn(0)) {\r\n    return;\r\n  }\r\n\r\n  let offsetAmount = 0;\r\n  const offsetCurve = pool.raw?.data?.curve?.offset;\r\n  if (offsetCurve) {\r\n    offsetAmount = offsetCurve.token_b_offset;\r\n    amountB = amountB + offsetAmount;\r\n  }\r\n\r\n  const mintA = await cache.queryMint(connection, accountA.info.mint);\r\n  const mintB = await cache.queryMint(connection, accountB.info.mint);\r\n\r\n  if (!mintA || !mintB) {\r\n    return;\r\n  }\r\n\r\n  const isFirstIndependent = accountA.info.mint.toBase58() === independent;\r\n  const depPrecision = Math.pow(\r\n    10,\r\n    isFirstIndependent ? mintB.decimals : mintA.decimals\r\n  );\r\n  const indPrecision = Math.pow(\r\n    10,\r\n    isFirstIndependent ? mintA.decimals : mintB.decimals\r\n  );\r\n  const indAdjustedAmount = amount * indPrecision;\r\n\r\n  let indBasketQuantity = isFirstIndependent ? amountA : amountB;\r\n\r\n  let depBasketQuantity = isFirstIndependent ? amountB : amountA;\r\n\r\n  var depAdjustedAmount;\r\n\r\n  const constantPrice = pool.raw?.data?.curve?.constantPrice;\r\n  if (constantPrice) {\r\n    if (isFirstIndependent) {\r\n      depAdjustedAmount = (amount * depPrecision) / constantPrice.token_b_price;\r\n    } else {\r\n      depAdjustedAmount = (amount * depPrecision) * constantPrice.token_b_price;\r\n    }\r\n  } else {\r\n    switch (+op) {\r\n      case PoolOperation.Add:\r\n        depAdjustedAmount =\r\n          (depBasketQuantity / indBasketQuantity) * indAdjustedAmount;\r\n        break;\r\n      case PoolOperation.SwapGivenProceeds:\r\n        depAdjustedAmount = estimateInputFromProceeds(\r\n          depBasketQuantity,\r\n          indBasketQuantity,\r\n          indAdjustedAmount\r\n        );\r\n        break;\r\n      case PoolOperation.SwapGivenInput:\r\n        depAdjustedAmount = estimateProceedsFromInput(\r\n          indBasketQuantity,\r\n          depBasketQuantity,\r\n          indAdjustedAmount\r\n        );\r\n        break;\r\n    }\r\n  }\r\n\r\n  if (typeof depAdjustedAmount === \"string\") {\r\n    return depAdjustedAmount;\r\n  }\r\n  if (depAdjustedAmount === undefined) {\r\n    return undefined;\r\n  }\r\n  return depAdjustedAmount / depPrecision;\r\n}\r\n\r\n// TODO: add ui to customize curve type\r\nasync function _addLiquidityNewPool(\r\n  wallet: any,\r\n  connection: Connection,\r\n  components: LiquidityComponent[],\r\n  options: PoolConfig\r\n) {\r\n  notify({\r\n    message: \"Creating new pool...\",\r\n    description: \"Please review transactions to approve.\",\r\n    type: \"warn\",\r\n  });\r\n\r\n  if (components.some((c) => !c.account)) {\r\n    notify({\r\n      message: \"You need to have balance for all legs in the basket...\",\r\n      description: \"Please review inputs.\",\r\n      type: \"error\",\r\n    });\r\n    return;\r\n  }\r\n\r\n  let instructions: TransactionInstruction[] = [];\r\n  let cleanupInstructions: TransactionInstruction[] = [];\r\n\r\n  const liquidityTokenMint = new Account();\r\n  // Create account for pool liquidity token\r\n  instructions.push(\r\n    SystemProgram.createAccount({\r\n      fromPubkey: wallet.publicKey,\r\n      newAccountPubkey: liquidityTokenMint.publicKey,\r\n      lamports: await connection.getMinimumBalanceForRentExemption(\r\n        MintLayout.span\r\n      ),\r\n      space: MintLayout.span,\r\n      programId: programIds().token,\r\n    })\r\n  );\r\n\r\n  const tokenSwapAccount = new Account();\r\n\r\n  const [authority, nonce] = await PublicKey.findProgramAddress(\r\n    [tokenSwapAccount.publicKey.toBuffer()],\r\n    programIds().swap\r\n  );\r\n\r\n  // create mint for pool liquidity token\r\n  instructions.push(\r\n    Token.createInitMintInstruction(\r\n      programIds().token,\r\n      liquidityTokenMint.publicKey,\r\n      LIQUIDITY_TOKEN_PRECISION,\r\n      // pass control of liquidity mint to swap program\r\n      authority,\r\n      // swap program can freeze liquidity token mint\r\n      null\r\n    )\r\n  );\r\n\r\n  // Create holding accounts for\r\n  const accountRentExempt = await connection.getMinimumBalanceForRentExemption(\r\n    AccountLayout.span\r\n  );\r\n  const holdingAccounts: Account[] = [];\r\n  let signers: Account[] = [];\r\n\r\n  components.forEach((leg) => {\r\n    if (!leg.account) {\r\n      return;\r\n    }\r\n\r\n    const mintPublicKey = leg.account.info.mint;\r\n    // component account to store tokens I of N in liquidity poll\r\n    holdingAccounts.push(\r\n      createSplAccount(\r\n        instructions,\r\n        wallet.publicKey,\r\n        accountRentExempt,\r\n        mintPublicKey,\r\n        authority,\r\n        AccountLayout.span\r\n      )\r\n    );\r\n  });\r\n\r\n  // creating depositor pool account\r\n  const depositorAccount = createSplAccount(\r\n    instructions,\r\n    wallet.publicKey,\r\n    accountRentExempt,\r\n    liquidityTokenMint.publicKey,\r\n    wallet.publicKey,\r\n    AccountLayout.span\r\n  );\r\n\r\n  // creating fee pool account its set from env variable or to creater of the pool\r\n  // creater of the pool is not allowed in some versions of token-swap program\r\n  const feeAccount = createSplAccount(\r\n    instructions,\r\n    wallet.publicKey,\r\n    accountRentExempt,\r\n    liquidityTokenMint.publicKey,\r\n    SWAP_PROGRAM_OWNER_FEE_ADDRESS || wallet.publicKey,\r\n    AccountLayout.span\r\n  );\r\n\r\n  // create all accounts in one transaction\r\n  let tx = await sendTransaction(connection, wallet, instructions, [\r\n    liquidityTokenMint,\r\n    depositorAccount,\r\n    feeAccount,\r\n    ...holdingAccounts,\r\n    ...signers,\r\n  ]);\r\n\r\n  notify({\r\n    message: \"Accounts created\",\r\n    description: `Transaction ${tx}`,\r\n    type: \"success\",\r\n  });\r\n\r\n  notify({\r\n    message: \"Adding Liquidity...\",\r\n    description: \"Please review transactions to approve.\",\r\n    type: \"warn\",\r\n  });\r\n\r\n  signers = [];\r\n  instructions = [];\r\n  cleanupInstructions = [];\r\n\r\n  instructions.push(\r\n    SystemProgram.createAccount({\r\n      fromPubkey: wallet.publicKey,\r\n      newAccountPubkey: tokenSwapAccount.publicKey,\r\n      lamports: await connection.getMinimumBalanceForRentExemption(\r\n        programIds().swapLayout.span\r\n      ),\r\n      space: programIds().swapLayout.span,\r\n      programId: programIds().swap,\r\n    })\r\n  );\r\n\r\n  components.forEach((leg, i) => {\r\n    if (!leg.account) {\r\n      return;\r\n    }\r\n\r\n    // create temporary account for wrapped sol to perform transfer\r\n    const from = getWrappedAccount(\r\n      instructions,\r\n      cleanupInstructions,\r\n      leg.account,\r\n      wallet.publicKey,\r\n      leg.amount + accountRentExempt,\r\n      signers\r\n    );\r\n\r\n    instructions.push(\r\n      Token.createTransferInstruction(\r\n        programIds().token,\r\n        from,\r\n        holdingAccounts[i].publicKey,\r\n        wallet.publicKey,\r\n        [],\r\n        leg.amount\r\n      )\r\n    );\r\n  });\r\n\r\n  instructions.push(\r\n    createInitSwapInstruction(\r\n      tokenSwapAccount,\r\n      authority,\r\n      holdingAccounts[0].publicKey,\r\n      holdingAccounts[1].publicKey,\r\n      liquidityTokenMint.publicKey,\r\n      feeAccount.publicKey,\r\n      depositorAccount.publicKey,\r\n      programIds().token,\r\n      programIds().swap,\r\n      nonce,\r\n      options,\r\n      programIds().swapLayout === TokenSwapLayout\r\n    )\r\n  );\r\n\r\n  // All instructions didn't fit in single transaction\r\n  // initialize and provide inital liquidity to swap in 2nd (this prevents loss of funds)\r\n  tx = await sendTransaction(\r\n    connection,\r\n    wallet,\r\n    instructions.concat(cleanupInstructions),\r\n    [tokenSwapAccount, ...signers]\r\n  );\r\n\r\n  notify({\r\n    message: \"Pool Funded. Happy trading.\",\r\n    type: \"success\",\r\n    description: `Transaction - ${tx}`,\r\n  });\r\n}\r\n\r\nfunction approveAmount(\r\n  instructions: TransactionInstruction[],\r\n  cleanupInstructions: TransactionInstruction[],\r\n  account: PublicKey,\r\n  owner: PublicKey,\r\n  amount: number,\r\n\r\n  // if delegate is not passed ephemeral transfer authority is used\r\n  delegate?: PublicKey\r\n) {\r\n  const tokenProgram = programIds().token;\r\n  const transferAuthority = new Account();\r\n\r\n  instructions.push(\r\n    Token.createApproveInstruction(\r\n      tokenProgram,\r\n      account,\r\n      delegate ?? transferAuthority.publicKey,\r\n      owner,\r\n      [],\r\n      amount\r\n    )\r\n  );\r\n\r\n  cleanupInstructions.push(\r\n    Token.createRevokeInstruction(tokenProgram, account, owner, [])\r\n  );\r\n\r\n  return transferAuthority;\r\n}\r\n\r\nfunction getWrappedAccount(\r\n  instructions: TransactionInstruction[],\r\n  cleanupInstructions: TransactionInstruction[],\r\n  toCheck: TokenAccount,\r\n  payer: PublicKey,\r\n  amount: number,\r\n  signers: Account[]\r\n) {\r\n  if (!toCheck.info.isNative) {\r\n    return toCheck.pubkey;\r\n  }\r\n\r\n  const account = new Account();\r\n  instructions.push(\r\n    SystemProgram.createAccount({\r\n      fromPubkey: payer,\r\n      newAccountPubkey: account.publicKey,\r\n      lamports: amount,\r\n      space: AccountLayout.span,\r\n      programId: programIds().token,\r\n    })\r\n  );\r\n\r\n  instructions.push(\r\n    Token.createInitAccountInstruction(\r\n      programIds().token,\r\n      WRAPPED_SOL_MINT,\r\n      account.publicKey,\r\n      payer\r\n    )\r\n  );\r\n\r\n  cleanupInstructions.push(\r\n    Token.createCloseAccountInstruction(\r\n      programIds().token,\r\n      account.publicKey,\r\n      payer,\r\n      payer,\r\n      []\r\n    )\r\n  );\r\n\r\n  signers.push(account);\r\n\r\n  return account.publicKey;\r\n}\r\n\r\nfunction createSplAccount(\r\n  instructions: TransactionInstruction[],\r\n  payer: PublicKey,\r\n  accountRentExempt: number,\r\n  mint: PublicKey,\r\n  owner: PublicKey,\r\n  space: number\r\n) {\r\n  const account = new Account();\r\n  instructions.push(\r\n    SystemProgram.createAccount({\r\n      fromPubkey: payer,\r\n      newAccountPubkey: account.publicKey,\r\n      lamports: accountRentExempt,\r\n      space,\r\n      programId: programIds().token,\r\n    })\r\n  );\r\n\r\n  instructions.push(\r\n    Token.createInitAccountInstruction(\r\n      programIds().token,\r\n      mint,\r\n      account.publicKey,\r\n      owner\r\n    )\r\n  );\r\n\r\n  return account;\r\n}\r\n","export * from \"./pool\";\r\nexport * from \"./account\";\r\nexport * from \"./tokenSwap\";\r\n","import React from \"react\";\r\nimport { notification } from \"antd\";\r\n// import Link from '../components/Link';\r\n\r\nexport function notify({\r\n  message = \"\",\r\n  description = undefined as any,\r\n  txid = \"\",\r\n  type = \"info\",\r\n  placement = \"bottomLeft\",\r\n}) {\r\n  if (txid) {\r\n    //   <Link\r\n    //     external\r\n    //     to={'https://explorer.solana.com/tx/' + txid}\r\n    //     style={{ color: '#0000ff' }}\r\n    //   >\r\n    //     View transaction {txid.slice(0, 8)}...{txid.slice(txid.length - 8)}\r\n    //   </Link>\r\n\r\n    description = <></>;\r\n  }\r\n  (notification as any)[type]({\r\n    message: <span style={{ color: \"black\" }}>{message}</span>,\r\n    description: (\r\n      <span style={{ color: \"black\", opacity: 0.5 }}>{description}</span>\r\n    ),\r\n    placement,\r\n    style: {\r\n      backgroundColor: \"white\",\r\n    },\r\n  });\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.9d1f7b12.png\";","import { PublicKey, Transaction } from \"@solana/web3.js\";\r\n\r\nexport const DEFAULT_PUBLIC_KEY = new PublicKey(\r\n  \"11111111111111111111111111111111\"\r\n);\r\n\r\nexport interface WalletAdapter {\r\n  publicKey: PublicKey;\r\n  autoApprove: boolean;\r\n  connected: boolean;\r\n  signTransaction: (transaction: Transaction) => Promise<Transaction>;\r\n  signAllTransactions: (transaction: Transaction[]) => Promise<Transaction[]>;\r\n  connect: () => any;\r\n  disconnect: () => any;\r\n  on<T>(event: string, fn: () => void): this;\r\n}\r\n","import type Transport from \"@ledgerhq/hw-transport\";\r\nimport type { Transaction } from \"@solana/web3.js\";\r\n\r\nimport EventEmitter from \"eventemitter3\";\r\nimport { PublicKey } from \"@solana/web3.js\";\r\nimport TransportWebUSB from \"@ledgerhq/hw-transport-webusb\";\r\nimport { notify } from \"../../utils/notifications\";\r\nimport { getPublicKey, signTransaction } from \"./core\";\r\nimport { DEFAULT_PUBLIC_KEY, WalletAdapter } from \"../types\";\r\n\r\nexport class LedgerWalletAdapter extends EventEmitter implements WalletAdapter {\r\n  _connecting: boolean;\r\n  _publicKey: PublicKey | null;\r\n  _transport: Transport | null;\r\n\r\n  constructor() {\r\n    super();\r\n    this._connecting = false;\r\n    this._publicKey = null;\r\n    this._transport = null;\r\n  }\r\n\r\n  get publicKey() {\r\n    return this._publicKey || DEFAULT_PUBLIC_KEY;\r\n  }\r\n\r\n  get connected() {\r\n    return this._publicKey !== null;\r\n  }\r\n\r\n  get autoApprove() {\r\n    return false;\r\n  }\r\n\r\n  public async signAllTransactions(\r\n    transactions: Transaction[]\r\n  ): Promise<Transaction[]> {\r\n    const result: Transaction[] = [];\r\n    for (let i = 0; i < transactions.length; i++) {\r\n      const transaction = transactions[i];\r\n      const signed = await this.signTransaction(transaction);\r\n      result.push(signed);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  async signTransaction(transaction: Transaction) {\r\n    if (!this._transport || !this._publicKey) {\r\n      throw new Error(\"Not connected to Ledger\");\r\n    }\r\n\r\n    // @TODO: account selection (derivation path changes with account)\r\n    const signature = await signTransaction(this._transport, transaction);\r\n\r\n    transaction.addSignature(this._publicKey, signature);\r\n\r\n    return transaction;\r\n  }\r\n\r\n  async connect() {\r\n    if (this._connecting) {\r\n      return;\r\n    }\r\n\r\n    this._connecting = true;\r\n\r\n    try {\r\n      // @TODO: transport selection (WebUSB, WebHID, bluetooth, ...)\r\n      this._transport = await TransportWebUSB.create();\r\n      // @TODO: account selection\r\n      this._publicKey = await getPublicKey(this._transport);\r\n      this.emit(\"connect\", this._publicKey);\r\n    } catch (error) {\r\n      notify({\r\n        message: \"Ledger Error\",\r\n        description: error.message,\r\n      });\r\n      await this.disconnect();\r\n    } finally {\r\n      this._connecting = false;\r\n    }\r\n  }\r\n\r\n  async disconnect() {\r\n    let emit = false;\r\n    if (this._transport) {\r\n      await this._transport.close();\r\n      this._transport = null;\r\n      emit = true;\r\n    }\r\n\r\n    this._connecting = false;\r\n    this._publicKey = null;\r\n\r\n    if (emit) {\r\n      this.emit(\"disconnect\");\r\n    }\r\n  }\r\n}\r\n","import EventEmitter from \"eventemitter3\";\r\nimport { PublicKey, Transaction } from \"@solana/web3.js\";\r\nimport { notify } from \"../../utils/notifications\";\r\nimport { DEFAULT_PUBLIC_KEY, WalletAdapter } from \"../types\";\r\n\r\nexport class SolongWalletAdapter extends EventEmitter implements WalletAdapter {\r\n  _publicKey?: PublicKey;\r\n  _onProcess: boolean;\r\n  _connected: boolean;\r\n  constructor() {\r\n    super();\r\n    this._onProcess = false;\r\n    this._connected = false;\r\n    this.connect = this.connect.bind(this);\r\n  }\r\n\r\n  get connected() {\r\n    return this._connected;\r\n  }\r\n\r\n  get autoApprove() {\r\n    return false;\r\n  }\r\n\r\n  public async signAllTransactions(\r\n    transactions: Transaction[]\r\n  ): Promise<Transaction[]> {\r\n    const solong = (window as any).solong;\r\n    if (solong.signAllTransactions) {\r\n      return solong.signAllTransactions(transactions);\r\n    } else {\r\n      const result: Transaction[] = [];\r\n      for (let i = 0; i < transactions.length; i++) {\r\n        const transaction = transactions[i];\r\n        const signed = await solong.signTransaction(transaction);\r\n        result.push(signed);\r\n      }\r\n\r\n      return result;\r\n    }\r\n  }\r\n\r\n  get publicKey() {\r\n    return this._publicKey || DEFAULT_PUBLIC_KEY;\r\n  }\r\n\r\n  async signTransaction(transaction: Transaction) {\r\n    return (window as any).solong.signTransaction(transaction);\r\n  }\r\n\r\n  connect() {\r\n    if (this._onProcess) {\r\n      return;\r\n    }\r\n\r\n    if ((window as any).solong === undefined) {\r\n      notify({\r\n        message: \"Solong Error\",\r\n        description: \"Please install solong wallet from Chrome \",\r\n      });\r\n      return;\r\n    }\r\n\r\n    this._onProcess = true;\r\n    (window as any).solong\r\n      .selectAccount()\r\n      .then((account: any) => {\r\n        this._publicKey = new PublicKey(account);\r\n        this._connected = true;\r\n        this.emit(\"connect\", this._publicKey);\r\n      })\r\n      .catch(() => {\r\n        this.disconnect();\r\n      })\r\n      .finally(() => {\r\n        this._onProcess = false;\r\n      });\r\n  }\r\n\r\n  disconnect() {\r\n    if (this._publicKey) {\r\n      this._publicKey = undefined;\r\n      this._connected = false;\r\n      this.emit(\"disconnect\");\r\n    }\r\n  }\r\n}\r\n","import EventEmitter from \"eventemitter3\";\r\nimport { PublicKey, Transaction } from \"@solana/web3.js\";\r\nimport { notify } from \"../../utils/notifications\";\r\nimport { DEFAULT_PUBLIC_KEY, WalletAdapter } from \"../types\";\r\n\r\ntype PhantomEvent = \"disconnect\" | \"connect\";\r\ntype PhantomRequestMethod =\r\n  | \"connect\"\r\n  | \"disconnect\"\r\n  | \"signTransaction\"\r\n  | \"signAllTransactions\";\r\n\r\ninterface PhantomProvider {\r\n  publicKey?: PublicKey;\r\n  isConnected?: boolean;\r\n  autoApprove?: boolean;\r\n  signTransaction: (transaction: Transaction) => Promise<Transaction>;\r\n  signAllTransactions: (transactions: Transaction[]) => Promise<Transaction[]>;\r\n  connect: () => Promise<void>;\r\n  disconnect: () => Promise<void>;\r\n  on: (event: PhantomEvent, handler: (args: any) => void) => void;\r\n  request: (method: PhantomRequestMethod, params: any) => Promise<any>;\r\n}\r\n\r\nexport class PhantomWalletAdapter\r\n  extends EventEmitter\r\n  implements WalletAdapter {\r\n  _provider: PhantomProvider | undefined;\r\n  constructor() {\r\n    super();\r\n    this.connect = this.connect.bind(this);\r\n  }\r\n\r\n  get connected() {\r\n    return this._provider?.isConnected || false;\r\n  }\r\n\r\n  get autoApprove() {\r\n    return this._provider?.autoApprove || false;\r\n  }\r\n\r\n  async signAllTransactions(\r\n    transactions: Transaction[]\r\n  ): Promise<Transaction[]> {\r\n    if (!this._provider) {\r\n      return transactions;\r\n    }\r\n\r\n    return this._provider.signAllTransactions(transactions);\r\n  }\r\n\r\n  get publicKey() {\r\n    return this._provider?.publicKey || DEFAULT_PUBLIC_KEY;\r\n  }\r\n\r\n  async signTransaction(transaction: Transaction) {\r\n    if (!this._provider) {\r\n      return transaction;\r\n    }\r\n\r\n    return this._provider.signTransaction(transaction);\r\n  }\r\n\r\n  connect = async () => {\r\n    if (this._provider) {\r\n      return;\r\n    }\r\n\r\n    let provider: PhantomProvider;\r\n    if ((window as any)?.solana?.isPhantom) {\r\n      provider = (window as any).solana;\r\n    } else {\r\n      window.open(\"https://phantom.app/\", \"_blank\");\r\n      notify({\r\n        message: \"Phantom Error\",\r\n        description: \"Please install Phantom wallet from Chrome \",\r\n      });\r\n      return;\r\n    }\r\n\r\n    provider.on('connect', () => {\r\n      this._provider = provider;\r\n      this.emit(\"connect\");\r\n    })\r\n\r\n    if (!provider.isConnected) {\r\n      await provider.connect();\r\n    }\r\n\r\n    this._provider = provider;\r\n    this.emit(\"connect\");\r\n  }\r\n\r\n  disconnect() {\r\n    if (this._provider) {\r\n      this._provider.disconnect();\r\n      this._provider = undefined;\r\n      this.emit(\"disconnect\");\r\n    }\r\n  }\r\n}\r\n","import EventEmitter from 'eventemitter3';\r\nimport { PublicKey, Transaction } from '@solana/web3.js';\r\nimport { notify } from '../../utils/notifications';\r\nimport { DEFAULT_PUBLIC_KEY, WalletAdapter } from '../types';\r\n\r\nexport class MathWalletAdapter extends EventEmitter implements WalletAdapter {\r\n  _publicKey?: PublicKey;\r\n  _onProcess: boolean;\r\n  _connected: boolean;\r\n  constructor() {\r\n    super();\r\n    this._onProcess = false;\r\n    this._connected = false;\r\n    this.connect = this.connect.bind(this);\r\n  }\r\n\r\n  get connected() {\r\n    return this._connected;\r\n  }\r\n\r\n  get autoApprove() {\r\n    return false;\r\n  }\r\n\r\n  public async signAllTransactions(\r\n    transactions: Transaction[],\r\n  ): Promise<Transaction[]> {\r\n    if (!this._provider) {\r\n      return transactions;\r\n    }\r\n\r\n    return this._provider.signAllTransactions(transactions);\r\n  }\r\n\r\n  private get _provider() {\r\n    if ((window as any)?.solana?.isMathWallet) {\r\n      return (window as any).solana;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  get publicKey() {\r\n    return this._publicKey || DEFAULT_PUBLIC_KEY;\r\n  }\r\n\r\n  async signTransaction(transaction: Transaction) {\r\n    if (!this._provider) {\r\n      return transaction;\r\n    }\r\n\r\n    return this._provider.signTransaction(transaction);\r\n  }\r\n\r\n  connect() {\r\n    if (this._onProcess) {\r\n      return;\r\n    }\r\n\r\n    if (!this._provider) {\r\n      window.open('https://mathwallet.org/', '_blank');\r\n      notify({\r\n        message: 'Math Wallet Error',\r\n        description: 'Please install mathwallet',\r\n      });\r\n      return;\r\n    }\r\n\r\n    this._onProcess = true;\r\n    this._provider\r\n      .getAccount()\r\n      .then((account: any) => {\r\n        this._publicKey = new PublicKey(account);\r\n        this._connected = true;\r\n        this.emit('connect', this._publicKey);\r\n      })\r\n      .catch(() => {\r\n        this.disconnect();\r\n      })\r\n      .finally(() => {\r\n        this._onProcess = false;\r\n      });\r\n  }\r\n\r\n  disconnect() {\r\n    if (this._publicKey) {\r\n      this._publicKey = undefined;\r\n      this._connected = false;\r\n      this.emit('disconnect');\r\n    }\r\n  }\r\n}\r\n","import React, {\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n} from \"react\";\r\nimport Wallet from \"@project-serum/sol-wallet-adapter\";\r\nimport { Button, Modal } from \"antd\";\r\nimport {\r\n  WalletAdapter,\r\n  LedgerWalletAdapter,\r\n  SolongWalletAdapter,\r\n  PhantomWalletAdapter,\r\n  MathWalletAdapter,\r\n} from \"../wallet-adapters\";\r\nimport { useConnectionConfig } from \"../utils/connection\";\r\nimport { useLocalStorageState } from \"../utils/utils\";\r\nimport { notify } from \"../utils/notifications\";\r\n\r\nconst ASSET_URL =\r\n  \"https://cdn.jsdelivr.net/gh/solana-labs/oyster@main/assets/wallets\";\r\nexport const WALLET_PROVIDERS = [\r\n  {\r\n    name: \"sollet.io\",\r\n    url: \"https://www.sollet.io\",\r\n    icon: `${ASSET_URL}/sollet.svg`,\r\n  },\r\n  {\r\n    name: \"Solflare\",\r\n    url: \"https://solflare.com/access-wallet\",\r\n    icon: `${ASSET_URL}/solflare.svg`,\r\n  },\r\n  {\r\n    name: \"Ledger\",\r\n    url: \"https://www.ledger.com\",\r\n    icon: `${ASSET_URL}/ledger.svg`,\r\n    adapter: LedgerWalletAdapter,\r\n  },\r\n  {\r\n    name: \"Solong\",\r\n    url: \"https://www.solong.com\",\r\n    icon: `${ASSET_URL}/solong.png`,\r\n    adapter: SolongWalletAdapter,\r\n  },\r\n  {\r\n    name: \"MathWallet\",\r\n    url: \"https://www.mathwallet.org\",\r\n    icon: `${ASSET_URL}/mathwallet.svg`,\r\n    adapter: MathWalletAdapter,\r\n  },\r\n  {\r\n    name: \"Phantom\",\r\n    url: \"https://www.phantom.app\",\r\n    icon: `https://www.phantom.app/img/logo.png`,\r\n    adapter: PhantomWalletAdapter,\r\n  },\r\n];\r\n\r\nconst WalletContext = React.createContext<any>(null);\r\n\r\nexport function WalletProvider({ children = null as any }) {\r\n  const { endpoint } = useConnectionConfig();\r\n\r\n  const [autoConnect, setAutoConnect] = useState(false);\r\n  const [providerUrl, setProviderUrl] = useLocalStorageState(\"walletProvider\");\r\n\r\n  const provider = useMemo(\r\n    () => WALLET_PROVIDERS.find(({ url }) => url === providerUrl),\r\n    [providerUrl]\r\n  );\r\n\r\n  const wallet = useMemo(\r\n    function () {\r\n      if (provider) {\r\n        return new (provider.adapter || Wallet)(\r\n          providerUrl,\r\n          endpoint\r\n        ) as WalletAdapter;\r\n      }\r\n    },\r\n    [provider, providerUrl, endpoint]\r\n  );\r\n\r\n  const [connected, setConnected] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (wallet) {\r\n      wallet.on(\"connect\", () => {\r\n        if (wallet.publicKey) {\r\n          console.log(\"connected\");\r\n          localStorage.removeItem(\"feeDiscountKey\");\r\n          setConnected(true);\r\n          const walletPublicKey = wallet.publicKey.toBase58();\r\n          const keyToDisplay =\r\n            walletPublicKey.length > 20\r\n              ? `${walletPublicKey.substring(\r\n                  0,\r\n                  7\r\n                )}.....${walletPublicKey.substring(\r\n                  walletPublicKey.length - 7,\r\n                  walletPublicKey.length\r\n                )}`\r\n              : walletPublicKey;\r\n\r\n          notify({\r\n            message: \"Wallet update\",\r\n            description: \"Connected to wallet \" + keyToDisplay,\r\n          });\r\n        }\r\n      });\r\n\r\n      wallet.on(\"disconnect\", () => {\r\n        setConnected(false);\r\n        notify({\r\n          message: \"Wallet update\",\r\n          description: \"Disconnected from wallet\",\r\n        });\r\n        localStorage.removeItem(\"feeDiscountKey\");\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      setConnected(false);\r\n      if (wallet) {\r\n        wallet.disconnect();\r\n        setConnected(false);\r\n      }\r\n    };\r\n  }, [wallet]);\r\n\r\n  useEffect(() => {\r\n    if (wallet && autoConnect) {\r\n      wallet.connect();\r\n      setAutoConnect(false);\r\n    }\r\n\r\n    return () => {};\r\n  }, [wallet, autoConnect]);\r\n\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n\r\n  const select = useCallback(() => setIsModalVisible(true), []);\r\n  const close = useCallback(() => setIsModalVisible(false), []);\r\n\r\n  return (\r\n    <WalletContext.Provider\r\n      value={{\r\n        wallet,\r\n        connected,\r\n        select,\r\n        providerUrl,\r\n        setProviderUrl,\r\n        providerName:\r\n          WALLET_PROVIDERS.find(({ url }) => url === providerUrl)?.name ??\r\n          providerUrl,\r\n      }}\r\n    >\r\n      {children}\r\n      <Modal\r\n        title=\"Select Wallet\"\r\n        okText=\"Connect\"\r\n        visible={isModalVisible}\r\n        okButtonProps={{ style: { display: \"none\" } }}\r\n        onCancel={close}\r\n        width={400}\r\n      >\r\n        {WALLET_PROVIDERS.map((provider) => {\r\n          const onClick = function () {\r\n            setProviderUrl(provider.url);\r\n            setAutoConnect(true);\r\n            close();\r\n          };\r\n\r\n          return (\r\n            <Button\r\n              size=\"large\"\r\n              type={providerUrl === provider.url ? \"primary\" : \"ghost\"}\r\n              onClick={onClick}\r\n              icon={\r\n                <img\r\n                  alt={`${provider.name}`}\r\n                  width={20}\r\n                  height={20}\r\n                  src={provider.icon}\r\n                  style={{ marginRight: 8 }}\r\n                />\r\n              }\r\n              style={{\r\n                display: \"block\",\r\n                width: \"100%\",\r\n                textAlign: \"left\",\r\n                marginBottom: 8,\r\n              }}\r\n            >\r\n              {provider.name}\r\n            </Button>\r\n          );\r\n        })}\r\n      </Modal>\r\n    </WalletContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useWallet() {\r\n  const context = useContext(WalletContext);\r\n  if (!context) {\r\n    throw new Error(\"Missing wallet context\");\r\n  }\r\n\r\n  const wallet = context.wallet;\r\n  return {\r\n    connected: context.connected,\r\n    wallet: wallet,\r\n    providerUrl: context.providerUrl,\r\n    setProvider: context.setProviderUrl,\r\n    providerName: context.providerName,\r\n    select: context.select,\r\n    connect() {\r\n      wallet ? wallet.connect() : context.select();\r\n    },\r\n    disconnect() {\r\n      wallet?.disconnect();\r\n    },\r\n  };\r\n}\r\n"],"sourceRoot":""}